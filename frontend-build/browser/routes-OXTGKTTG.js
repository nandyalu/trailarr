import{a as Re}from"./chunk-ADYSPPPS.js";import{a as Fe,b as Ie,d as Le,e as qe,f as re}from"./chunk-CLMRRFMO.js";import{a as Ne}from"./chunk-VY3NM3NN.js";import{a as He,b as Be}from"./chunk-A2QQHJMB.js";import{a as Ze}from"./chunk-IKSWT5RA.js";import"./chunk-BCMX5QMB.js";import{f as le,p as W}from"./chunk-TBPGMFNI.js";import{A as de,a as j,c as $,g as G,w as Qe,y as A}from"./chunk-CGZER6MH.js";import{a as Y}from"./chunk-CMGRYTU6.js";import{$a as fe,Aa as S,Ba as C,Da as c,Ea as V,Fa as F,Ga as I,H as T,Ha as _e,Ia as Oe,Ib as Ve,J as _,Ja as ge,Jb as ae,K as g,Ka as J,L as x,La as R,M as k,Na as l,Oa as v,Pa as P,Qa as ue,R as O,Ra as N,S as X,Sa as Q,Ta as Z,U as xe,Ua as ee,Va as U,Wa as M,X as b,Xa as Ce,Ya as te,Z as we,_ as r,_a as ie,bb as D,c as he,ca as Me,cb as y,da as q,eb as Te,fb as E,ga as H,gb as be,hb as De,ia as ne,ib as L,jb as ve,kb as ye,m as ce,ma as m,na as p,oa as Se,pa as Pe,qa as B,qb as Ee,ra as z,sa as h,sb as ke,ta as i,u as me,ua as n,va as u,vb as oe,za as pe}from"./chunk-2I2MBWCP.js";var ze=(()=>{class t{transform(e){return Fe(e)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275pipe=H({name:"durationConvert",type:t,pure:!0})}}return t})();var Ue=(()=>{class t{transform(e){return Ie(e)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275pipe=H({name:"durationSecondsConvert",type:t,pure:!0})}}return t})();var se=(()=>{class t{transform(e){return qe(e)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275pipe=H({name:"fileSize",type:t,pure:!0})}}return t})();var Xe=t=>["/settings","profiles",t],Je=(t,d)=>d.id;function et(t,d){t&1&&(x(),i(0,"svg",7),u(1,"path",20),n())}function tt(t,d){t&1&&(x(),i(0,"svg",8),u(1,"path",21),n())}function it(t,d){if(t&1&&l(0),t&2){let e=c().$implicit;P(" (",e.audio_language,") ")}}function nt(t,d){if(t&1&&l(0),t&2){let e=c(2).$implicit;P(" (",e.subtitle_language,") ")}}function ot(t,d){if(t&1&&(i(0,"span",13),l(1,"\u2022"),n(),i(2,"span",12),l(3),m(4,nt,1,1),n()),t&2){let e=c().$implicit;r(3),P(" ",e.subtitle_format," "),r(),p(e.subtitle_language?4:-1)}}function at(t,d){t&1&&(i(0,"span",17),l(1,"Unknown"),n())}function lt(t,d){if(t&1&&(i(0,"span",22),l(1),n()),t&2){let e=c(2).$implicit,o=c(2);h("routerLink",ie(2,Xe,e.profile_id)),r(),P(" ",o.profilesMap().get(e.profile_id)||"Deleted"," ")}}function rt(t,d){t&1&&(i(0,"span",17),l(1,"Deleted"),n())}function dt(t,d){if(t&1&&m(0,lt,2,4,"span",22)(1,rt,2,0,"span",17),t&2){let e=c().$implicit,o=c(2).profilesMap().has(e.profile_id);p(o?0:1)}}function st(t,d){if(t&1&&(i(0,"a",19),x(),i(1,"svg",23),u(2,"path",24),n()()),t&2){let e=c().$implicit,o=c(2);h("href",o.getYouTubeUrl(e.youtube_id),b)}}function ct(t,d){if(t&1&&(i(0,"div",4)(1,"div",5)(2,"div",6),m(3,et,2,0,":svg:svg",7)(4,tt,2,0,":svg:svg",8),n(),i(5,"div",9)(6,"h4",10),l(7),n(),i(8,"div",11)(9,"span",12),l(10),n(),i(11,"span",13),l(12,"\u2022"),n(),i(13,"span",12),l(14),n(),i(15,"span",13),l(16,"\u2022"),n(),i(17,"span",12),l(18),m(19,it,1,1),n(),m(20,ot,5,2),i(21,"span",13),l(22,"\u2022"),n(),i(23,"span",12),l(24),D(25,"fileSize"),n(),i(26,"span",13),l(27,"\u2022"),n(),i(28,"span",12),l(29),D(30,"durationSecondsConvert"),n()(),i(31,"div",14),l(32),D(33,"date"),n()()(),i(34,"div",15)(35,"span",16),l(36,"Profile:"),n(),m(37,at,2,0,"span",17)(38,dt,2,1),n(),i(39,"div",18),m(40,st,3,1,"a",19),n()()),t&2){let e=d.$implicit;r(3),p(e.file_exists?3:4),r(4),v(e.file_name),r(3),P("",e.resolution,"p"),r(4),v(e.video_format),r(4),P(" ",e.audio_format," "),r(),p(e.audio_language?19:-1),r(),p(e.subtitle_format?20:-1),r(4),v(y(25,12,e.size)),r(5),v(y(30,14,e.duration)),r(3),P("Added: ",y(33,16,e.added_at)),r(5),p(e.profile_id===0?37:38),r(3),p(e.youtube_id&&!e.youtube_id.startsWith("unknown")?40:-1)}}function mt(t,d){if(t&1&&(i(0,"div",2),B(1,ct,41,18,"div",4,Je),n()),t&2){let e=c();r(),z(e.downloads())}}function pt(t,d){t&1&&(i(0,"div",3)(1,"p"),l(2,"No downloads recorded yet."),n()())}var je=(()=>{class t{constructor(){this.profileService=T(Ze),this.downloads=L.required(),this.hasDownloads=E(()=>this.downloads().length>0),this.profilesMap=E(()=>{let e=this.profileService.allProfiles.value(),o=new Map;return e.forEach(a=>{o.set(a.id,a.customfilter.filter_name)}),o})}getYouTubeUrl(e){return`https://www.youtube.com/watch?v=${e}`}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=q({type:t,selectors:[["media-downloads"]],inputs:{downloads:[1,"downloads"]},decls:7,vars:2,consts:[[1,"downloads-section"],[1,"title-block"],[1,"downloads-list"],[1,"no-downloads"],[1,"download-card"],[1,"download-main"],[1,"download-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","title","File Deleted"],[1,"download-info"],[1,"download-title"],[1,"download-meta"],[1,"meta-item"],[1,"meta-separator"],[1,"download-date"],[1,"download-profile"],[1,"profile-label"],[1,"profile-name"],[1,"download-actions"],["target","_blank","title","View on YouTube",1,"yt-link",3,"href"],["d","M350-234h177q17.25 0 28.63-11.38Q567-256.75 567-274v-50l82 47v-166l-82 47v-50q0-17.25-11.37-28.63Q544.25-486 527-486H350q-17.25 0-28.62 11.37Q310-463.25 310-446v172q0 17.25 11.38 28.62Q332.75-234 350-234ZM218-64q-28.73 0-50.86-22.14Q145-108.28 145-137v-686q0-28.72 22.14-50.86Q189.27-896 218-896h358l239 240v519q0 28.72-22.14 50.86T742-64H218Zm321-559v-200H218v686h524v-486H539ZM218-823v200-200 686-686Z"],["d","M880-275 720-435v111l-60-60v-356H304l-60-60h416q24 0 42 18t18 42v215l160-160v410ZM848-27 39-836l42-42L890-69l-42 42ZM482-562Zm-84 84ZM159-800l60 60h-79v520h520v-79l60 60v19q0 24-18 42t-42 18H140q-24 0-42-18t-18-42v-520q0-24 18-42t42-18h19Zm73 482v-21q0-46 45-72.5T400-438q78 0 123 26.5t45 72.5v21H232Z"],[1,"profile-name","link",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z"]],template:function(o,a){o&1&&(i(0,"div",0)(1,"div",1)(2,"h3"),l(3,"Downloads"),n()(),u(4,"hr"),m(5,mt,3,0,"div",2),m(6,pt,3,0,"div",3),n()),o&2&&(r(5),p(a.hasDownloads()?5:-1),r(),p(a.hasDownloads()?-1:6))},dependencies:[ae,oe,Ue,se],styles:["[_nghost-%COMP%]{display:contents}.downloads-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin:1rem}.title-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;gap:.5rem}.title-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;margin-block:0}.title-block[_ngcontent-%COMP%]   .icononly-button[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem}.title-block[_ngcontent-%COMP%]   .refresh-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.downloads-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.download-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--color-surface-container-high);color:var(--color-on-surface-variant);border-radius:.5rem;border:1px solid var(--color-outline)}.download-main[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.download-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;fill:var(--color-on-surface)}.download-info[_ngcontent-%COMP%]{flex:1}.download-info[_ngcontent-%COMP%]   .download-title[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;margin-block:0;margin-bottom:.5rem}.download-info[_ngcontent-%COMP%]   .download-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:var(--color-secondary);flex-wrap:wrap}.download-info[_ngcontent-%COMP%]   .download-meta[_ngcontent-%COMP%]   .meta-separator[_ngcontent-%COMP%]{color:var(--color-outline)}.download-info[_ngcontent-%COMP%]   .download-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-secondary);margin-top:.25rem}.download-profile[_ngcontent-%COMP%]{margin:1rem;font-size:.875rem;color:var(--color-secondary)}.download-profile[_ngcontent-%COMP%]   .profile-label[_ngcontent-%COMP%]{font-weight:600;margin-right:.25rem}.download-profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-style:italic}.download-profile[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{background:var(--color-secondary-container);color:var(--color-on-secondary-container);text-decoration:none;cursor:pointer}.download-profile[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{text-decoration:underline}.download-actions[_ngcontent-%COMP%]   .yt-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;background:red;transition:transform .2s}.download-actions[_ngcontent-%COMP%]   .yt-link[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.download-actions[_ngcontent-%COMP%]   .yt-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#fff}.no-downloads[_ngcontent-%COMP%]{text-align:center;color:var(--color-secondary);font-style:italic}@media(max-width:768px){.download-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;position:relative}.download-icon[_ngcontent-%COMP%]{display:none}.download-profile[_ngcontent-%COMP%]{margin:.5rem 0}.download-actions[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1rem}}"],changeDetection:0})}}return t})();var _t=["videoEditDialog"],gt=["videoElement"];function ut(t,d){t&1&&(u(0,"app-load-indicator"),i(1,"span",25),l(2,"Processing video..."),n())}function Ct(t,d){if(t&1){let e=S();i(0,"div",24)(1,"button",26),C("click",function(){_(e);let a=c();return g(a.trimVideo())}),l(2,"Trim Video"),n(),i(3,"button",27),C("click",function(){_(e);let a=c();return g(a.closeVideoEditDialog())}),l(4,"Cancel"),n()()}}var Ge=(()=>{class t{constructor(){this.filesService=T(de),this.webSocketService=T(W),this.filePath=L.required(),this.fileName=L.required(),this.isOpen=ye(!1),this.onTrimComplete=De(),this.startTimestamp=O("0"),this.endTimestamp=O(""),this.outputFileName=O(""),this.isProcessing=O(!1),this.videoEditDialog=ve.required("videoEditDialog"),this.videoElement=ve("videoElement")}get startTime(){return this.startTimestamp()}set startTime(e){this.startTimestamp.set(e)}get endTime(){return this.endTimestamp()}set endTime(e){this.endTimestamp.set(e)}get outputFile(){return this.outputFileName()}set outputFile(e){this.outputFileName.set(e)}ngOnInit(){let e=this.fileName(),o=e.lastIndexOf(".");if(o>0){let a=e.substring(0,o),s=e.substring(o);this.outputFileName.set(`${a}_trimmed${s}`)}else this.outputFileName.set(`${e}_trimmed`)}ngAfterViewInit(){this.isOpen()&&this.showDialog()}ngOnChanges(){this.isOpen()?this.showDialog():this.closeDialog()}showDialog(){this.videoEditDialog().nativeElement.showModal(),setTimeout(()=>{let e=this.videoElement()?.nativeElement;e&&e.addEventListener("loadedmetadata",()=>{e.duration&&!this.endTimestamp()&&this.endTimestamp.set(this.formatTime(e.duration))})},100)}closeDialog(){this.videoEditDialog().nativeElement.close()}setCurrentTimeAsStart(){let e=this.videoElement()?.nativeElement;e&&this.startTimestamp.set(this.formatTime(e.currentTime))}setCurrentTimeAsEnd(){let e=this.videoElement()?.nativeElement;e&&this.endTimestamp.set(this.formatTime(e.currentTime))}seekToStart(){let e=this.videoElement()?.nativeElement;e&&this.startTimestamp()&&(e.currentTime=this.parseTime(this.startTimestamp()))}seekToEnd(){let e=this.videoElement()?.nativeElement;e&&this.endTimestamp()&&(e.currentTime=this.parseTime(this.endTimestamp()))}formatTime(e){let o=Math.floor(e/3600),a=Math.floor(e%3600/60),s=Math.floor(e%60);return o>0?`${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}parseTime(e){let o=e.split(":").map(a=>parseInt(a,10));return o.length===3?o[0]*3600+o[1]*60+o[2]:o.length===2?o[0]*60+o[1]:o.length===1?o[0]:0}trimVideo(){if(!this.validateInputs())return;this.isProcessing.set(!0);let o=`${this.filePath().substring(0,this.filePath().lastIndexOf("/"))}/${this.outputFileName()}`,a=this.parseTime(this.startTimestamp()),s=this.parseTime(this.endTimestamp());this.filesService.trimVideoApiV1FilesTrimVideoPost({file_path:this.filePath(),output_file:o,start_timestamp:a,end_timestamp:s}).subscribe({next:f=>{this.webSocketService.showToast(f,"success"),this.onTrimComplete.emit(),this.closeVideoEditDialog()},error:f=>{console.error("Error trimming video:",f),this.webSocketService.showToast("Failed to trim video","error"),this.isProcessing.set(!1)},complete:()=>{this.isProcessing.set(!1)}})}validateInputs(){let e=this.parseTime(this.startTimestamp()),o=this.parseTime(this.endTimestamp());return e>=o?(this.webSocketService.showToast("Start time must be less than end time","error"),!1):this.outputFileName().trim()?!0:(this.webSocketService.showToast("Output filename is required","error"),!1)}closeVideoEditDialog(){this.isOpen.set(!1),this.closeDialog()}getVideoUrl(){return`/api/v1/files/video?file_path=${encodeURIComponent(this.filePath())}`}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=q({type:t,selectors:[["app-video-edit-dialog"]],viewQuery:function(o,a){o&1&&(_e(a.videoEditDialog,_t,5),_e(a.videoElement,gt,5)),o&2&&Oe(2)},inputs:{filePath:[1,"filePath"],fileName:[1,"fileName"],isOpen:[1,"isOpen"]},outputs:{isOpen:"isOpenChange",onTrimComplete:"onTrimComplete"},features:[xe],decls:41,vars:5,consts:[["videoEditDialog",""],["videoElement",""],[3,"click"],[1,"video-edit-dialog",3,"click"],[1,"dialog-header"],[1,"close",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","m249-186-63-63 231-231-231-230 63-64 231 230 231-230 63 64-230 230 230 231-63 63-231-230-231 230Z"],[1,"video-container"],["controls",""],["type","video/mp4",3,"src"],[1,"trim-controls"],[1,"time-inputs-row"],[1,"time-input-group"],["for","startTime"],[1,"input-with-button"],["id","startTime","type","text","placeholder","00:00:00 or 00:00","pattern","^(\\d{1,2}:)?\\d{1,2}:\\d{2}$",3,"ngModelChange","ngModel"],["type","button",1,"secondary","small",3,"click"],["for","endTime"],["id","endTime","type","text","placeholder","00:00:00 or 00:00","pattern","^(\\d{1,2}:)?\\d{1,2}:\\d{2}$",3,"ngModelChange","ngModel"],[1,"output-input-group"],["for","outputFile"],["id","outputFile","type","text","placeholder","filename_trimmed.mp4",3,"ngModelChange","ngModel"],[1,"dialog-actions"],[1,"action-buttons"],[1,"processing-text"],[1,"primary",3,"click"],[1,"tertiary",3,"click"]],template:function(o,a){if(o&1){let s=S();i(0,"dialog",2,0),C("click",function(){return _(s),g(a.closeVideoEditDialog())}),i(2,"div",3),C("click",function(w){return _(s),g(w.stopPropagation())}),i(3,"div",4)(4,"h2"),l(5,"Trim Video"),n(),i(6,"i",5),C("click",function(){return _(s),g(a.closeVideoEditDialog())}),x(),i(7,"svg",6),u(8,"path",7),n()()(),k(),i(9,"div",8)(10,"video",9,1),u(12,"source",10),l(13," Your browser does not support the video tag. "),n()(),i(14,"div",11)(15,"div",12)(16,"div",13)(17,"label",14),l(18,"Start Time:"),n(),i(19,"div",15)(20,"input",16),Z("ngModelChange",function(w){return _(s),Q(a.startTime,w)||(a.startTime=w),g(w)}),n(),i(21,"button",17),C("click",function(){return _(s),g(a.setCurrentTimeAsStart())}),l(22,"Use Current"),n(),i(23,"button",17),C("click",function(){return _(s),g(a.seekToStart())}),l(24,"Seek"),n()()(),i(25,"div",13)(26,"label",18),l(27,"End Time:"),n(),i(28,"div",15)(29,"input",19),Z("ngModelChange",function(w){return _(s),Q(a.endTime,w)||(a.endTime=w),g(w)}),n(),i(30,"button",17),C("click",function(){return _(s),g(a.setCurrentTimeAsEnd())}),l(31,"Use Current"),n(),i(32,"button",17),C("click",function(){return _(s),g(a.seekToEnd())}),l(33,"Seek"),n()()()(),i(34,"div",20)(35,"label",21),l(36,"Output Filename:"),n(),i(37,"input",22),Z("ngModelChange",function(w){return _(s),Q(a.outputFile,w)||(a.outputFile=w),g(w)}),n()()(),i(38,"div",23),m(39,ut,3,0)(40,Ct,5,0,"div",24),n()()()}o&2&&(r(12),h("src",a.getVideoUrl(),b),r(8),N("ngModel",a.startTime),r(9),N("ngModel",a.endTime),r(8),N("ngModel",a.outputFile),r(2),p(a.isProcessing()?39:40))},dependencies:[A,j,$,Qe,G,Y],styles:[".video-edit-dialog[_ngcontent-%COMP%]{background:var(--color-surface-container-highest);border-radius:8px;padding:0;max-width:90vw;max-height:90vh;overflow:hidden}.video-edit-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid var(--color-outline);background:var(--color-surface-container-high)}.video-edit-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--color-on-surface)}.video-edit-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{cursor:pointer;padding:.25rem;border-radius:4px;transition:background-color .2s}.video-edit-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{background:var(--color-surface-container)}.video-edit-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:var(--color-on-surface)}.video-edit-dialog[_ngcontent-%COMP%]   .video-container[_ngcontent-%COMP%]{padding:1rem;background:#000;display:flex;justify-content:center}.video-edit-dialog[_ngcontent-%COMP%]   .video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;max-width:100%;height:auto;max-height:50vh}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;gap:1rem}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .time-inputs-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .time-inputs-row[_ngcontent-%COMP%]   .time-input-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.5rem}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .time-inputs-row[_ngcontent-%COMP%]   .time-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--color-on-surface)}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .time-inputs-row[_ngcontent-%COMP%]   .time-input-group[_ngcontent-%COMP%]   .input-with-button[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;justify-content:center}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .time-inputs-row[_ngcontent-%COMP%]   .time-input-group[_ngcontent-%COMP%]   .input-with-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border:1px solid var(--color-outline);border-radius:4px;background:var(--color-surface);color:var(--color-on-surface)}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .time-inputs-row[_ngcontent-%COMP%]   .time-input-group[_ngcontent-%COMP%]   .input-with-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .time-inputs-row[_ngcontent-%COMP%]   .time-input-group[_ngcontent-%COMP%]   .input-with-button[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:.875rem;white-space:nowrap}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .output-input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .output-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--color-on-surface)}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .output-input-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:.5rem;border:1px solid var(--color-outline);border-radius:4px;background:var(--color-surface);color:var(--color-on-surface)}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .output-input-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.video-edit-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid var(--color-outline);background:var(--color-surface-container-high);display:flex;justify-content:center;align-items:center;gap:1rem}.video-edit-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:2rem;justify-content:center}.video-edit-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .processing-text[_ngcontent-%COMP%]{color:var(--color-on-surface-variant);font-style:italic}@media(max-width:768px){.video-edit-dialog[_ngcontent-%COMP%]{width:95vw;max-height:95vh}.video-edit-dialog[_ngcontent-%COMP%]   .video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-height:40vh}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .time-inputs-row[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .time-inputs-row[_ngcontent-%COMP%]   .time-input-group[_ngcontent-%COMP%]   .input-with-button[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.video-edit-dialog[_ngcontent-%COMP%]   .trim-controls[_ngcontent-%COMP%]   .time-inputs-row[_ngcontent-%COMP%]   .time-input-group[_ngcontent-%COMP%]   .input-with-button[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{width:100%}.video-edit-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column;width:100%;gap:1rem}.video-edit-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})}}return t})();var ft=["optionsDialog"],vt=["textDialog"],ht=["videoDialog"],xt=["videoDialogContent"],wt=["videoInfoDialog"],Mt=["renameDialog"],St=["deleteFileDialog"],Ae=t=>({folderUntyped:t}),Pt=(t,d)=>d.index;function Ot(t,d){if(t&1){let e=S();i(0,"i",36),C("click",function(){_(e);let a=c();return g(a.filesResource.reload())}),x(),i(1,"svg",37),u(2,"path",38),n()()}if(t&2){let e=c();J("loading",e.filesResource.isLoading())}}function Tt(t,d){if(t&1){let e=S();i(0,"small",39),C("click",function(){_(e);let a=c();return g(a.filesOpened.set(!0))}),l(1,"Click to open files"),n()}}function bt(t,d){t&1&&u(0,"app-load-indicator",24)}function Dt(t,d){if(t&1&&(i(0,"p",41),l(1),n()),t&2){let e=c(3);r(),P("Error: ",e.filesError())}}function yt(t,d){t&1&&pe(0)}function Et(t,d){if(t&1&&(i(0,"div",42),u(1,"div"),i(2,"div"),l(3,"Name"),n(),i(4,"div"),l(5,"Size"),n(),i(6,"div"),l(7,"Modified"),n()(),ne(8,yt,1,0,"ng-container",43)),t&2){let e=c(3),o=ge(8);r(8),h("ngTemplateOutlet",o)("ngTemplateOutletContext",ie(2,Ae,e.filesResource.value()))}}function kt(t,d){if(t&1&&(i(0,"div",40),m(1,Dt,2,1,"p",41)(2,Et,9,4),n()),t&2){let e=c(2);r(),p(e.filesResource.error()?1:2)}}function Vt(t,d){if(t&1&&(u(0,"hr"),m(1,bt,1,0,"app-load-indicator",24)(2,kt,3,1,"div",40)),t&2){let e=c();r(),p(e.filesResource.isLoading()?1:2)}}function Ft(t,d){t&1&&(x(),i(0,"svg",17),u(1,"path",51),n())}function It(t,d){t&1&&(x(),i(0,"svg",17),u(1,"path",52),n())}function Lt(t,d){if(t&1&&m(0,Ft,2,0,":svg:svg",17)(1,It,2,0,":svg:svg",17),t&2){c();let e=M(0);p(e.isExpanded?0:1)}}function qt(t,d){t&1&&(x(),i(0,"svg",17),u(1,"path",53),n())}function Nt(t,d){t&1&&pe(0)}function Qt(t,d){if(t&1&&ne(0,Nt,1,0,"ng-container",43),t&2){let e=d.$implicit;c(4);let o=ge(8);h("ngTemplateOutlet",o)("ngTemplateOutletContext",ie(2,Ae,e))}}function Zt(t,d){if(t&1&&B(0,Qt,1,4,"ng-container",null,Pe),t&2){c(2);let e=M(0);z(e.files)}}function Rt(t,d){if(t&1&&(i(0,"div",50),m(1,Zt,2,0),n()),t&2){c();let e=M(0);r(),p(e.isExpanded?1:-1)}}function Ht(t,d){if(t&1){let e=S();ee(0),i(1,"div",44)(2,"div",45),C("click",function(){_(e);let a=M(0),s=c();return g(s.openFolderOrOptions(a))}),i(3,"div",46),m(4,Lt,2,1)(5,qt,2,0,":svg:svg",17),n(),i(6,"div",47),l(7),n(),i(8,"div",48),l(9),n(),i(10,"div",49),l(11),D(12,"date"),n()(),m(13,Rt,2,1,"div",50),n()}if(t&2){let e=d.folderUntyped,o=U(c().asFolderInfo(e));r(2),J("parent",o.type=="folder"),r(2),p(o.type==="folder"?4:5),r(3),v(o.name),r(2),v(o.size),r(2),v(y(12,8,o.modified)),r(2),p(o.type==="folder"?13:-1)}}function Bt(t,d){if(t&1){let e=S();i(0,"div",54),C("click",function(){_(e);let a=c();return a.closeOptionsDialog(),g(a.openVideoDialog())}),i(1,"span"),x(),i(2,"svg",17),u(3,"path",55),n()(),k(),i(4,"span"),l(5,"Play Video"),n()(),i(6,"div",56),C("click",function(){_(e);let a=c();return a.closeOptionsDialog(),g(a.openVideoInfoDialog())}),i(7,"span"),x(),i(8,"svg",17),u(9,"path",57),n()(),k(),i(10,"span"),l(11,"Video Info"),n()(),i(12,"div",58),C("click",function(){_(e);let a=c();return a.closeOptionsDialog(),g(a.openVideoEditDialog())}),i(13,"span"),x(),i(14,"svg",17),u(15,"path",59),n()(),k(),i(16,"span"),l(17,"Trim Video"),n()()}}function zt(t,d){if(t&1){let e=S();i(0,"div",61),C("click",function(){_(e);let a=c(2);return a.closeOptionsDialog(),g(a.openTextDialog())}),i(1,"span"),x(),i(2,"svg",17),u(3,"path",62),n()(),k(),i(4,"span"),l(5,"View Text"),n()()}}function Ut(t,d){if(t&1&&m(0,zt,6,0,"div",60),t&2){let e=c();p(e.isTextFile()?0:-1)}}function jt(t,d){t&1&&u(0,"app-load-indicator",24)}function $t(t,d){if(t&1&&(l(0,`
          `),l(1,`
          `),i(2,"code"),l(3),n(),l(4,`
        `)),t&2){let e=d.$implicit;r(3),v(e)}}function Gt(t,d){if(t&1){let e=S();i(0,"div",63),C("click",function(a){return _(e),g(a.stopPropagation())}),i(1,"h2"),l(2),n(),i(3,"div",64)(4,"pre"),l(5,"        "),B(6,$t,5,1,null,null,Se),n()(),i(8,"div",29)(9,"button",31),C("click",function(){_(e);let a=c();return g(a.closeTextDialog())}),l(10,"Close"),n()()()}if(t&2){let e=c();r(2),v(e.selectedFileName()),r(4),z(e.selectedFileText())}}function At(t,d){t&1&&u(0,"app-load-indicator",24)}function Wt(t,d){if(t&1&&(i(0,"div",67)(1,"span"),l(2,"Audio Tracks"),n(),i(3,"code"),l(4),n()()),t&2){let e=c(3);r(4),v(e.audioTracks())}}function Yt(t,d){if(t&1&&(i(0,"div",67)(1,"span"),l(2,"Subtitles"),n(),i(3,"code"),l(4),n()()),t&2){let e=c(3);r(4),v(e.subtitleTracks())}}function Kt(t,d){if(t&1&&(i(0,"div",67)(1,"span"),l(2,"Channel ID"),n(),i(3,"code"),l(4),n()()),t&2){let e=c(2);r(4),v(e.youtube_channel)}}function Xt(t,d){if(t&1&&(i(0,"div",67)(1,"span"),l(2,"Video ID"),n(),i(3,"code")(4,"a",68),l(5),n()()()),t&2){let e=c(2);r(4),h("href","https://www.youtube.com/watch?v="+e.youtube_id,b),r(),v(e.youtube_id)}}function Jt(t,d){if(t&1&&(i(0,"section")(1,"h2"),l(2,"YouTube Info"),n(),u(3,"hr"),m(4,Kt,5,1,"div",67),m(5,Xt,6,2,"div",67),n()),t&2){let e=c();r(4),p(e.youtube_channel?4:-1),r(),p(e.youtube_id?5:-1)}}function ei(t,d){if(t&1&&(i(0,"div",67)(1,"span"),l(2,"Codec"),n(),i(3,"code"),l(4),n()()),t&2){let e=c().$implicit;r(4),v(e.codec_name)}}function ti(t,d){if(t&1&&(i(0,"div",67)(1,"span"),l(2,"Language"),n(),i(3,"code"),l(4),n()()),t&2){let e=c().$implicit;r(4),v(e.language)}}function ii(t,d){if(t&1&&(i(0,"div",67)(1,"span"),l(2,"Display Dimensions"),n(),i(3,"code"),l(4),n()()),t&2){let e=c().$implicit;r(4),ue("",e.coded_width,"x",e.coded_height)}}function ni(t,d){if(t&1&&(i(0,"div",67)(1,"span"),l(2,"Audio Channels"),n(),i(3,"code"),l(4),n()()),t&2){let e=c().$implicit;r(4),v(e.audio_channels)}}function oi(t,d){if(t&1&&(i(0,"div",67)(1,"span"),l(2,"Audio Frequency"),n(),i(3,"code"),l(4),n()()),t&2){let e=c().$implicit;r(4),v(e.sample_rate)}}function ai(t,d){if(t&1&&(i(0,"section")(1,"h2"),l(2),n(),u(3,"hr"),m(4,ei,5,1,"div",67),m(5,ti,5,1,"div",67),m(6,ii,5,2,"div",67),m(7,ni,5,1,"div",67),m(8,oi,5,1,"div",67),n()),t&2){let e=d.$implicit;r(2),ue("Track ",e.index,": ",e.codec_type),r(2),p(e.codec_name?4:-1),r(),p(e.language?5:-1),r(),p(e.coded_height&&e.coded_width?6:-1),r(),p(e.audio_channels?7:-1),r(),p(e.sample_rate?8:-1)}}function li(t,d){if(t&1&&(i(0,"section",66)(1,"h2"),l(2,"File Info"),n(),u(3,"hr"),i(4,"div",67)(5,"span"),l(6,"File Name"),n(),i(7,"code"),l(8),n()(),i(9,"div",67)(10,"span"),l(11,"File Path"),n(),i(12,"code"),l(13),n()(),i(14,"div",67)(15,"span"),l(16,"File Size"),n(),i(17,"code"),l(18),D(19,"fileSize"),n()(),i(20,"div",67)(21,"span"),l(22,"Created"),n(),i(23,"code"),l(24),D(25,"date"),n()(),i(26,"div",67)(27,"span"),l(28,"Updated"),n(),i(29,"code"),l(30),D(31,"date"),n()(),i(32,"div",67)(33,"span"),l(34,"Format"),n(),i(35,"code"),l(36),n()(),i(37,"div",67)(38,"span"),l(39,"Bitrate"),n(),i(40,"code"),l(41),n()(),i(42,"div",67)(43,"span"),l(44,"Duration"),n(),i(45,"code"),l(46),n()(),m(47,Wt,5,1,"div",67),m(48,Yt,5,1,"div",67),n(),m(49,Jt,6,2,"section"),B(50,ai,9,7,"section",null,Pt)),t&2){let e=d,o=c(2);r(8),v(e.name),r(5),v(e.file_path),r(5),v(y(19,11,e.size||0)),r(6),v(y(25,13,e.created_at)),r(6),v(y(31,15,e.updated_at)),r(6),v(e.format_name),r(5),v(e.bitrate),r(5),v(e.duration),r(),p(o.audioTracks().length>0?47:-1),r(),p(o.subtitleTracks().length>0?48:-1),r(),p(e.youtube_channel||e.youtube_id?49:-1),r(),z(e.streams)}}function ri(t,d){t&1&&(i(0,"h2"),l(1,"Video Info"),n(),u(2,"hr"),i(3,"code",69),l(4," Unable to fetch video info. "),n())}function di(t,d){if(t&1){let e=S();i(0,"div",26)(1,"h1"),l(2,"Video Properties"),n(),i(3,"div",65),C("click",function(a){return _(e),g(a.stopPropagation())}),m(4,li,52,17)(5,ri,5,0),n(),i(6,"div",29)(7,"button",31),C("click",function(){_(e);let a=c();return g(a.closeVideoInfoDialog())}),l(8,"Close"),n()()()}if(t&2){let e,o=c();r(4),p((e=o.videoInfo())?4:5,e)}}function si(t,d){if(t&1){let e=S();i(0,"app-video-edit-dialog",70),Z("isOpenChange",function(a){_(e);let s=c();return Q(s.videoEditDialogOpen,a)||(s.videoEditDialogOpen=a),g(a)}),C("onTrimComplete",function(){_(e);let a=c();return g(a.onVideoTrimComplete())}),n()}if(t&2){let e=c();h("filePath",e.selectedFilePath())("fileName",e.selectedFileName()),N("isOpen",e.videoEditDialogOpen)}}var We=(()=>{class t{constructor(){this.filesService=T(de),this.mediaService=T(re),this.webSocketService=T(W),this.mediaId=L.required(),this.filesOpened=O(!1),this.textFileLoading=O(!0),this.videoInfoLoading=O(!0),this.videoEditDialogOpen=O(!1),this.mediaIDEffect=X(()=>{this.mediaId(),this.filesOpened.set(!1)}),this.selectedFilePath=O(""),this.selectedFileName=O(""),this.videoInfo=O(null),this.selectedFileText=O([],{equal:Le}),this.audioTracks=E(()=>(this.videoInfo()?.streams??[]).filter(e=>e.codec_type.includes("audio")).map(e=>`${e.language||"unk"} (${e.codec_name})`).join(", ")),this.subtitleTracks=E(()=>(this.videoInfo()?.streams??[]).filter(e=>e.codec_type.includes("subtitle")).map(e=>`${e.language||"unk"} (${e.codec_name})`).join(", ")),this.filesResource=be({params:()=>({mediaId:this.mediaId(),filesOpened:this.filesOpened()}),loader:a=>he(this,[a],function*({params:{mediaId:e,filesOpened:o}}){if(o)return yield this.mediaService.fetchMediaFiles(e)})}),this.filesError=E(()=>{let e=this.filesResource.error();return e?e.cause?.error.detail||"Error fetching media files.":""}),this.isTextFile=E(()=>[".txt",".srt",".log",".json",".py",".sh"].some(e=>this.selectedFileName().endsWith(e))),this.isVideoFile=E(()=>[".mp4",".mkv",".avi",".webm"].some(e=>this.selectedFileName().endsWith(e)))}ngOnInit(){this.webSocketService.toastMessage.pipe(Ne()).subscribe(e=>{let o=e.message.toLowerCase(),a=this.mediaId().toString(),s=this.mediaService.selectedMedia()?.title?.toLowerCase()||"";["media","trailer",a,s].some(w=>w&&o.includes(w))&&this.filesResource.reload()})}asFolderInfo(e){return e}openFolderOrOptions(e){e.type==="folder"?e.isExpanded=!e.isExpanded:(this.selectedFilePath.set(e.path),this.selectedFileName.set(e.name),this.openOptionsDialog())}renameFile(){this.closeRenameDialog();let o=this.selectedFilePath().split("/").slice(0,-1).join("/")+"/"+this.selectedFileName();this.filesService.renameFileFolApiV1FilesRenamePost({old_path:this.selectedFilePath(),new_path:o}).subscribe(a=>{let s="";a?s="File renamed successfully!":s="Failed to rename file!",this.webSocketService.showToast(s,a?"success":"error"),this.filesResource.reload()})}deleteFile(){this.closeDeleteFileDialog(),this.filesService.deleteFileFolApiV1FilesDeleteDelete({path:this.selectedFilePath(),media_id:this.mediaId()}).subscribe(e=>{let o="";e?o="Deleted successfully!":o="Failed to delete!",this.webSocketService.showToast(o,e?"success":"error"),this.filesResource.reload()})}openOptionsDialog(){this.optionsDialog.nativeElement.showModal()}closeOptionsDialog(){this.optionsDialog.nativeElement.close()}openTextDialog(){this.closeOptionsDialog(),this.textFileLoading.set(!0),this.selectedFileText.set([]),this.textDialog.nativeElement.showModal(),this.filesService.readFileApiV1FilesReadGet({file_path:this.selectedFilePath()}).subscribe({next:e=>this.selectedFileText.set(e.split(`
`)),complete:()=>this.textFileLoading.set(!1),error:()=>this.textFileLoading.set(!1)})}closeTextDialog(){this.textDialog.nativeElement.close()}openVideoDialog(){this.videoDialog.nativeElement.showModal();let o=`
      <style>
        video {
          width: 75vw;
          height: auto;
        }
        @media (max-width: 768px) {
          video {
            width: 100%;
          }
        }
      </style>
      <video controls controlsList="nodownload">
        <source src="${`/api/v1/files/video?file_path=${encodeURIComponent(this.selectedFilePath())}`}" type="video/mp4">
        Your browser does not support the video tag.</source>
      </video>`;this.videoDialogContent.nativeElement.innerHTML=o}closeVideoDialog(){this.videoDialogContent.nativeElement.innerHTML="",this.videoDialog.nativeElement.close()}openVideoInfoDialog(){this.videoInfoLoading.set(!0),this.videoInfoDialog.nativeElement.showModal(),this.filesService.getVideoInfoApiV1FilesVideoInfoGet({file_path:this.selectedFilePath()}).subscribe({next:e=>{this.videoInfo.set(e)},complete:()=>this.videoInfoLoading.set(!1),error:()=>this.videoInfoLoading.set(!1)})}closeVideoInfoDialog(){this.videoInfoDialog.nativeElement.close(),this.videoInfo.set(null)}openRenameDialog(){this.closeOptionsDialog(),this.renameDialog.nativeElement.showModal()}closeRenameDialog(){this.renameDialog.nativeElement.close()}openDeleteFileDialog(){this.closeOptionsDialog(),this.deleteFileDialog.nativeElement.showModal()}closeDeleteFileDialog(){this.deleteFileDialog.nativeElement.close()}openVideoEditDialog(){this.closeOptionsDialog(),this.videoEditDialogOpen.set(!0)}closeVideoEditDialog(){this.videoEditDialogOpen.set(!1)}onVideoTrimComplete(){this.filesResource.reload()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=q({type:t,selectors:[["media-files"]],viewQuery:function(o,a){if(o&1&&(V(ft,5),V(vt,5),V(ht,5),V(xt,5),V(wt,5),V(Mt,5),V(St,5)),o&2){let s;F(s=I())&&(a.optionsDialog=s.first),F(s=I())&&(a.textDialog=s.first),F(s=I())&&(a.videoDialog=s.first),F(s=I())&&(a.videoDialogContent=s.first),F(s=I())&&(a.videoInfoDialog=s.first),F(s=I())&&(a.renameDialog=s.first),F(s=I())&&(a.deleteFileDialog=s.first)}},inputs:{mediaId:[1,"mediaId"]},decls:71,vars:8,consts:[["folFileTemplate",""],["optionsDialog",""],["optionsDialogContent",""],["textDialog",""],["videoDialog",""],["videoDialogContent",""],["videoInfoDialog",""],["renameDialog",""],["deleteFileDialog",""],[1,"media-files-container"],[1,"title-block"],[1,"files-title"],["title","Refresh",1,"icononly-button",3,"loading"],[1,"files-open"],[3,"click"],[1,"dialog-content",3,"click"],[1,"close",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","m249-186-63-63 231-231-231-230 63-64 231 230 231-230 63 64-230 230 230 231-63 63-231-230-231 230Z"],[1,"dialog-options"],["title","Rename",1,"icon-link",3,"click"],["d","M81-5v-138h798V-5H81Zm150-327h30l371-371-13.35-15.86L604-733 231-362v30Zm-68 69v-126l486-488q10-9 23.11-14.5 13.12-5.5 26-5.5 12.89 0 25.89 5.75T748-876l28 25q12 10 17 23.99 5 13.99 5 26.52 0 13.17-5.46 26.76Q787.09-760.14 777-751L288-263H163Zm563-538-27-27 27 27Zm-94 98-13.35-15.86L604-733l28 30Z"],["title","Delete",1,"icon-link","danger-option",3,"click"],["d","M253-99q-38.21 0-65.11-26.6Q161-152.2 161-190v-552h-58v-91h228v-47h297v47h228v91h-58v552q0 37.18-27.21 64.09Q743.59-99 706-99H253Zm453-643H253v552h453v-552ZM357-268h74v-398h-74v398Zm173 0h75v-398h-75v398ZM253-742v552-552Z"],[1,"center"],[1,"text-dialog"],[1,"info-dialog"],[1,"rename-dialog",3,"click"],["id","rename-file","type","text","placeholder","New Name",1,"rename-input",3,"ngModelChange","ngModel"],[1,"buttons-row"],[1,"primary",3,"click"],[1,"tertiary",3,"click"],["id","deleteFileDialog",3,"click"],[1,"delete-dialog",3,"click"],[1,"danger",3,"click"],[3,"filePath","fileName","isOpen"],["title","Refresh",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"refresh-icon"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],[1,"files-open",3,"click"],[1,"media-files"],[1,"text-sm","text-center"],[1,"files-header","sm-none","text-sm"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"files-accordion"],[1,"files-header",3,"click"],[1,"files-icon"],[1,"files-name"],[1,"files-size"],[1,"files-modified"],[1,"child"],["d","M146.67-160q-26.34 0-46.5-20.17Q80-200.33 80-226.67v-506.66q0-26.34 20.17-46.5Q120.33-800 146.67-800H414l66.67 66.67h332.66q26.34 0 46.5 20.16Q880-693 880-666.67H146.67v440l100-373.33H940L834.33-209.67q-6.66 24.67-24.5 37.17Q792-160 766.67-160h-620Z"],["d","M146.67-160q-27 0-46.84-20.17Q80-200.33 80-226.67v-506.66q0-26.34 19.83-46.5Q119.67-800 146.67-800H414l66.67 66.67h332.66q26.34 0 46.5 20.16Q880-693 880-666.67v440q0 26.34-20.17 46.5Q839.67-160 813.33-160H146.67Z"],["d","M319.33-246.67h321.34v-66.66H319.33v66.66Zm0-166.66h321.34V-480H319.33v66.67ZM226.67-80q-27 0-46.84-19.83Q160-119.67 160-146.67v-666.66q0-27 19.83-46.84Q199.67-880 226.67-880H574l226 226v507.33q0 27-19.83 46.84Q760.33-80 733.33-80H226.67Zm314-542.67h192.66L540.67-813.33v190.66Z"],["title","Play Video",1,"icon-link",3,"click"],["d","M320-203v-560l440 280-440 280Zm60-280Zm0 171 269-171-269-171v342Z"],["title","Video Info",1,"icon-link",3,"click"],["d","M447-272h73v-248h-73v248Zm32.89-330Q496-602 507-612.59q11-10.58 11-26.23 0-17.63-10.87-28.4Q496.26-678 480.19-678q-17.19 0-27.69 10.6T442-639.68q0 16.28 10.89 26.98 10.9 10.7 27 10.7Zm-.08 538q-85.92 0-161.52-33.02-75.61-33.02-131.93-89.34-56.32-56.32-89.34-132.13T64-480.5q0-86.09 33.08-161.81t89.68-132.31q56.61-56.59 132.06-88.99Q394.27-896 480.06-896q86.15 0 162.17 32.39 76.02 32.4 132.4 89Q831-718 863.5-641.96 896-565.92 896-479.72q0 86.19-32.39 161.29-32.4 75.11-88.99 131.51Q718.03-130.53 642-97.26 565.98-64 479.81-64Zm.69-73q142.01 0 242.26-100.74Q823-338.49 823-480.5T722.94-722.76Q622.89-823 480-823q-141.51 0-242.26 100.06Q137-622.89 137-480q0 141.51 100.74 242.26Q338.49-137 480.5-137Zm-.5-343Z"],["title","Trim Video",1,"icon-link",3,"click"],["d","M780-105 480-405 372-297q10 18 12.5 33.5T387-228q0 68.87-45.59 114.44Q295.82-68 226.91-68T112.5-113.59Q67-159.18 67-228.09t45.56-114.41Q158.13-388 227-388q18 0 35.5 4.5T299-369l108-107-110-110q-17 8-34.5 10.5T227-573q-68.87 0-114.44-45.59Q67-664.18 67-733.09t45.59-114.41q45.59-45.5 114.5-45.5t114.41 45.56Q387-801.88 387-733q0 20-2 36.5T375-664l519 520v39H780ZM605-524l-76-76 251-252h114v38L605-524ZM226.83-646q36.69 0 61.93-25.07Q314-696.14 314-732.83q0-36.7-25.07-61.93Q263.86-820 227.17-820t-61.93 25.07Q140-769.86 140-733.17q0 36.7 25.07 61.93Q190.14-646 226.83-646Zm255.03 195q10.74 0 18.44-7.56 7.7-7.55 7.7-18.3 0-10.74-7.56-18.44-7.55-7.7-18.3-7.7-10.74 0-18.44 7.56-7.7 7.55-7.7 18.3 0 10.74 7.56 18.44 7.55 7.7 18.3 7.7ZM226.83-141q36.69 0 61.93-25.07Q314-191.14 314-227.83t-25.07-61.93Q263.86-315 227.17-315t-61.93 25.07Q140-264.86 140-228.17t25.07 61.93Q190.14-141 226.83-141Z"],["title","View Text",1,"icon-link"],["title","View Text",1,"icon-link",3,"click"],["d","M321-250h318v-69H321v69Zm0-169h319v-68H321v68ZM229-59q-35.78 0-63.39-26.91Q138-112.83 138-150v-660q0-37.59 27.61-64.79Q193.22-902 229-902h364l230 228v524q0 37.17-27.91 64.09Q767.19-59 731-59H229Zm316-569v-182H229v660h502v-478H545ZM229-810v182-182 660-660Z"],[1,"text-dialog",3,"click"],[1,"text-content"],[1,"info-container",3,"click"],["open",""],[1,"info-content"],["target","_blank","rel","noopener",3,"href"],[1,"video-info"],[3,"isOpenChange","onTrimComplete","filePath","fileName","isOpen"]],template:function(o,a){if(o&1){let s=S();i(0,"div",9)(1,"div",10)(2,"h3",11),l(3,"Files"),n(),m(4,Ot,3,2,"i",12)(5,Tt,2,0,"small",13),n(),m(6,Vt,3,1),n(),ne(7,Ht,14,10,"ng-template",null,0,Te),i(9,"dialog",14,1),C("click",function(){return _(s),g(a.closeOptionsDialog())}),i(11,"div",15,2),C("click",function(w){return _(s),g(w.stopPropagation())}),i(13,"h2"),l(14,"Options"),n(),i(15,"i",16),C("click",function(){return _(s),g(a.closeOptionsDialog())}),x(),i(16,"svg",17),u(17,"path",18),n()(),k(),i(18,"div",19),m(19,Bt,18,0)(20,Ut,1,1),i(21,"div",20),C("click",function(){return _(s),g(a.openRenameDialog())}),i(22,"span"),x(),i(23,"svg",17),u(24,"path",21),n()(),k(),i(25,"span"),l(26,"Rename"),n()(),i(27,"div",22),C("click",function(){return _(s),g(a.openDeleteFileDialog())}),i(28,"span"),x(),i(29,"svg",17),u(30,"path",23),n()(),k(),i(31,"span"),l(32,"Delete"),n()()()()(),i(33,"dialog",14,3),C("click",function(){return _(s),g(a.closeTextDialog())}),m(35,jt,1,0,"app-load-indicator",24)(36,Gt,11,1,"div",25),n(),i(37,"dialog",14,4),C("click",function(){return _(s),g(a.closeVideoDialog())}),i(39,"div",14,5),C("click",function(w){return _(s),g(w.stopPropagation())}),n()(),i(41,"dialog",14,6),C("click",function(){return _(s),g(a.closeVideoInfoDialog())}),m(43,At,1,0,"app-load-indicator",24)(44,di,9,1,"div",26),n(),i(45,"dialog",14,7),C("click",function(){return _(s),g(a.closeRenameDialog())}),i(47,"div",27),C("click",function(w){return _(s),g(w.stopPropagation())}),i(48,"h2"),l(49,"Rename"),n(),i(50,"input",28),C("ngModelChange",function(w){return _(s),g(a.selectedFileName.set(w))}),n(),i(51,"div",29)(52,"button",30),C("click",function(){return _(s),g(a.renameFile())}),l(53,"Rename"),n(),i(54,"button",31),C("click",function(){return _(s),g(a.closeRenameDialog())}),l(55,"Cancel"),n()()()(),i(56,"dialog",32,8),C("click",function(){return _(s),g(a.closeDeleteFileDialog())}),i(58,"div",33),C("click",function(w){return _(s),g(w.stopPropagation())}),i(59,"h3"),l(60,"Confirm Delete"),n(),i(61,"code"),l(62),n(),i(63,"p"),l(64,"Are you sure you want to delete this file?"),n(),i(65,"div",29)(66,"button",34),C("click",function(){return _(s),g(a.deleteFile())}),l(67,"Confirm"),n(),i(68,"button",31),C("click",function(){return _(s),g(a.closeDeleteFileDialog())}),l(69,"Cancel"),n()()()(),m(70,si,1,3,"app-video-edit-dialog",35)}o&2&&(r(4),p(a.filesOpened()?4:5),r(2),p(a.filesOpened()?6:-1),r(13),p(a.isVideoFile()?19:20),r(16),p(a.textFileLoading()?35:36),r(8),p(a.videoInfoLoading()?43:44),r(7),h("ngModel",a.selectedFileName()),r(12),v(a.selectedFileName()),r(8),p(a.videoEditDialogOpen()?70:-1))},dependencies:[A,j,$,G,Y,Ee,Ge,oe,se],styles:['[_nghost-%COMP%]{display:contents}.center[_ngcontent-%COMP%]{margin:auto}.text-center[_ngcontent-%COMP%]{text-align:center}.title-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;gap:.5rem}.files-title[_ngcontent-%COMP%]{margin:0;margin-block:0}.files-open[_ngcontent-%COMP%]{flex:1;cursor:pointer;padding:.75rem}.icononly-button[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem;padding:0}.refresh-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.loading[_ngcontent-%COMP%]{cursor:progress;animation:spin-animation 2s linear infinite}.media-files-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin:1rem}.media-files-container[_ngcontent-%COMP%]   .media-files[_ngcontent-%COMP%]{width:100%;display:block;border:1px solid var(--color-outline);border-radius:4px;background-color:var(--color-surface-container-high);color:var(--color-on-surface-variant);overflow-y:auto}.files-header[_ngcontent-%COMP%]{grid-row:1;display:grid;grid-template-columns:auto 6fr 1fr 2fr;gap:.5rem;align-items:center;text-align:center;padding:1rem;border:none;outline:none;transition:.4s;border-top:1px solid var(--color-outline);position:relative;font-size:.75rem}@media(max-width:765px){.files-header[_ngcontent-%COMP%]{grid-template-columns:auto auto auto;grid-template-rows:1fr auto}}.files-header[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:50%;left:-1rem;width:1rem;height:1px;background-color:var(--color-outline)}.files-accordion[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-rows:1fr auto;border-left:1px solid var(--color-outline);position:relative}.files-accordion[_ngcontent-%COMP%]   .parent[_ngcontent-%COMP%]{cursor:pointer}.files-accordion[_ngcontent-%COMP%]   .child[_ngcontent-%COMP%]{grid-row:2;padding:0 0 0 1rem;position:relative;cursor:pointer}.child[_ngcontent-%COMP%]   .files-accordion[_ngcontent-%COMP%]:last-child{border-bottom:1px solid var(--color-outline);margin-bottom:1rem}.files-header[_ngcontent-%COMP%]   .files-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}@media(max-width:765px){.files-header[_ngcontent-%COMP%]   .files-icon[_ngcontent-%COMP%]{grid-row:1/span 2;grid-column:1;justify-self:center}}.files-header[_ngcontent-%COMP%]   .files-name[_ngcontent-%COMP%]{font-size:1rem;text-align:left;display:flex;align-items:center;gap:.25rem}@media(max-width:765px){.files-header[_ngcontent-%COMP%]   .files-name[_ngcontent-%COMP%]{grid-row:1;grid-column:2/span 2;justify-self:start}}.files-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:var(--color-on-surface)}@media(max-width:765px){.files-header[_ngcontent-%COMP%]   .files-size[_ngcontent-%COMP%]{grid-row:2;grid-column:2;justify-self:start;margin-left:.25rem}.files-header[_ngcontent-%COMP%]   .files-modified[_ngcontent-%COMP%]{grid-row:2;grid-column:3;justify-self:end}}dialog[_ngcontent-%COMP%]   app-load-indicator[_ngcontent-%COMP%]{margin:4rem}.dialog-content[_ngcontent-%COMP%]{margin:1rem;position:relative}.dialog-header[_ngcontent-%COMP%]{position:relative}.dialog-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;cursor:pointer;border-radius:50%}.dialog-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:2rem;width:2rem;fill:var(--color-on-surface);padding:0}.dialog-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem}.icon-link[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none;transition:all .4s;cursor:pointer;padding:1rem 3rem 1rem 0;border-bottom:1px solid var(--color-outline);font-size:1.25rem}.icon-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:1.5rem}.icon-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:var(--color-on-surface);padding:0;margin:0 .5rem}.danger-option[_ngcontent-%COMP%]{color:var(--color-error)}.danger-option[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--color-error)}.rename-dialog[_ngcontent-%COMP%], .delete-dialog[_ngcontent-%COMP%], .text-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1.5rem;margin:1.5rem;max-width:75vw;max-height:75vh}@media(width<765px){.rename-dialog[_ngcontent-%COMP%], .delete-dialog[_ngcontent-%COMP%], .text-dialog[_ngcontent-%COMP%]{max-width:90vw;margin:1rem}}.delete-dialog[_ngcontent-%COMP%]{background-color:var(--color-on-error-container);color:var(--color-on-error);padding:0 1rem 1rem;margin:0;gap:1rem}#deleteFileDialog[_ngcontent-%COMP%]::backdrop{background-image:linear-gradient(0deg,gray,#690005)}.text-content[_ngcontent-%COMP%]{width:100%;max-width:75vw;max-height:70vh;overflow-y:auto;border:1px solid var(--color-outline);border-radius:1rem;margin:.25rem}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{padding:1rem;white-space:pre-wrap;word-wrap:break-word;text-align:start;counter-reset:listing;line-height:0;--indent: 2rem;--lineHeight: 2}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{counter-increment:listing;display:block;padding:0 0 0 var(--indent);text-indent:calc(-1 * var(--indent));margin:0;line-height:var(--lineHeight)}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{content:counter(listing) ". ";display:inline-block;width:var(--indent);padding-left:auto;margin-left:auto;text-align:right;color:var(--color-outline)}@media(width<765px){.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{padding:.5rem;--indentSm: 1.5rem;--lineHeightSm: 1.25}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{padding:0 0 0 var(--indentSm);text-indent:calc(-1 * var(--indentSm));line-height:var(--lineHeightSm)}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{width:var(--indentSm)}}.buttons-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;gap:1rem;width:70%}.rename-input[_ngcontent-%COMP%]{field-sizing:content;min-width:50vw;max-width:75vw;padding:1rem;border:1px solid var(--color-outline);border-radius:1rem;font-size:1.2rem}@media(width<765px){.rename-input[_ngcontent-%COMP%]{max-width:90vw}}.info-dialog[_ngcontent-%COMP%], .info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin:1.5rem;max-width:75vw;align-items:center;max-height:75vh}@media(width<765px){.info-dialog[_ngcontent-%COMP%], .info-container[_ngcontent-%COMP%]{max-width:90vw}}.info-container[_ngcontent-%COMP%]{max-height:65vh;overflow-y:auto}section[_ngcontent-%COMP%]{width:100%}.info-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin:1rem .5rem;gap:1rem}@media(width<765px){.info-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem}}.info-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .info-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;text-align:left;width:30%}@media(width<765px){.info-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .info-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;font-weight:unset;font-style:italic;font-size:small}}.info-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2){text-decoration:none;text-align:left;margin:0;padding:.25rem}'],changeDetection:0})}}return t})();var ci=["deleteDialog"],Ye=(t,d)=>[t,d];function mi(t,d){t&1&&u(0,"app-load-indicator",2)}function pi(t,d){if(t&1&&u(0,"div",41),t&2){c(2);let e=M(0);R("background-image: url("+e.fanart_path+");")}}function _i(t,d){if(t&1&&(i(0,"div",13),x(),i(1,"svg",42),u(2,"path",43),n()()),t&2){c(2);let e=M(0);r(),R("view-transition-name: media-"+e.id+"-logo")}}function gi(t,d){t&1&&(i(0,"div",44),x(),i(1,"svg",46),u(2,"path",47),n()())}function ui(t,d){if(t&1&&(i(0,"span"),x(),i(1,"svg",49),u(2,"path",50),n()()),t&2){c(4);let e=M(0);r(),R("view-transition-name: media-"+e.id+"-logo")}}function Ci(t,d){if(t&1&&(i(0,"span"),x(),i(1,"svg",51),u(2,"path",52),n()()),t&2){c(4);let e=M(0);r(),R("view-transition-name: media-"+e.id+"-logo")}}function fi(t,d){if(t&1){let e=S();i(0,"div",48),C("click",function(){_(e);let a=c(3);return g(a.monitorMedia())}),m(1,ui,3,2,"span")(2,Ci,3,2,"span"),n()}if(t&2){c(3);let e=M(0);h("title",e.monitor?"Monitored, click to change":"Not Monitored, click to change"),r(),p(e.monitor?1:2)}}function vi(t,d){if(t&1&&m(0,gi,3,0,"div",44)(1,fi,3,2,"div",45),t&2){let e=c(2);p(e.isLoadingMonitor()?0:1)}}function hi(t,d){if(t&1&&(i(0,"div",16),x(),i(1,"svg",53),u(2,"path",54),n()()),t&2){c();let e=M(10),o=c();h("routerLink",fe(2,Ye,"/"+o.RouteMedia,e.id))("title",e.title)}}function xi(t,d){if(t&1&&(i(0,"div",17),x(),i(1,"svg",53),u(2,"path",55),n()()),t&2){c();let e=M(11),o=c();h("routerLink",fe(2,Ye,"/"+o.RouteMedia,e.id))("title",e.title)}}function wi(t,d){if(t&1&&(i(0,"a",19),u(1,"img",56),n()),t&2){c(2);let e=M(0);h("href",te("https://www.imdb.com/title/",e.imdb_id,"/"),b)}}function Mi(t,d){if(t&1&&(i(0,"a",57),u(1,"img",59),n()),t&2){c(3);let e=M(0);h("href",te("https://www.themoviedb.org/movie/",e.txdb_id),b)}}function Si(t,d){if(t&1&&(i(0,"a",58),u(1,"img",60),n()),t&2){c(3);let e=M(0);h("href",te("https://www.thetvdb.com/?tab=series&id=",e.txdb_id),b)}}function Pi(t,d){if(t&1&&m(0,Mi,2,2,"a",57)(1,Si,2,2,"a",58),t&2){c(2);let e=M(0);p(e.is_movie?0:1)}}function Oi(t,d){if(t&1&&(i(0,"a",61),u(1,"img",63),n()),t&2){let e=c(3);h("href",e.arr_url(),b)}}function Ti(t,d){if(t&1&&(i(0,"a",62),u(1,"img",64),n()),t&2){let e=c(3);h("href",e.arr_url(),b)}}function bi(t,d){if(t&1&&m(0,Oi,2,1,"a",61)(1,Ti,2,1,"a",62),t&2){c(2);let e=M(0);p(e.is_movie?0:1)}}function Di(t,d){if(t&1&&(i(0,"p"),l(1),n()),t&2){c(2);let e=M(0);r(),P("Seasons: ",e.season_count)}}function yi(t,d){if(t&1&&(i(0,"p"),l(1),n()),t&2){c(2);let e=M(0);r(),P("Downloaded: ",e.downloaded_at.toLocaleString())}}function Ei(t,d){t&1&&(i(0,"p"),l(1,"Downloaded: Never"),n())}function ki(t,d){if(t&1){let e=S();i(0,"span",65),C("click",function(){_(e);let a=c(2);return g(a.openProfileSelectDialog(!0))}),x(),i(1,"svg",53),u(2,"path",66),n()()}}function Vi(t,d){t&1&&(i(0,"span",35),x(),i(1,"svg",67)(2,"circle",68),u(3,"animate",69),n(),i(4,"circle",70),u(5,"animate",71),n(),i(6,"circle",72),u(7,"animate",73),n()()())}function Fi(t,d){if(t&1){let e=S();i(0,"button",74),C("click",function(){_(e);let a=c(2);return g(a.saveYtId())}),x(),i(1,"svg",53),u(2,"path",75),n()()}}function Ii(t,d){t&1&&(i(0,"p",37),l(1,"Click Download to download trailer from updated link!"),n())}function Li(t,d){if(t&1){let e=S();i(0,"button",76),C("click",function(){_(e);let a=c(2);return g(a.openTrailer())}),l(1,"Watch"),n()}}function qi(t,d){t&1&&(i(0,"span",78),x(),i(1,"svg",46),u(2,"path",47),n()())}function Ni(t,d){if(t&1){let e=S();i(0,"button",77),C("click",function(){_(e);let a=c(2);return g(a.openProfileSelectDialog(!1))}),i(1,"span"),l(2,"Download "),n(),m(3,qi,3,0,"span",78),n()}if(t&2){let e=c(2),o=M(0);h("disabled",e.isLoadingDownload()||o.status=="downloading"),r(3),p(e.isLoadingDownload()||o.status=="downloading"?3:-1)}}function Qi(t,d){if(t&1){let e=S();i(0,"button",79),C("click",function(){_(e);let a=c(2);return g(a.showDeleteDialog())}),l(1,"Delete"),n()}}function Zi(t,d){if(t&1){let e=S();i(0,"div",3),m(1,pi,1,2,"div",8),i(2,"div",9),u(3,"img",10),n(),i(4,"div",11)(5,"div",12),m(6,_i,3,2,"div",13)(7,vi,2,1),i(8,"span",14),l(9),n(),ee(10)(11),i(12,"div",15),m(13,hi,3,5,"div",16),m(14,xi,3,5,"div",17),n()(),i(15,"div",12)(16,"span",18),l(17),n(),i(18,"span",18),D(19,"durationConvert"),l(20),D(21,"durationConvert"),n()(),i(22,"div",12),m(23,wi,2,2,"a",19),m(24,Pi,2,1),m(25,bi,2,1),n(),i(26,"div",20)(27,"span")(28,"div",21)(29,"span",22),l(30,"Path"),n(),i(31,"span",23)(32,"code"),l(33),n()()()(),i(34,"span")(35,"div",24)(36,"span",22),l(37,"Status"),n(),i(38,"span",25),l(39),D(40,"titlecase"),i(41,"span",26),m(42,Di,2,1,"p"),i(43,"p"),l(44),n(),i(45,"p"),l(46),n(),i(47,"p"),l(48),n(),i(49,"p"),l(50),n(),m(51,yi,2,1,"p")(52,Ei,2,0,"p"),n()()()()(),i(53,"div",12)(54,"div",27)(55,"span",22),l(56,"Overview"),n(),i(57,"span",28),l(58),n()()(),i(59,"div",12)(60,"div",24)(61,"span",22),l(62,"Trailer"),n(),i(63,"div",29)(64,"div",30)(65,"span",31),l(66,"https://www.youtube.com/watch?v="),n(),i(67,"span",32),l(68,"Youtube ID/URL:"),n(),i(69,"input",33),Z("ngModelChange",function(a){_(e);let s=c();return Q(s.trailer_url,a)||(s.trailer_url=a),g(a)}),n()(),m(70,ki,3,0,"span",34),m(71,Vi,8,0,"span",35),m(72,Fi,3,0,"button",36),n(),m(73,Ii,2,0,"p",37),n()(),i(74,"div",12),m(75,Li,2,0,"button",38),m(76,Ni,4,2,"button",39),m(77,Qi,2,0,"button",40),n()()()}if(t&2){let e=c(),o=M(0);r(),p(o.fanart_path?1:-1),r(),J("sm-none",!o.poster_path),h("title",te("",o.title," Poster")),r(),R("view-transition-name: media-"+o.id+"-image"),h("src",Ce(o.poster_path||"assets/poster-lg.png"),b)("alt",Ce(o.title)),r(3),p(o.trailer_exists?6:7),r(2),R("view-transition-name: media-"+o.id+"-title"),h("textToCopy",o.title)("title",o.title),r(),P(" ",o.title," "),r();let a=U(e.previousMedia());r();let s=U(e.nextMedia());r(2),p(a?13:-1),r(),p(s?14:-1),r(2),h("title",o.year),r(),v(o.year),r(),h("title",y(19,47,o.runtime)),r(2),v(y(21,49,o.runtime)),r(3),p(o.imdb_id?23:-1),r(),p(o.txdb_id?24:-1),r(),p(e.arr_url()?25:-1),r(3),h("title",o.folder_path),r(3),h("textToCopy",o.folder_path),r(2),v(o.folder_path),r(6),P("",y(40,51,o.status)," "),r(3),p(o.is_movie?-1:42),r(2),P("Monitored: ",o.monitor),r(2),P("Downloaded: ",o.trailer_exists),r(2),P("Added: ",o.added_at.toLocaleString()),r(2),P("Updated: ",o.updated_at.toLocaleString()),r(),p(o.downloaded_at&&o.downloaded_at.toString()!="Invalid Date"?51:52),r(7),v(o.overview),r(11),N("ngModel",e.trailer_url),r(),p(o.youtube_trailer_id==""&&e.trailer_url==""&&!e.isLoadingDownload()?70:-1),r(),p(e.isLoadingDownload()?71:-1),r(),p(e.trailer_url!=o.youtube_trailer_id&&!e.isLoadingDownload()?72:-1),r(),p(e.trailer_url!=o.youtube_trailer_id?73:-1),r(2),p(o.youtube_trailer_id?75:-1),r(),p(!o.trailer_exists||o.youtube_trailer_id!=e.trailer_url?76:-1),r(),p(o.trailer_exists?77:-1)}}function Ri(t,d){if(t&1&&(i(0,"div",1),u(1,"media-downloads",80),n(),i(2,"div",1),u(3,"media-files",81),n()),t&2){let e=c(),o=M(0);r(),h("downloads",o.downloads),r(2),h("mediaId",e.mediaId())}}var Ke=(()=>{class t{constructor(){this.mediaService=T(re),this.connectionService=T(Be),this.webSocketService=T(W),this.viewContainerRef=T(Me),this.router=T(Ve),this.RouteMedia=le,this.mediaId=L(0,{transform:Number}),this.selectedMedia=this.mediaService.selectedMedia,this.previousMedia=this.mediaService.previousMedia,this.nextMedia=this.mediaService.nextMedia,this.isLoading=E(()=>this.mediaService.mediaResource.isLoading()),this.isLoadingMonitor=O(!1),this.isLoadingDownload=O(!1),this.trailer_url="",this.arr_url=E(()=>{let e=this.selectedMedia();if(!e)return"";let a=this.connectionService.connectionsResource.value().find(s=>s.id==e.connection_id);return a?a.arr_type.toLowerCase()=="radarr"?a.url+"/movie/"+e.txdb_id:a.url+"/series/"+e.title_slug:""}),this.mediaIDChangeEffect=X(()=>{this.mediaService.selectedMediaID.set(this.mediaId())}),this.mediaDataChangeEffect=X(()=>{let e=this.selectedMedia();e&&(this.trailer_url=e.youtube_trailer_id||"",e.status!=="downloading"&&this.isLoadingDownload.set(!1))})}handleKeyboardEvent(e){let o=document.activeElement;if(!(o.tagName==="INPUT"||o.tagName==="TEXTAREA"||o.isContentEditable)&&e.type==="keydown"&&this.mediaId())if(e.key==="ArrowRight"||e.key.toLowerCase()==="n"){let s=this.nextMedia();s&&this.router.navigate([le,s.id])}else if(e.key==="ArrowLeft"||e.key.toLowerCase()==="p"){let s=this.previousMedia();s&&this.router.navigate([le,s.id])}else(e.key==="Delete"||e.key==="Backspace")&&this.showDeleteDialog()}openProfileSelectDialog(e){let o=this.viewContainerRef.createComponent(Re);o.instance.onSubmit.subscribe(a=>{e?this.searchTrailer(a):this.downloadTrailer(a),setTimeout(()=>{o.destroy()},3e3)}),o.instance.onClosed.subscribe(()=>{setTimeout(()=>{o.destroy()},3e3)})}downloadTrailer(e){let o=this.selectedMedia()?.youtube_trailer_id?.toLowerCase()||"",a=this.trailer_url.toLowerCase(),s=this.selectedMedia()?.trailer_exists||!1;o&&a.includes(o)&&s||(this.isLoadingDownload.set(!0),this.mediaService.downloadMediaTrailer(this.mediaId(),e,this.trailer_url).subscribe(f=>{console.log(f)}))}monitorMedia(){this.isLoadingMonitor.set(!0);let e=!this.selectedMedia()?.monitor;this.mediaService.monitorMedia(this.mediaId(),e).subscribe(o=>{console.log(o),this.selectedMedia().monitor=e,this.isLoadingMonitor.set(!1)})}searchTrailer(e){this.webSocketService.showToast("Searching for trailer..."),this.isLoadingDownload.set(!0),this.mediaService.searchMediaTrailer(this.mediaId(),e).pipe(me(o=>(console.error("Error searching trailer:",o.error.detail),this.webSocketService.showToast(o.error.detail,"Error"),this.isLoadingDownload.set(!1),ce("")))).subscribe(()=>{this.isLoadingDownload.set(!1)})}saveYtId(){this.webSocketService.showToast("Saving youtube id..."),this.isLoadingDownload.set(!0),this.mediaService.saveMediaTrailer(this.mediaId(),this.trailer_url).pipe(me(e=>(console.error("Error searching trailer:",e.error.detail),this.webSocketService.showToast(e.error.detail,"Error"),this.isLoadingDownload.set(!1),ce("")))).subscribe(()=>{this.isLoadingDownload.set(!1)})}openTrailer(){this.selectedMedia()?.youtube_trailer_id&&window.open(`https://www.youtube.com/watch?v=${this.selectedMedia()?.youtube_trailer_id}`,"_blank")}showDeleteDialog(){this.deleteDialog.nativeElement.showModal()}closeDeleteDialog(){this.deleteDialog.nativeElement.close()}onConfirmDelete(){this.closeDeleteDialog(),this.mediaService.deleteMediaTrailer(this.mediaId()).subscribe(e=>{console.log(e),this.selectedMedia().trailer_exists=!1})}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=q({type:t,selectors:[["app-media-details"]],viewQuery:function(o,a){if(o&1&&V(ci,5),o&2){let s;F(s=I())&&(a.deleteDialog=s.first)}},hostBindings:function(o,a){o&1&&C("keydown",function(f){return a.handleKeyboardEvent(f)},we)},inputs:{mediaId:[1,"mediaId"]},decls:18,vars:4,consts:[["deleteDialog",""],[1,"media-details-container"],[1,"center"],[1,"media-details-card"],[3,"click"],[1,"dialog-content",3,"click"],["tabindex","2",1,"danger",3,"click"],["tabindex","1",1,"secondary",3,"click"],[1,"media-fanart-overlay",3,"style"],[1,"media-poster",3,"title"],[3,"src","alt"],[1,"media-details-col"],[1,"media-details-row"],["title","Trailer Downloaded",1,"icon-link"],["appCopyToClipboard","",1,"text-lg","title-text",3,"textToCopy","title"],[1,"nav-icons"],[1,"icon-link","left",3,"routerLink","title"],[1,"icon-link","right",3,"routerLink","title"],[1,"text-md",3,"title"],["target","_blank","title","IMDB Link",3,"href"],[1,"media-details-row","extras"],[1,"labeled-text",3,"title"],[1,"label"],["appCopyToClipboard","",1,"text-sm",3,"textToCopy"],[1,"labeled-text"],[1,"text-sm","tooltip"],[1,"tooltiptext"],["title","Overview",1,"labeled-text"],[1,"text-sm"],[1,"input-row"],[1,"labeled-input"],[1,"text-md","sm-none"],[1,"text-md","sm-show"],["id","youtube_trailer_id","type","text","placeholder","Youtube Video ID / URL",3,"ngModelChange","ngModel"],["title","Search Trailer",1,"search-button","icon-link"],["title","Searching for Trailer",1,"loading-search","icon-link"],["id","update_trailer_search_query","tabindex","24",1,"primary","icononly-button","save-button","success"],[1,"text-sm","info-text"],["title","Watch Trailer on Youtube",1,"primary"],["title","Download Trailer",1,"primary",3,"disabled"],["title","Delete Trailer",1,"danger"],[1,"media-fanart-overlay"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Trailer Exists",1,"downloaded-icon","success"],["d","M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q65 0 123 19t107 53l-58 59q-38-24-81-37.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160q133 0 226.5-93.5T800-480q0-18-2-36t-6-35l65-65q11 32 17 66t6 70q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm-56-216L254-466l56-56 114 114 400-401 56 56-456 457Z"],["title","Updating Monitor Status",1,"icon-link"],[1,"icon-link",3,"title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"loading"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],[1,"icon-link",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Monitored",1,"monitored-icon"],["d","M713-600 600-713l56-57 57 57 141-142 57 57-198 198ZM200-120v-640q0-33 23.5-56.5T280-840h280q-20 30-30 57.5T520-720q0 72 45.5 127T680-524q23 3 40 3t40-3v404L480-240 200-120Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Not Monitored",1,"not-monitored-icon"],["d","M200-120v-640q0-33 23.5-56.5T280-840h240v80H280v518l200-86 200 86v-278h80v400L480-240 200-120Zm80-640h240-240Zm400 160v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","m287-446.67 240 240L480-160 160-480l320-320 47 46.67-240 240h513v66.66H287Z"],["d","M673-446.67H160v-66.66h513l-240-240L480-800l320 320-320 320-47-46.67 240-240Z"],["src","assets/IMDBlogo.png","alt","IMDB",1,"xdb-icon"],["target","_blank","title","TMDB Link",3,"href"],["target","_blank","title","TVDB Link",3,"href"],["src","assets/TMDBlogo.png","alt","TMDB",1,"xdb-icon"],["src","assets/TVDBlogo.png","alt","TVDB",1,"xdb-icon"],["target","_blank","title","Radarr Movie Link",3,"href"],["target","_blank","title","Sonarr Movie Link",3,"href"],["src","assets/radarr_128.png","alt","Radarr",1,"arr-icon"],["src","assets/sonarr_128.png","alt","TVDB",1,"arr-icon"],["title","Search Trailer",1,"search-button","icon-link",3,"click"],["d","M801-108 537-372q-31 26-72.96 40-41.96 14-86.6 14-114.6 0-192.52-78Q107-474 107-586t78-190q78-78 190-78t190 78q78 78 78 190.15 0 43.85-13.5 84.35Q616-461 588-425l266 264-53 53ZM375.5-391q81.75 0 138.13-56.79Q570-504.58 570-586q0-81.42-56.29-138.21Q457.43-781 375.59-781q-82.67 0-139.13 56.79Q180-667.42 180-586q0 81.42 56.46 138.21Q292.92-391 375.5-391Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 200 200"],["stroke-width","14","r","15","cx","40","cy","65"],["attributeName","cy","calcMode","spline","dur","2","values","65;135;65;","keySplines",".5 0 .5 1;.5 0 .5 1","repeatCount","indefinite","begin","-.4"],["stroke-width","14","r","15","cx","100","cy","65"],["attributeName","cy","calcMode","spline","dur","2","values","65;135;65;","keySplines",".5 0 .5 1;.5 0 .5 1","repeatCount","indefinite","begin","-.2"],["stroke-width","14","r","15","cx","160","cy","65"],["attributeName","cy","calcMode","spline","dur","2","values","65;135;65;","keySplines",".5 0 .5 1;.5 0 .5 1","repeatCount","indefinite","begin","0"],["id","update_trailer_search_query","tabindex","24",1,"primary","icononly-button","save-button","success",3,"click"],["d","M378-246 154-470l43-43 181 181 384-384 43 43-427 427Z"],["title","Watch Trailer on Youtube",1,"primary",3,"click"],["title","Download Trailer",1,"primary",3,"click","disabled"],[1,"loading-icon"],["title","Delete Trailer",1,"danger",3,"click"],[3,"downloads"],[3,"mediaId"]],template:function(o,a){if(o&1){let s=S();ee(0),i(1,"div",1),m(2,mi,1,0,"app-load-indicator",2),m(3,Zi,78,53,"div",3),n(),m(4,Ri,4,2),i(5,"dialog",4,0),C("click",function(){return _(s),g(a.closeDeleteDialog())}),i(7,"div",5),C("click",function(w){return _(s),g(w.stopPropagation())}),i(8,"h2"),l(9,"Delete Trailer"),n(),i(10,"p"),l(11,"This will Delete the trailer file on disk for this Media"),n(),i(12,"p"),l(13,"Are you sure?"),n(),i(14,"button",6),C("click",function(){return _(s),g(a.onConfirmDelete())}),l(15,"Delete"),n(),i(16,"button",7),C("click",function(){return _(s),g(a.closeDeleteDialog())}),l(17,"Cancel"),n()()()}if(o&2){let s=U(a.selectedMedia());r(2),p(a.isLoading()?2:-1),r(),p(s?3:-1),r(),p(s?4:-1)}},dependencies:[He,je,We,A,j,$,G,Y,ae,ze,ke],styles:[".media-details-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto;margin:1rem;border:1px solid var(--color-outline);border-radius:10px;position:relative}@media(width<768px){.media-details-container[_ngcontent-%COMP%]{margin:.5rem}}.text-center[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);margin:auto}.media-details-card[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-columns:1fr 3fr;padding:2rem;gap:2rem}.media-fanart-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:0;height:100%;background-size:cover;background-position:center;opacity:.4;border-radius:10px}.media-poster[_ngcontent-%COMP%]{z-index:2;display:flex;width:100%}.media-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:300px;height:auto;object-fit:contain;margin-bottom:auto;view-transition-class:mediaimage}.media-details-col[_ngcontent-%COMP%]{z-index:2;flex:1;display:flex;flex-direction:column}.media-details-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:.3rem;gap:.75rem}.media-details-row[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{font-size:2.5rem;display:inline-block;overflow:hidden;max-width:70%;view-transition-class:mediatitle}.icon-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-decoration:none;transition:all .4s;cursor:pointer}.icon-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;fill:var(--color-primary)}.nav-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem;margin-left:auto;margin-right:1rem;align-items:flex-start}.nav-icons[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{background-color:var(--color-primary);fill:var(--color-on-primary);width:40px;height:40px;border-radius:50%}@media(width<765px){.nav-icons[_ngcontent-%COMP%]{position:relative}.nav-icons[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{position:fixed;bottom:10vh;z-index:10;left:2rem}.nav-icons[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{position:fixed;bottom:10vh;z-index:10;right:2rem}}.icon-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{fill:var(--color-success)}.xdb-icon[_ngcontent-%COMP%]{width:60px;cursor:pointer;border-radius:4px}.arr-icon[_ngcontent-%COMP%]{height:30px;width:30px;cursor:pointer}.extras[_ngcontent-%COMP%]{flex-wrap:wrap}.labeled-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.labeled-text[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;opacity:.7;margin-bottom:.1rem}.labeled-input[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap!important;align-items:stretch;width:100%;border:1px solid var(--color-outline);border-radius:6px}.labeled-input[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;align-items:center;padding:.75rem;font-size:1rem;font-weight:400;color:var(--color-on-surface-variant);text-align:center;white-space:nowrap;background-color:var(--color-surface-container-high);border-right:1px solid var(--color-outline);border-top-left-radius:6px;border-bottom-left-radius:6px}.labeled-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1 1 auto;width:1%;min-width:100px;display:block;padding:.75rem;font-size:1rem;font-weight:400;color:var(--color-on-surface);border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--color-surface-container);border-top-right-radius:6px;border-bottom-right-radius:6px}.input-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem}.loading-search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:var(--color-primary);stroke:var(--color-primary)}.save-button[_ngcontent-%COMP%]{height:40px;width:40px}.info-text[_ngcontent-%COMP%]{margin:.5rem;padding:.5rem;border-radius:.5rem;background-color:var(--color-info);color:var(--color-info-text);text-align:center}.loading-icon[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center}.loading-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}.loading[_ngcontent-%COMP%]{animation:spin-animation 2s linear infinite}.dialog-content[_ngcontent-%COMP%]{background-color:var(--color-on-error-container);color:var(--color-on-error);padding:1rem;text-align:center}dialog[_ngcontent-%COMP%]::backdrop{background-image:linear-gradient(0deg,gray,#690005)}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}@media(max-width:765px){.media-details-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0;padding-top:2rem;gap:1rem}.media-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:30vh;margin:0 auto}.media-details-col[_ngcontent-%COMP%]{align-items:center;margin:1rem;margin-top:0}.media-details-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:.3rem;gap:.75rem}.media-details-row[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{max-width:90%}}"]})}}return t})();var $n=[{path:"",loadComponent:()=>Ke}];export{$n as default};
