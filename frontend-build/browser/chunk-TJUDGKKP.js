import{D as h,E as w,V as p,ba as u,ea as M,g as f,ga as S,j as g,m as v,mb as D,r as b,t as m,x as y,y as k}from"./chunk-2I2MBWCP.js";function E(t){return typeof t<"u"&&t!==null}function P(t){return t!=null&&`${t}`!="false"}function O(t){let r=new Date(t);if(!Number.isNaN(r.valueOf()))return r;let e=String(t).match(/\d+/g);if(e===null||e.length<=2)return r;{let[i,s,...n]=e.map(N=>parseInt(N,10));return new Date(Date.UTC(i,s-1,...n))}}var d=60,l=d*60,o=l*24,C=o*7,x=o*30,I=o*365,A=(()=>{class t{constructor(){this.changes=new f}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=h({token:t,factory:t.\u0275fac})}}return t})(),z=function(t){let r=Date.now(),e=Math.round(Math.abs(r-t)/1e3),i=t<r?"ago":"from now",[s,n]=e<d?[Math.round(e),"second"]:e<l?[Math.round(e/d),"minute"]:e<o?[Math.round(e/l),"hour"]:e<C?[Math.round(e/o),"day"]:e<x?[Math.round(e/C),"week"]:e<I?[Math.round(e/x),"month"]:[Math.round(e/I),"year"];return{value:s,unit:n,suffix:i}},c=class{},j=(()=>{class t extends c{format(e){let{suffix:i,value:s,unit:n}=z(e);return this.parse(s,n,i)}parse(e,i,s){return e!==1&&(i+="s"),e+" "+i+" "+s}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=p(t)))(s||t)}})()}static{this.\u0275prov=h({token:t,factory:t.\u0275fac})}}return t})();var a=class{},F=(()=>{class t extends a{tick(e){return v(0).pipe(y(()=>{let i=Date.now(),s=Math.round(Math.abs(i-e)/1e3),n=s<d?1e3:s<l?1e3*d:s<o?1e3*l:0;return n?b(n):g()}),k(1))}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=p(t)))(s||t)}})()}static{this.\u0275prov=h({token:t,factory:t.\u0275fac})}}return t})();var Y=(()=>{class t{constructor(e,i,s,n){this.clock=n,this.live=!0,this.stateChanges=new f,e&&(this.intlSubscription=e.changes.subscribe(()=>this.stateChanges.next())),this.stateChanges.subscribe(()=>{this.value=s.format(this.date),i.markForCheck()})}transform(e,...i){let s=O(e).valueOf(),n;if(n=E(i[0])?P(i[0]):this.live,this.date===s&&this.live===n)return this.value;if(this.date=s,this.live=n,this.date)this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=void 0),this.clockSubscription=this.clock.tick(this.date).pipe(m(()=>this.live,this)).subscribe(()=>this.stateChanges.next()),this.stateChanges.next();else throw new SyntaxError(`Wrong parameter in TimeagoPipe. Expected a valid date, received: ${e}`);return this.value}ngOnDestroy(){this.intlSubscription&&(this.intlSubscription.unsubscribe(),this.intlSubscription=void 0),this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=void 0),this.stateChanges.complete()}static{this.\u0275fac=function(i){return new(i||t)(u(A,24),u(D,16),u(c,16),u(a,16))}}static{this.\u0275pipe=S({name:"timeago",type:t,pure:!1,standalone:!1})}static{this.\u0275prov=h({token:t,factory:t.\u0275fac})}}return t})(),K=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[e.clock||{provide:a,useClass:F},e.intl||[],e.formatter||{provide:c,useClass:j}]}}static forChild(e={}){return{ngModule:t,providers:[e.clock||{provide:a,useClass:F},e.intl||[],e.formatter||{provide:c,useClass:j}]}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=M({type:t})}static{this.\u0275inj=w({})}}return t})();export{Y as a,K as b};
