import{a as Qe}from"./chunk-2MIH2ULT.js";import{a as Xt,b as We}from"./chunk-JN4JAMN5.js";import{a as Ze}from"./chunk-TYJZUAG5.js";import{B as Ft,c as Nt,d as pe,e as me,f as qt,l as Ne,m as ue,n as X,o as qe,t as re,v as Re,x as we,y as Fe,z as Rt}from"./chunk-FI53EPCD.js";import{a as Jt}from"./chunk-S5S5JI4K.js";import{A as Gt,C as Zt,D as Qt,E as Wt,F as Ht,J as Bt,K as Ge,L as jt,M as $t,N as U,O as zt,S as et,U as Se,f as Dt,g as It,j as De,l as Lt,m as Ie,q as F,r as D,s as A,t as Ae,u as At,w as W,x as Ue,z as Ut}from"./chunk-DD4PNHA2.js";import{a as Yt,b as Kt}from"./chunk-IPHAWIJV.js";import{a as G}from"./chunk-BYZGI35U.js";import{$ as Te,$b as Ot,Ab as xt,Bb as v,Bc as Xe,Cc as ae,Db as wt,E as ht,Eb as St,Fa as Ct,Fb as yt,G as ze,Gb as H,Hb as le,Ib as Pt,Ja as d,Jb as O,Lb as Et,Mb as a,Nb as C,Ob as R,Pb as Ke,Qa as $,Qb as I,Rb as L,Sb as N,Ta as M,Tb as se,U as ft,Ub as de,Vb as te,W as vt,Wb as Mt,Xb as Tt,Ya as z,Zb as ie,a as Ee,ac as Y,b as Me,bc as ne,cc as Vt,dc as ke,ea as E,gb as bt,hb as b,hc as B,ib as x,ic as oe,jb as Ve,ka as u,kb as Q,la as g,lb as V,lc as K,ma as y,mb as k,mc as w,na as T,nb as f,nc as j,ob as e,oc as ce,pb as n,pc as kt,qb as h,r as $e,rb as ee,sb as J,ta as P,ub as Je,va as Oe,vb as S,wb as Ye,zb as m,zc as Le}from"./chunk-D2M2EQWU.js";var ge=(()=>{let s=class s{constructor(){this.http=E(Le),this.settingsUrl=ae.apiUrl+ae.settings,this.filesUrl=ae.apiUrl+ae.files,this.settingsResource=Xe(()=>this.settingsUrl),this.filesPath=P(""),this.filesResource=Xe(()=>({url:this.filesUrl+"files_simple",params:{path:this.filesPath()}}),{defaultValue:[]})}getServerStats(){var t=this.settingsUrl+"stats";return this.http.get(t)}updateSetting(t,o){let i=this.settingsUrl+"update";typeof o=="string"&&o===""&&(o=" ");let c={key:t,value:o};return this.http.put(i,c).pipe(ze(p=>{let _="";return p.error instanceof ErrorEvent?_=`Error: ${p.error.message}`:_=`Error: ${p.status} ${p.error.detail}`,$e(_)}))}updatePassword(t,o,i){let c=this.settingsUrl+"updatelogin",p={current_password:t,new_username:o,new_password:i};return this.http.put(c,p).pipe(ze(_=>{let Z="";return _.error instanceof ErrorEvent?Z=`Error: ${_.error.message}`:Z=`Error: ${_.status} ${_.error.detail}`,$e(Z)}))}};s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=Te({token:s,factory:s.\u0275fac,providedIn:"root"});let r=s;return r})();var ci=["passwordUpdateDialog"],ei=r=>({$implicit:r});function pi(r,s){r&1&&Je(0)}function mi(r,s){r&1&&Je(0)}function ui(r,s){if(r&1&&(e(0,"p",32),a(1),n()),r&2){let l=v(2);d(),C(l.updateError)}}function gi(r,s){if(r&1&&(e(0,"p",33),a(1),n()),r&2){let l=v(2);d(),C(l.updateSuccess)}}function _i(r,s){r&1&&h(0,"div",36)}function hi(r,s){if(r&1){let l=S();e(0,"form",20),m("click",function(o){return u(l),g(o.stopPropagation())}),e(1,"h2"),a(2,"Update Login Credentials"),n(),e(3,"div",21)(4,"div",22),h(5,"input",23,2),e(7,"label",24),a(8,"Current Username"),n()(),e(9,"div",22)(10,"input",25,3),N("ngModelChange",function(o){u(l);let i=v();return L(i.currentPassword,o)||(i.currentPassword=o),g(o)}),n(),e(12,"label",26),a(13,"Current Password"),n(),e(14,"i",18),m("click",function(){u(l);let o=v();return g(o.currentPasswordVisible=!o.currentPasswordVisible)}),z(15,pi,1,0,"ng-container",27),n()(),e(16,"h3"),a(17,"New Login"),n(),e(18,"div",22)(19,"input",28,4),N("ngModelChange",function(o){u(l);let i=v();return L(i.newUsername,o)||(i.newUsername=o),g(o)}),n(),e(21,"label",29),a(22,"New Username"),n()(),e(23,"div",22)(24,"input",30,5),N("ngModelChange",function(o){u(l);let i=v();return L(i.newPassword,o)||(i.newPassword=o),g(o)}),n(),e(26,"label",31),a(27,"New Password "),n(),e(28,"i",18),m("click",function(){u(l);let o=v();return g(o.newPasswordVisible=!o.newPasswordVisible)}),z(29,mi,1,0,"ng-container",27),n()(),e(30,"span"),a(31,"For updating only username/password, leave the other blank"),n()(),b(32,ui,2,1,"p",32),b(33,gi,2,1,"p",33),e(34,"button",34),m("click",function(){u(l);let o=v();return g(o.onConfirmUpdate())}),a(35,"Update"),n(),e(36,"button",35),m("click",function(){u(l);let o=v();return g(o.closePwUpdateDialog())}),a(37,"Cancel"),n(),b(38,_i,1,0,"div",36),n()}if(r&2){let l=v(),t=Pt(115),o=te(0);d(5),f("value",o==null?null:o.webui_username),d(5),f("type",l.currentPasswordVisible?"text":"password"),I("ngModel",l.currentPassword),d(5),f("ngTemplateOutlet",t)("ngTemplateOutletContext",ie(14,ei,l.currentPasswordVisible)),d(4),I("ngModel",l.newUsername),d(5),f("type",l.newPasswordVisible?"text":"password"),I("ngModel",l.newPassword),d(5),f("ngTemplateOutlet",t)("ngTemplateOutletContext",ie(16,ei,l.newPasswordVisible)),d(3),x(l.updateError?32:-1),d(),x(l.updateSuccess?33:-1),d(),f("disabled",l.getSubmitButtonState()),d(4),x(l.updateSuccess?38:-1)}}function fi(r,s){r&1&&(y(),e(0,"svg",37),h(1,"path",38),n())}function vi(r,s){r&1&&(y(),e(0,"svg",37),h(1,"path",39),n())}function Ci(r,s){if(r&1&&b(0,fi,2,0,":svg:svg",37)(1,vi,2,0,":svg:svg",37),r&2){let l=s.$implicit;x(l?0:1)}}var ti=(()=>{let s=class s{constructor(){this.settingsService=E(ge),this.settingsSignal=this.settingsService.settingsResource.value,this.currentPassword="",this.newUsername="",this.newPassword="",this.updateError="",this.updateSuccess="",this.currentPasswordVisible=!1,this.newPasswordVisible=!1,this.dialogOpen=!1}ngOnInit(){this.settingsService.getServerStats().subscribe(t=>this.serverStats=t)}clearPwUpdateFields(){this.currentPassword="",this.newPassword="",this.updateError="",this.updateSuccess=""}togglePasswordVisibility(t){t.type=t.type==="password"?"text":"password"}getSubmitButtonState(){if(!this.currentPassword)return!0;let t=!1;return this.newUsername.length>0&&(t=!0),this.newPassword.length>4&&(t=!0),!t}showPwUpdateDialog(){this.clearPwUpdateFields(),this.dialogOpen=!0,this.passwordUpdateDialog.nativeElement.showModal()}closePwUpdateDialog(){this.clearPwUpdateFields(),this.passwordUpdateDialog.nativeElement.close(),this.dialogOpen=!1}onConfirmUpdate(){console.log("Updating password"),this.updateError="",this.updateSuccess="",this.settingsService.updatePassword(this.currentPassword,this.newUsername,this.newPassword).subscribe(t=>{console.log(t),t.includes("Error")?this.updateError=t:(this.updateSuccess=t,setTimeout(()=>{this.closePwUpdateDialog()},3e3))})}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=M({type:s,selectors:[["app-about"]],viewQuery:function(o,i){if(o&1&&wt(ci,5),o&2){let c;St(c=yt())&&(i.passwordUpdateDialog=c.first)}},decls:116,vars:23,consts:[["passwordUpdateDialog",""],["passwordVisibilityIcon",""],["currentUsernameInput",""],["currentPasswordInput",""],["newUsernameInput",""],["newPasswordInput",""],[1,"about-container"],[1,"about-section"],[1,"about-content"],["href","https://hub.docker.com/r/nandyalu/trailarr","target","_blank",1,"update-available"],["href","https://pypi.org/project/yt-dlp/","target","_blank",1,"update-available"],["appCopyToClipboard","",3,"textToCopy"],[1,"update-login",3,"click"],["href","https://nandyalu.github.io/trailarr","target","_blank"],["href","https://discord.gg/KKPr5kQEzQ","target","_blank"],["href","https://github.com/nandyalu/trailarr","target","_blank"],["href","https://github.com/nandyalu/trailarr/issues","target","_blank"],["href","https://www.reddit.com/r/trailarr","target","_blank"],[3,"click"],[1,"dialog-content"],[1,"dialog-content",3,"click"],[1,"text-input"],[1,"password-input"],["id","trailarr_current_username","name","Current Username","type","text","autocomplete","current-username","disabled","true",3,"value"],["for","trailarr_current_username"],["id","trailarr_current_password","name","Current Password","autocomplete","current-password","required","","tabindex","1",3,"ngModelChange","type","ngModel"],["for","trailarr_current_password"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","trailarr_new_username","name","New Username","type","text","autocomplete","username","required","","tabindex","1",3,"ngModelChange","ngModel"],["for","trailarr_new_username"],["id","trailer_new_password","name","New Password","autocomplete","new-password","required","","minlength","5","tabindex","1",3,"ngModelChange","type","ngModel"],["for","trailer_new_password"],[1,"update-error"],[1,"update-success"],["tabindex","1","type","submit",1,"primary",3,"click","disabled"],["type","reset","tabindex","2",1,"secondary",3,"click"],[1,"close-progress"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","fill","#e8eaed"],["d","M480.12-330q70.88 0 120.38-49.62t49.5-120.5q0-70.88-49.62-120.38T479.88-670Q409-670 359.5-620.38T310-499.88q0 70.88 49.62 120.38t120.5 49.5Zm-.36-58q-46.76 0-79.26-32.74-32.5-32.73-32.5-79.5 0-46.76 32.74-79.26 32.73-32.5 79.5-32.5 46.76 0 79.26 32.74 32.5 32.73 32.5 79.5 0 46.76-32.74 79.26-32.73 32.5-79.5 32.5Zm.24 188q-146 0-264-83T40-500q58-134 176-217t264-83q146 0 264 83t176 217q-58 134-176 217t-264 83Zm0-300Zm-.17 240Q601-260 702.5-325.5 804-391 857-500q-53-109-154.33-174.5Q601.34-740 480.17-740T257.5-674.5Q156-609 102-500q54 109 155.33 174.5Q358.66-260 479.83-260Z"],["d","m629-419-44-44q26-71-27-118t-115-24l-44-44q17-11 38-16t43-5q71 0 120.5 49.5T650-500q0 22-5.5 43.5T629-419Zm129 129-40-40q49-36 85.5-80.5T857-500q-50-111-150-175.5T490-740q-42 0-86 8t-69 19l-46-47q35-16 89.5-28T485-800q143 0 261.5 81.5T920-500q-26 64-67 117t-95 93Zm58 226L648-229q-35 14-79 21.5t-89 7.5q-146 0-265-81.5T40-500q20-52 55.5-101.5T182-696L56-822l42-43 757 757-39 44ZM223-654q-37 27-71.5 71T102-500q51 111 153.5 175.5T488-260q33 0 65-4t48-12l-64-64q-11 5-27 7.5t-30 2.5q-70 0-120-49t-50-121q0-15 2.5-30t7.5-27l-97-97Zm305 142Zm-116 58Z"]],template:function(o,i){if(o&1){let c=S();se(0),e(1,"div",6)(2,"section",7)(3,"h1"),a(4,"About Trailarr"),n(),h(5,"hr"),e(6,"div",8)(7,"span"),a(8,"Version"),n(),e(9,"code"),a(10),n(),e(11,"a",9),a(12),n()(),e(13,"div",8)(14,"span"),a(15,"Yt-dlp Version"),n(),e(16,"code"),a(17),n(),e(18,"a",10),a(19),n()(),e(20,"div",8)(21,"span"),a(22,"API Key"),n(),e(23,"code",11),a(24),n()(),e(25,"div",8)(26,"span"),a(27,"Appdata Folder"),n(),e(28,"code"),a(29),n()(),e(30,"div",8)(31,"span"),a(32,"Server Started"),n(),e(33,"code"),a(34),Y(35,"timeago"),n()(),e(36,"div",8)(37,"span"),a(38,"Timezone"),n(),e(39,"code"),a(40),n()()(),e(41,"section",7)(42,"h1"),a(43,"Statistics"),n(),h(44,"hr"),e(45,"div",8)(46,"span"),a(47,"Movies"),n(),e(48,"code"),a(49),n()(),e(50,"div",8)(51,"span"),a(52,"Movies Monitored"),n(),e(53,"code"),a(54),n()(),e(55,"div",8)(56,"span"),a(57,"Series"),n(),e(58,"code"),a(59),n()(),e(60,"div",8)(61,"span"),a(62,"Series Monitored"),n(),e(63,"code"),a(64),n()(),e(65,"div",8)(66,"span"),a(67,"Trailers Downloaded"),n(),e(68,"code"),a(69),n()(),e(70,"div",8)(71,"span"),a(72,"Trailers Detected"),n(),e(73,"code"),a(74),n()()(),e(75,"section",7)(76,"h1"),a(77,"Login Credentials"),n(),h(78,"hr"),e(79,"div",8)(80,"button",12),m("click",function(){return u(c),g(i.showPwUpdateDialog())}),a(81,"Update Login"),n()()(),e(82,"section",7)(83,"h1"),a(84,"Getting Support"),n(),h(85,"hr"),e(86,"div",8)(87,"span"),a(88,"Documentation"),n(),e(89,"a",13),a(90,"https://nandyalu.github.io/trailarr"),n()(),e(91,"div",8)(92,"span"),a(93,"Discord"),n(),e(94,"a",14),a(95,"https://discord.gg/KKPr5kQEzQ"),n()(),e(96,"div",8)(97,"span"),a(98,"Github"),n(),e(99,"a",15),a(100,"https://github.com/nandyalu/trailarr"),n()(),e(101,"div",8)(102,"span"),a(103,"Issues"),n(),e(104,"a",16),a(105,"https://github.com/nandyalu/trailarr/issues"),n()(),e(106,"div",8)(107,"span"),a(108,"Reddit"),n(),e(109,"a",17),a(110,"https://www.reddit.com/r/trailarr"),n()()()(),e(111,"dialog",18,0),m("click",function(){return u(c),g(i.closePwUpdateDialog())}),b(113,hi,39,18,"form",19),n(),z(114,Ci,2,1,"ng-template",null,1,ke)}if(o&2){let c=de(i.settingsSignal());d(10),C(c==null?null:c.version),d(),O("latest",!(c!=null&&c.update_available)),d(),C(c!=null&&c.update_available?"Update Available":"Latest"),d(5),C(c==null?null:c.ytdlp_version),d(),O("latest",!(c!=null&&c.update_available_ytdlp)),d(),C(c!=null&&c.update_available_ytdlp?"Update Available":"Latest"),d(4),f("textToCopy",(c==null?null:c.api_key)||""),d(),C((c==null?null:c.api_key)||""),d(5),C(c==null?null:c.app_data_dir),d(5),C(c!=null&&c.server_start_time?ne(35,21,c==null?null:c.server_start_time):"Unknown"),d(6),C(c==null?null:c.timezone),d(9),C(i.serverStats==null?null:i.serverStats.movies_count),d(5),C(i.serverStats==null?null:i.serverStats.movies_monitored),d(5),C(i.serverStats==null?null:i.serverStats.series_count),d(5),C(i.serverStats==null?null:i.serverStats.series_monitored),d(5),C(i.serverStats==null?null:i.serverStats.trailers_downloaded),d(5),C(i.serverStats==null?null:i.serverStats.trailers_detected),d(39),x(i.dialogOpen?113:-1)}},dependencies:[Xt,U,Ue,F,A,Ae,Bt,Ge,W,At,Kt,It,Yt],styles:[".about-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.about-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin:1.5rem .5rem;gap:1rem}.about-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .about-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;text-align:left;width:40%}.about-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2){text-decoration:none;text-align:left;margin:0;padding:.25rem}.update-available[_ngcontent-%COMP%]{background-color:var(--color-primary);color:var(--color-on-primary);border-radius:5px;border-radius:1rem;padding:.25rem .5rem;font-style:italic;width:auto!important}.latest[_ngcontent-%COMP%]{background-color:var(--color-tertiary);color:var(--color-on-tertiary)}@media screen and (max-width: 768px){.about-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem}.about-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;font-weight:unset;font-style:italic;font-size:small}}.dialog-content[_ngcontent-%COMP%]{min-width:25vw;padding:1rem;text-align:center}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:1rem}.dialog-content[_ngcontent-%COMP%]   .update-success[_ngcontent-%COMP%]{font-weight:bolder;color:var(--color-success)}.dialog-content[_ngcontent-%COMP%]   .update-error[_ngcontent-%COMP%]{font-weight:bolder;color:var(--color-warning)}.text-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;gap:.5rem;justify-content:space-between;margin:1rem;align-items:center}.password-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin:.25rem;align-items:center;position:relative}.password-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;transform:translateY(-50%);top:50%;left:1rem;font-size:1rem;pointer-events:none;color:var(--color-on-surface);padding:0 .5rem;transition:.5s}.password-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:15rem;height:3rem;padding:.25rem .5rem;font-family:inherit;font-size:1.25rem;background-color:var(--color-surface-container-high);color:var(--color-tertiary);border:1px solid var(--color-outline);border-radius:.5rem}input[_ngcontent-%COMP%]:disabled{background-color:var(--color-surface-container-low);cursor:not-allowed}.password-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .password-input[_ngcontent-%COMP%]   input.ng-touched[_ngcontent-%COMP%] ~ label[_ngcontent-%COMP%], .password-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ label[_ngcontent-%COMP%]{top:0;background:var(--color-surface-container-high);font-size:.8rem}i[_ngcontent-%COMP%]{position:absolute;right:.5rem;font-size:0}svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:var(--color-secondary)}.close-progress[_ngcontent-%COMP%]{width:100%;height:.25rem;background-color:var(--color-success-text);border-radius:.25rem;animation:_ngcontent-%COMP%_closeProgress 3s linear 0s}@keyframes _ngcontent-%COMP%_closeProgress{0%{width:100%}to{width:0%}}"]});let r=s;return r})();var bi=["pathSelectDialog"];function xi(r,s){r&1&&h(0,"app-load-indicator",3)}function wi(r,s){if(r&1){let l=S();e(0,"p",2),m("click",function(){let o=u(l).$implicit,i=v(2);return g(i.setPath(o.path,o.type))}),a(1),n()}if(r&2){let l=s.$implicit,t=v(2);O("selected",l.path===t.path()),d(),C(l.name)}}function Si(r,s){if(r&1&&V(0,wi,2,3,"p",8,Q),r&2){let l=v();k(l.folders())}}function yi(r,s){r&1&&(e(0,"span",6),y(),e(1,"svg",9),h(2,"path",10),n()())}var He=(()=>{let s=class s{constructor(){this.settingsService=E(ge),this.name=w.required(),this.path=ce.required(),this.pathShouldEndWith=w.required(),this.isSubmitted=P(!1),this.isLoading=this.settingsService.filesResource.isLoading,this.folders=this.settingsService.filesResource.value,this.oldPath=P(""),this.onSubmit=K(),this.pathSelectDialog=j.required("pathSelectDialog"),this.showDialog=()=>this.pathSelectDialog().nativeElement.showModal(),this.closeDialog=()=>this.pathSelectDialog().nativeElement.close(),oe(()=>{let t=this.path();t||this.settingsService.filesPath.set("/"),t.endsWith("/")&&this.settingsService.filesPath.set(t)})}ngOnChanges(){this.oldPath.set(this.path())}ngAfterViewInit(){this.showDialog()}setPath(t,o="folder"){!t.endsWith("/")&&o==="folder"&&(t+="/"),this.path.set(t)}goUpOneLevel(){let t=this.path();t.endsWith("/")&&(t=t.slice(0,-1)),t=t.replace(/\/[^\/]*$/,""),this.setPath(t)}resetValue(){this.path.set(this.oldPath())}cancelDialog(){this.path.set(this.oldPath()),this.onSubmit.emit(""),this.closeDialog()}submitValue(){this.isSubmitted.set(!0);let t=this.path();t=t.toString().trim(),this.onSubmit.emit(t),this.oldPath.set(t)}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=M({type:s,selectors:[["app-path-select-dialog"]],viewQuery:function(o,i){o&1&&H(i.pathSelectDialog,bi,5),o&2&&le()},inputs:{name:[1,"name"],path:[1,"path"],pathShouldEndWith:[1,"pathShouldEndWith"]},outputs:{path:"pathChange",onSubmit:"onSubmit"},features:[Oe],decls:18,vars:5,consts:[["pathSelectDialog",""],["type","text","placeholder","Enter path here",3,"ngModelChange","ngModel"],[3,"click"],[1,"center"],[1,"buttons-row"],[3,"click","disabled"],[1,"loading-icon"],[1,"danger",3,"click"],[3,"selected"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"loading"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"]],template:function(o,i){if(o&1){let c=S();e(0,"dialog",null,0)(2,"h2"),a(3),n(),h(4,"hr"),e(5,"input",1),N("ngModelChange",function(_){return u(c),L(i.path,_)||(i.path=_),g(_)}),n(),e(6,"section")(7,"p",2),m("click",function(){return u(c),g(i.goUpOneLevel())}),a(8,"(Up one level)"),n(),b(9,xi,1,0,"app-load-indicator",3)(10,Si,2,0),n(),e(11,"div",4)(12,"button",5),m("click",function(){return u(c),g(i.submitValue())}),e(13,"span"),a(14," Confirm "),n(),b(15,yi,3,0,"span",6),n(),e(16,"button",7),m("click",function(){return u(c),g(i.cancelDialog())}),a(17,"Cancel"),n()()()}o&2&&(d(3),R("Select a Path for '",i.name(),"'"),d(2),I("ngModel",i.path),d(4),x(i.isLoading()?9:10),d(3),f("disabled",!i.path().endsWith(i.pathShouldEndWith())||i.isSubmitted()),d(3),x(i.isSubmitted()?15:-1))},dependencies:[U,F,A,W,G],styles:["dialog[_ngcontent-%COMP%]{padding:1rem;height:65vh;display:flex;flex-direction:column}input[_ngcontent-%COMP%]{padding:.5rem;font-size:1rem;font-weight:700;color:var(--color-tertiary);margin:1rem;border:1px solid var(--color-outline);border-radius:.5rem}section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;width:60vw;overflow:auto;text-align:left;padding:1rem;overscroll-behavior:contain;border:1px solid var(--color-outline);border-radius:.5rem}@media (width < 765px){section[_ngcontent-%COMP%]{width:80vw}}p[_ngcontent-%COMP%]{padding:.5rem;margin:0;cursor:pointer;border-bottom:1px solid var(--color-outline)}p[_ngcontent-%COMP%]:hover{opacity:.8}.selected[_ngcontent-%COMP%], p[_ngcontent-%COMP%]:hover{background-color:var(--color-on-tertiary);color:var(--color-tertiary)}.buttons-row[_ngcontent-%COMP%]{padding:1rem}.loading-icon[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center}.loading-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}.loading[_ngcontent-%COMP%]{animation:spin-animation 2s linear infinite}"]});let r=s;return r})();var Pi=["cancelDialog"],Ei=["deleteConnectionDialog"];function Mi(r,s){r&1&&(e(0,"h2"),a(1,"Create Connection"),n())}function Ti(r,s){if(r&1){let l=S();e(0,"h2"),a(1,"Edit Connection"),n(),e(2,"button",9),m("click",function(){u(l);let o=v();return g(o.showDeleteDialog())}),y(),e(3,"svg",10),h(4,"path",11),n(),T(),e(5,"span",12),a(6,"Delete"),n()()}}function Oi(r,s){r&1&&h(0,"app-load-indicator")}function Vi(r,s){r&1&&(e(0,"p",16),a(1,"Connection Name is required and must be at least 3 characters long!"),n())}function ki(r,s){if(r&1&&(e(0,"label",34),h(1,"input",35),e(2,"span",36),a(3),Y(4,"uppercase"),n()()),r&2){let l=s.$implicit,t=v(2);O("option__selected",l===t.connectionForm.value.arr_type),d(),f("id","arrtype_"+l+"_option")("value",l)("checked",l===t.connectionForm.value.arr_type),d(2),C(ne(4,6,l))}}function Di(r,s){if(r&1&&(e(0,"label",34),h(1,"input",37),e(2,"span",36),a(3),Y(4,"uppercase"),n()()),r&2){let l=s.$implicit,t=v(2);O("option__selected",l===t.connectionForm.value.monitor),d(),f("id","monitorType_"+l+"_option")("value",l)("checked",l===t.connectionForm.value.monitor),d(2),C(ne(4,6,l))}}function Ii(r,s){r&1&&(e(0,"p",16),a(1,"Connection URL is required!"),n())}function Li(r,s){r&1&&(e(0,"p",16),a(1,"API Key is required!"),n())}function Ni(r,s){if(r&1){let l=S();e(0,"div",39)(1,"div",13)(2,"label",40),a(3,"Path From"),n(),h(4,"input",41),n(),e(5,"div",13)(6,"label",42),a(7,"Path To"),n(),e(8,"div",43),h(9,"input",44),e(10,"button",45),m("click",function(){let o,i=u(l),c=i.$implicit,p=i.$index,_=v(3);return g(_.openPathSelectDialog(p,c==null||(o=c.get("path_from"))==null?null:o.value))}),y(),e(11,"svg",10),h(12,"path",46),n()()()(),T(),e(13,"button",47),m("click",function(){let o=u(l).$index,i=v(3);return g(i.removePathMapping(o))}),y(),e(14,"svg",10),h(15,"path",48),n()()()}if(r&2){let l=s.$index;f("formGroupName",l),d(4),f("readOnly",!0)}}function qi(r,s){if(r&1&&(e(0,"h3"),a(1,"Path Mappings"),n(),h(2,"hr"),e(3,"div",38),V(4,Ni,16,2,"div",39,Q),n()),r&2){let l=v(2);d(4),k(l.pathMappings.controls)}}function Ri(r,s){if(r&1&&(e(0,"p",28),a(1),n()),r&2){v();let l=te(30);d(),C(l)}}function Fi(r,s){if(r&1){let l=S();e(0,"button",49),m("click",function(){u(l);let o=v(2);return g(o.onSubmit())}),y(),e(1,"svg",10),h(2,"path",50),n(),T(),e(3,"span",12),a(4,"Submit"),n()()}if(r&2){let l=v(2);f("disabled",l.connectionForm.pristine||l.connectionForm.invalid)}}function Ai(r,s){if(r&1){let l=S();e(0,"button",51),m("click",function(){u(l);let o=v(2);return g(o.onSubmit())}),y(),e(1,"svg",10),h(2,"path",52),n(),T(),e(3,"span",12),a(4,"Test"),n()()}if(r&2){let l=v(2);f("disabled",l.connectionForm.pristine||l.connectionForm.invalid)}}function Ui(r,s){r&1&&h(0,"div",33)}function Gi(r,s){if(r&1){let l=S();e(0,"form",2)(1,"div",13)(2,"label",14),a(3,"Name"),n(),h(4,"input",15),b(5,Vi,2,0,"p",16),n(),e(6,"div",17)(7,"div",18)(8,"legend",19),a(9,"Arr Type:"),n(),e(10,"div",20),V(11,ki,5,8,"label",21,Q),n()(),e(13,"div",18)(14,"legend",22),a(15,"Monitor Type:"),n(),e(16,"div",23),V(17,Di,5,8,"label",21,Q),n()()(),e(19,"div",13)(20,"label",24),a(21,"Server URL"),n(),h(22,"input",25),b(23,Ii,2,0,"p",16),n(),e(24,"div",13)(25,"label",26),a(26,"API Key"),n(),h(27,"input",27),b(28,Li,2,0,"p",16),n(),b(29,qi,6,0),se(30),b(31,Ri,2,1,"p",28),e(32,"div",5),b(33,Fi,5,1,"button",29)(34,Ai,5,1,"button",30),e(35,"button",31),m("click",function(){u(l);let o=v();return g(o.onCancel())}),y(),e(36,"svg",10),h(37,"path",32),n(),T(),e(38,"span",12),a(39,"Cancel"),n()()(),b(40,Ui,1,0,"div",33),n()}if(r&2){let l=v();f("formGroup",l.connectionForm)("id","connectionForm"+l.connectionId());let t=l.connectionForm.get("name");d(5),x(t!=null&&t.invalid&&(t!=null&&t.touched)?5:-1),d(6),k(l.arrOptions),d(6),k(l.monitorOptions);let o=l.connectionForm.get("url");d(6),x(o!=null&&o.invalid&&(o!=null&&o.touched)?23:-1);let i=l.connectionForm.get("api_key");d(5),x(i!=null&&i.invalid&&(i!=null&&i.touched)?28:-1),d(),x(l.arePathMappingsAdded()?29:-1),d();let c=de(l.submitResult());d(),x(c?31:-1),d(2),x(l.isReadyToSubmit()?33:34),d(7),x(c.toLowerCase().includes("ated success")?40:-1)}}var tt=(()=>{let s=class s{constructor(){this.changeDetectorRef=E(kt),this.formBuilder=E($t),this.router=E(pe),this.viewContainerRef=E($),this.connectionService=E(We),this.connectionId=w(0,{transform:t=>{let o=Number(t);return isNaN(o)?-1:o}}),this.arrOptions=[et.Radarr,et.Sonarr],this.monitorOptions=[Se.Missing,Se.New,Se.None,Se.Sync],this.connectionForm=void 0,this.arePathMappingsAdded=P(!1),this.isCreate=P(!1),this.isConnectionTested=P(!1),this.isReadyToSubmit=P(!1),this.isSubmitting=P(!1),this.submitResult=P(""),this.connection=this.connectionService.selectedConnection,this.isLoading=this.connectionService.connectionsResource.isLoading,this.connectionIDeffect=oe(()=>{let t=this.connectionId();if(this.isLoading()){console.log("Connection data is still loading. Waiting for it to complete.");return}if(t==-1)this.isCreate.set(!0);else if(!this.connectionService.connectionExists(t)){console.warn(`Connection with ID '${t}' does not exist. Redirecting to connections list.`),this.router.navigate(["/settings/connections"]);return}this.connectionService.connectionID.set(t)}),this.connectionEffect=oe(()=>{if(this.isSubmitting())return;let t=this.connection();t&&!this.isSubmitting()&&(this.createForm(t),this.isCreate.set(t.id===-1),this.isConnectionTested.set(!1),this.isReadyToSubmit.set(!1),this.arePathMappingsAdded.set(t.path_mappings.length>0),this.submitResult.set(""),this.changeDetectorRef.markForCheck())}),this.cancelDialog=j("cancelDialog"),this.deleteDialog=j("deleteConnectionDialog"),this.closeDeleteDialog=()=>this.deleteDialog()?.nativeElement.close(),this.showDeleteDialog=()=>this.deleteDialog()?.nativeElement.showModal(),this.closeCancelDialog=()=>this.cancelDialog()?.nativeElement.close(),this.showCancelDialog=()=>this.cancelDialog()?.nativeElement.showModal()}formatPathFrom(t){return t.endsWith("/")||t.endsWith("\\")?t:t.includes("/")?t+"/":t.includes("\\")?t+"\\":t}addPathMappings(t){if(!this.connectionForm)return;let o=this.connectionForm.get("path_mappings");if(!o)return;let i=!1,c=0;if(t.forEach(p=>{o.controls.some(Z=>Z.get("path_from")?.value===this.formatPathFrom(p))||(o.push(this.createPathMapping(null,p)),i=!0,c++)}),i){this.arePathMappingsAdded.set(!0),this.changeDetectorRef.markForCheck();let p=`Retrieved ${t.length} root folders.`;p+=`
Added ${c} new root folders to Path Mappings.`,p+=`
Please update and test the connection to submit!`,t.length===1&&(p=p.replace("root folders.","root folder.")),c===1&&(p=p.replace("new root folders","new root folder")),this.submitResult.update(_=>`${_}
${p}`)}else this.isConnectionTested.set(!0),this.arePathMappingsAdded.set(!0),this.isReadyToSubmit.set(!0),this.submitResult.update(p=>{let _=p+`
Retrieved ${t.length} root folders that were already in Path Mappings.
You can now submit the connection.`;return t.length===1&&(_=_.replace("root folders that were ","root folder that was ")),_})}createForm(t){this.connectionForm=this.formBuilder.group({added_at:[t.added_at],api_key:[t.api_key,[D.required,D.pattern("^[a-zA-Z0-9]*$"),D.minLength(32),D.maxLength(50)]],arr_type:[t.arr_type,D.required],id:[t.id>0?t.id:null],monitor:[t.monitor,D.required],name:[t.name,[D.required,D.minLength(3)]],path_mappings:this.createPathMappings(t),url:[t.url,[D.required,D.pattern("https?://.*"),D.minLength(10)]]})}createPathMapping(t=null,o=""){let i=null;t&&t.id&&t.id>0&&(i=t.id);let c=t?t.path_from:o;return c||(c=""),c=this.formatPathFrom(c),this.formBuilder.group({id:[i],connection_id:[t?t.connection_id:null],path_from:[c,D.required],path_to:[t?t.path_to:"",D.required]})}createPathMappings(t){return this.formBuilder.array(t.path_mappings.map(o=>this.createPathMapping(o)))}get pathMappings(){return this.connectionForm.get("path_mappings")}removePathMapping(t){this.pathMappings.removeAt(t),this.connectionForm.markAsTouched(),this.connectionForm.markAsDirty()}openPathSelectDialog(t,o){let i=this.viewContainerRef.createComponent(He);i.setInput("name",o),i.setInput("path",o),i.setInput("pathShouldEndWith","/"),i.instance.onSubmit.subscribe(c=>{c&&this.pathMappings.at(t).get("path_to")?.setValue(c),setTimeout(()=>{i.destroy()},500)})}checkConnectionValidity(){return this.connectionForm.valid?!0:(this.submitResult.set("Form is invalid, please correct the errors and try again."),!1)}onCancel(){this.connectionForm.pristine?this.router.navigate(["/settings/connections"]):this.showCancelDialog()}onConfirmCancel(){this.closeCancelDialog(),this.router.navigate(["/settings/connections"])}onConfirmDelete(){this.closeDeleteDialog(),this.deleteConnection()}onSubmit(){if(this.checkConnectionValidity()){if(!this.isConnectionTested()||!this.isReadyToSubmit()){this.testConnection();return}if(!this.isReadyToSubmit()){this.submitResult.set("Please test the connection before submitting.");return}if(this.isCreate()){this.createConnection();return}this.updateConnection()}}createConnection(){if(!this.checkConnectionValidity()||!this.isReadyToSubmit()||this.isSubmitting())return;this.isSubmitting.set(!0),this.submitResult.set("Creating connection, please wait...");let t=this.connectionForm.value;this.connectionService.addConnection(t).subscribe({next:o=>{this.submitResult.set(o),setTimeout(()=>{this.router.navigate(["/settings/connections"]).then(()=>{this.connectionService.connectionsResource.reload()})},3e3)},error:o=>{console.error("Error creating connection:",o),this.submitResult.set(`Error creating connection: ${o.message||o}. Try again in some time`)}})}deleteConnection(){this.connectionService.connectionExists(this.connectionId())&&this.connectionService.deleteConnection(this.connectionId()).subscribe({next:t=>{this.submitResult.set(`Connection deleted successfully: ${t}`),this.connectionService.connectionsResource.reload(),setTimeout(()=>{this.router.navigate(["/settings/connections"]).then(()=>{this.connectionService.connectionsResource.reload()})},3e3)},error:t=>{console.error("Error deleting connection:",t),this.submitResult.set(`Error deleting connection: ${t.message||t}. Try again in some time`)}})}getRootFolders(){if(!this.checkConnectionValidity()||this.isReadyToSubmit())return;let t=this.connectionForm.value;this.connectionService.getRootFolders(t).subscribe({next:o=>{Array.isArray(o)?(this.arePathMappingsAdded.set(!0),this.addPathMappings(o)):(this.arePathMappingsAdded.set(!1),this.submitResult.update(i=>`${i}
Error getting root folders: ${o}`))},error:o=>{console.error("Error fetching root folders:",o),this.submitResult.update(i=>`${i}
Error fetching root folders: ${o.message||o}. Try again in some time`)}})}testConnection(){if(!this.checkConnectionValidity())return;let t=this.connectionForm.value;this.connectionService.testConnection(t).subscribe({next:o=>{this.submitResult.set(o),o.toLowerCase().includes("success")&&(this.isConnectionTested()?(this.isReadyToSubmit.set(!0),this.submitResult.update(i=>`${i}
Connection tested successfully. You can now submit the connection.`)):(this.isConnectionTested.set(!0),this.getRootFolders()))},error:o=>{console.error("Error testing connection:",o),this.submitResult.set(`Error testing connection: ${o.message||o}. Try again in some time`)}})}updateConnection(){if(!this.checkConnectionValidity()||!this.isReadyToSubmit()||this.isSubmitting())return;this.isSubmitting.set(!0),this.submitResult.set("Updating connection, please wait...");let t=this.connectionForm.value;this.connectionService.updateConnection(this.connectionId(),t).subscribe({next:o=>{this.submitResult.set(o),setTimeout(()=>{this.router.navigate(["/settings/connections"]).then(()=>{this.connectionService.connectionsResource.reload()})},3e3)},error:o=>{console.error("Error updating connection:",o),this.submitResult.set(`Error updating connection: ${o.message||o}. Try again in some time`)}})}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=M({type:s,selectors:[["app-edit-connection2"]],viewQuery:function(o,i){o&1&&(H(i.cancelDialog,Pi,5),H(i.deleteDialog,Ei,5)),o&2&&le(2)},inputs:{connectionId:[1,"connectionId"]},decls:31,vars:2,consts:[["cancelDialog",""],["deleteConnectionDialog",""],[3,"formGroup","id"],[3,"click"],[1,"dialog-content",3,"click"],[1,"buttons-row"],[1,"danger",3,"click"],[1,"primary",3,"click"],[1,"secondary",3,"click"],[1,"icon-button","danger","top-right-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M259.09-114.02q-28.45 0-48.41-19.89-19.96-19.89-19.96-48.24v-565.94h-45.07v-68.13h198.28v-34.3h271.9v34.3h198.52v68.13h-45.07v565.94q0 27.6-20.33 47.86-20.34 20.27-48.04 20.27H259.09Zm441.82-634.07H259.09v565.94h441.82v-565.94ZM363.89-266.24h64.07v-399h-64.07v399Zm168.15 0h64.31v-399h-64.31v399ZM259.09-748.09v565.94-565.94Z"],[1,"text"],[1,"input-group"],["for","name"],["id","name","autocapitalize","words","autocomplete","off","formControlName","name","placeholder","Connection Name","type","text"],[1,"invalid-text"],[1,"d-row"],[1,"option-container"],["id","arrtype_label"],["role","radiogroup","aria-labelledby","arrtype_label",1,"options-bar"],[1,"option-label",3,"option__selected"],["id","monitorType_label"],["role","radiogroup","aria-labelledby","monitorType_label",1,"options-bar"],["for","url"],["id","url","autocomplete","off","formControlName","url","placeholder","Server URL Ex: http://192.168.0.15:6969","type","url"],["for","apiKey"],["id","apiKey","autocomplete","off","formControlName","api_key","placeholder","API Key","type","text"],[1,"result-text"],["id","submit","type","submit",1,"animated-button","primary",3,"disabled"],["id","test","type","test",1,"animated-button","primary",3,"disabled"],["id","cancel","type","button",1,"animated-button","secondary",3,"click"],["d","m247-195-51-52 233-233-233-234 51-52 234 234 232-234 51 52-232 234 232 233-51 52-232-234-234 234Z"],[1,"close-progress"],[1,"option-label"],["type","radio","name","arr_type","formControlName","arr_type",3,"id","value","checked"],[1,"option-name"],["type","radio","name","monitor","formControlName","monitor",3,"id","value","checked"],["formArrayName","path_mappings",1,"mappings-wrapper"],[1,"d-row","mappings",3,"formGroupName"],["for","path_from"],["id","path_from","type","text","formControlName","path_from","placeholder","Arr Internal Path","autocomplete","off",3,"readOnly"],["for","path_to"],[1,"input-wrapper"],["id","path_to","type","text","formControlName","path_to","placeholder","Trailarr Internal Path","autocomplete","off"],["type","button","title","Select Path",1,"tertiary","folder-icon",3,"click"],["d","M137-144q-28.72 0-50.86-22.32T64-217v-526q0-28.36 22.14-50.68T137-816h271l73 73h342q28.36 0 50.68 22.32T896-670v453q0 28.36-22.32 50.68T823-144H137Zm0-73h686v-453H451l-73-73H137v526Zm0 0v-526 526Z"],["id","remove","name","Remove Path Mapping",1,"icononly-button","tertiary",3,"click"],["d","m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"],["id","submit","type","submit",1,"animated-button","primary",3,"click","disabled"],["d","M856-690v513q0 28.73-22.14 50.86Q811.72-104 783-104H177q-28.73 0-50.86-22.14Q104-148.27 104-177v-606q0-28.72 22.14-50.86Q148.27-856 177-856h513l166 166Zm-73 32.22L657.78-783H177v606h606v-480.78ZM479.82-238q46.18 0 78.68-32.32 32.5-32.33 32.5-78.5 0-46.18-32.32-78.68-32.33-32.5-78.5-32.5-46.18 0-78.68 32.32-32.5 32.33-32.5 78.5 0 46.18 32.32 78.68 32.33 32.5 78.5 32.5ZM226-577h374v-157H226v157Zm-49-80.78V-177v-606 125.22Z"],["id","test","type","test",1,"animated-button","primary",3,"click","disabled"],["d","M766-113q-43 0-76-26t-41-63H443q-67.76 0-111.38-43.67Q288-289.34 288-357.17T331.62-469q43.62-44 111.38-44h77q40.17 0 65.59-25.17 25.41-25.17 25.41-65t-25.35-65.33Q560.3-694 520.21-694H312q-10 37-42.5 63T194-605q-50.92 0-85.96-35.06Q73-675.12 73-726.06t35.04-86.44Q143.08-848 194-848q43 0 75.5 26.5t42.91 62.5H520q68.17 0 112.09 43.88 43.91 43.87 43.91 112 0 68.12-43.91 111.62Q588.17-448 520-448h-77q-39.76 0-64.88 25.38Q353-397.25 353-357.12 353-317 378.12-292q25.12 25 64.88 25h206q9.3-35.81 41.65-62.41Q723-356 766-356q51.33 0 86.67 35.26Q888-285.47 888-234.24 888-183 852.67-148q-35.34 35-86.67 35ZM193.68-678q20.32 0 34.82-13.68 14.5-13.69 14.5-34 0-20.32-14.27-34.82T194.14-775q-20.32 0-34.23 14.27Q146-746.46 146-726.14q0 20.32 13.68 34.23 13.69 13.91 34 13.91Z"]],template:function(o,i){if(o&1){let c=S();b(0,Mi,2,0,"h2")(1,Ti,7,0),h(2,"hr"),b(3,Oi,1,0,"app-load-indicator")(4,Gi,41,10,"form",2),e(5,"dialog",3,0),m("click",function(){return u(c),g(i.closeCancelDialog())}),e(7,"div",4),m("click",function(_){return u(c),g(_.stopPropagation())}),e(8,"h2"),a(9,"Unsaved Changes"),n(),e(10,"p"),a(11,"Changes will be lost. Are you sure you want to cancel?"),n(),e(12,"div",5)(13,"button",6),m("click",function(){return u(c),g(i.onConfirmCancel())}),a(14,"Yes"),n(),e(15,"button",7),m("click",function(){return u(c),g(i.closeCancelDialog())}),a(16,"No"),n()()()(),e(17,"dialog",3,1),m("click",function(){return u(c),g(i.closeDeleteDialog())}),e(19,"div",4),m("click",function(_){return u(c),g(_.stopPropagation())}),e(20,"h2"),a(21,"Delete Connection"),n(),e(22,"p"),a(23,"This will Delete the connection and no longer monitor its Media"),n(),e(24,"p"),a(25,"Delete the connection?"),n(),e(26,"div",5)(27,"button",6),m("click",function(){return u(c),g(i.onConfirmDelete())}),a(28,"Delete"),n(),e(29,"button",8),m("click",function(){return u(c),g(i.closeDeleteDialog())}),a(30,"Cancel"),n()()()()}o&2&&(x(i.isCreate()?0:1),d(3),x(i.isLoading()||!i.connectionForm?3:4))},dependencies:[G,zt,Ue,F,Ut,A,Ae,Zt,Ht,Qt,Wt,De],styles:["[_nghost-%COMP%]{width:100%;border:2px solid var(--color-outline);padding:1.5rem;display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-radius:1rem;background-color:var(--color-surface-container);transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.top-right-button[_ngcontent-%COMP%]{position:absolute;top:2rem;right:2rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:0;border:var(--color-outline);border-radius:.5rem;container-type:inline-size}.input-group[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:2px}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin:0 0 0 .5rem;font-size:smaller}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto;height:3rem;padding:.75rem;font-family:inherit;font-size:1rem;letter-spacing:1px;background-color:var(--color-surface-container-high);color:var(--color-tertiary);border:2px solid var(--color-outline);border-radius:.5rem}input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid var(--color-error);opacity:.6;background-color:var(--color-error-container);color:var(--color-on-error-container)}.input-group[_ngcontent-%COMP%]   .invalid-text[_ngcontent-%COMP%]{color:var(--color-error)}.d-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;justify-content:space-around;align-items:center}@container (width < 40rem){.d-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}.option-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}@container (width < 40rem){.option-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}.options-bar[_ngcontent-%COMP%]{padding:.25rem;display:flex;background-color:var(--color-surface-container-high);border-radius:10px;border:.5px solid var(--color-outline)}.option-label[_ngcontent-%COMP%]{padding:10px;cursor:pointer;border-radius:10px;transition:.3s ease;flex:1 1 auto;text-align:center}.option-label[_ngcontent-%COMP%]:has(input:focus-visible){outline:-webkit-focus-ring-color auto 1px}.option-name[_ngcontent-%COMP%]{border-radius:10px;border:none;transition:all .15s ease-in-out}.option__selected[_ngcontent-%COMP%]{background-color:var(--color-tertiary-container);font-weight:600;color:var(--color-on-tertiary-container);transition:.3s ease}input[type=radio][_ngcontent-%COMP%]{clip:rect(0 0 0 0);clip-path:inset(100%);width:1px;height:1px;overflow:hidden;position:absolute;white-space:nowrap}.mappings-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.d-row.mappings[_ngcontent-%COMP%]{align-items:flex-end}input[_ngcontent-%COMP%]:read-only{opacity:.8;cursor:not-allowed}.input-wrapper[_ngcontent-%COMP%]{display:inline-block;width:auto;height:3rem;position:relative}.folder-icon[_ngcontent-%COMP%]{position:absolute;inset:0 0 0 auto;cursor:pointer;height:auto;width:auto;padding:.5rem;border-radius:.5rem;border-top-left-radius:0;border-bottom-left-radius:0}.folder-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:2rem;width:2rem}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;padding:.75rem 3rem .75rem .75rem}.result-text[_ngcontent-%COMP%]{white-space:pre-wrap;color:var(--color-info);font-weight:600;line-height:1.5rem}.close-progress[_ngcontent-%COMP%]{width:100%;height:.25rem;background-color:var(--color-success-text);border-radius:.25rem;animation:_ngcontent-%COMP%_closeProgress 3s linear 0s}@keyframes _ngcontent-%COMP%_closeProgress{0%{width:100%}to{width:0%}}.dialog-content[_ngcontent-%COMP%]{background-color:var(--color-on-error-container);color:var(--color-on-error);padding:1rem;text-align:center}dialog[_ngcontent-%COMP%]::backdrop{background-image:linear-gradient(0deg,gray,#690005)}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0});let r=s;return r})();var Qi=r=>[r],Wi=(r,s,l)=>["/",r,s,l];function Hi(r,s){r&1&&h(0,"app-load-indicator",1)}function Bi(r,s){if(r&1&&(e(0,"p"),a(1),n()),r&2){let l=v(2);Et(Tt("result-",l.resultType())),d(),C(l.resultMessage())}}function ji(r,s){r&1&&h(0,"img",18)}function $i(r,s){r&1&&h(0,"img",19)}function zi(r,s){if(r&1&&(e(0,"div",12),h(1,"a",13),e(2,"h3",14),a(3),n(),e(4,"div",15)(5,"p"),a(6),n(),e(7,"p"),a(8),Y(9,"uppercase"),n(),e(10,"p"),a(11),Y(12,"date"),n()(),e(13,"div",16)(14,"a",17),b(15,ji,1,0,"img",18)(16,$i,1,0,"img",19),n()()()),r&2){let l,t=s.$implicit;d(),f("routerLink",ie(13,Qi,t.id)),d(2),C(t.name),d(3),R("URL: ",t.url),d(2),R("Monitor: ",ne(9,8,t.monitor)),d(3),R("Added: ",Vt(12,10,t.added_at,"mediumDate")),d(3),f("href",Mt(t.url),Ct),d(),x((l=t.arr_type)==="radarr"?15:l==="sonarr"?16:-1)}}function Ji(r,s){if(r&1&&(e(0,"div",11),V(1,zi,17,15,"div",12,Ve),n()),r&2){v(2);let l=te(0);d(),k(l)}}function Yi(r,s){if(r&1&&(e(0,"div",1)(1,"div",20),a(2,"Add New!"),n(),e(3,"p",21),a(4,`I'm all alone here!. Click the "ADD" button to add some Radarr/Sonarr instances to let the magic happen!`),n()()),r&2){let l=v(2);d(),f("routerLink",Ot(1,Wi,l.RouteSettings,l.RouteConnections,l.RouteAdd))}}function Ki(r,s){if(r&1){let l=S();e(0,"div",2)(1,"h2"),a(2,"Connections"),n(),e(3,"i",3),m("click",function(){u(l);let o=v();return g(o.connectionsResource.reload())}),y(),e(4,"svg",4),h(5,"path",5),n()()(),T(),e(6,"button",6),y(),e(7,"svg",7),h(8,"path",8),n(),T(),e(9,"span",9),a(10,"Add New"),n()(),h(11,"hr"),b(12,Bi,2,4,"p",10),b(13,Ji,3,0,"div",11)(14,Yi,5,5,"div",1)}if(r&2){let l=v(),t=te(0);d(3),O("loading",l.connectionsResource.isLoading()),d(3),f("routerLink",l.RouteAdd),d(6),x(l.resultMessage()?12:-1),d(),x(t&&t.length>0?13:14)}}var ii=(()=>{let s=class s{constructor(){this.connectionService=E(We),this.connectionsResource=this.connectionService.connectionsResource,this.isLoading=this.connectionsResource.isLoading,this.resultMessage=P(""),this.resultType=P(""),this.selectedId=0,this.RouteAdd=ue,this.RouteConnections=X,this.RouteEdit=qe,this.RouteSettings=Re}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=M({type:s,selectors:[["app-show-connections"]],decls:4,vars:2,consts:[[1,"sett-conn-container"],[1,"center"],[1,"title-block"],["title","Refresh",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"refresh-icon"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],[1,"animated-button","top-right-button",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"],[1,"text"],[3,"class"],[1,"connection-container"],[1,"connection-card"],[1,"card-link",3,"routerLink"],[1,"title"],[1,"content"],[1,"link-image"],["target","_blank",3,"href"],["src","assets/radarr_128.png"],["src","assets/sonarr_128.png"],[1,"all-empty-card","center",3,"routerLink"],[1,"text-primary"]],template:function(o,i){o&1&&(se(0),e(1,"div",0),b(2,Hi,1,0,"app-load-indicator",1)(3,Ki,15,5),n()),o&2&&(de(i.connectionsResource.value()),d(2),x(i.isLoading()?2:3))},dependencies:[Ie,G,me,De,Lt],styles:[".sett-conn-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;position:relative;gap:12px}.title-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.refresh-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.loading[_ngcontent-%COMP%]{cursor:progress;animation:spin-animation 2s linear infinite}.top-right-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:10px}.center[_ngcontent-%COMP%]{margin:auto}.result-success[_ngcontent-%COMP%]{padding:10px;display:block;border-radius:4px;color:var(--color-success-text);background-color:var(--color-success)}.result-error[_ngcontent-%COMP%]{padding:10px;display:block;border-radius:4px;color:var(--color-error-text);background-color:var(--color-error)}.connection-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:1rem}.connection-card[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr auto;grid-template-columns:1fr auto;gap:10px;max-width:500px;padding:12px;border:2px solid var(--color-outline);border-radius:8px;background-color:var(--color-surface-container);color:var(--color-on-surface);position:relative}@media (max-width: 765px){.connection-card[_ngcontent-%COMP%]{margin:auto;width:100%}}.card-link[_ngcontent-%COMP%]{position:absolute;inset:0}.connection-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{grid-row:1;grid-column:1/span 2;color:var(--color-primary);text-align:center}.connection-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{grid-row:2;grid-column:1}.connection-card[_ngcontent-%COMP%]   .link-image[_ngcontent-%COMP%]{grid-row:2;grid-column:2;width:auto;margin:auto;position:relative;pointer-events:none;z-index:1}.connection-card[_ngcontent-%COMP%]   .link-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem;pointer-events:all}.connection-card[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{grid-row:3;grid-column:1/span 2;display:flex;justify-content:space-between}.dialog-content[_ngcontent-%COMP%]{background-color:var(--color-on-error-container);color:var(--color-on-error);padding:1rem;text-align:center}dialog[_ngcontent-%COMP%]::backdrop{background-image:linear-gradient(0deg,gray,#690005)}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0});let r=s;return r})();function Xi(r,s){if(r&1&&(ee(0,"small"),a(1),J()),r&2){let l=v();d(),C(l.descriptionExtra())}}function en(r,s){if(r&1){let l=S();ee(0,"label",3)(1,"input",4),xt("change",function(){let o=u(l).$implicit,i=v();return g(i.onOptionClick(o))}),J(),ee(2,"span",5),a(3),J()()}if(r&2){let l=s.$implicit,t=v();O("option__selected",l===t.selectedOption()),d(),Ye("id",t.inputId+"_"+l)("name",t.inputId)("value",l)("checked",l===t.selectedOption()),d(2),C(l)}}var Be=(()=>{let s=class s{constructor(){this.inputId="options-setting-"+Math.random().toString(36).substring(2,10),this.name=w.required(),this.description=w(""),this.descriptionExtra=w(""),this.options=w.required(),this.selectedOption=w("",{transform:String}),this.optionChange=K()}onOptionClick(t){this.optionChange.emit(t)}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=M({type:s,selectors:[["app-options-setting"]],inputs:{name:[1,"name"],description:[1,"description"],descriptionExtra:[1,"descriptionExtra"],options:[1,"options"],selectedOption:[1,"selectedOption"]},outputs:{optionChange:"optionChange"},decls:9,vars:5,consts:[[1,"content-label",3,"id"],["role","radiogroup",1,"options-bar"],[1,"option-label",3,"option__selected"],[1,"option-label"],["type","radio",3,"change","id","name","value","checked"],[1,"option-name"]],template:function(o,i){o&1&&(ee(0,"div",0)(1,"span"),a(2),J(),ee(3,"small"),a(4),J(),b(5,Xi,2,1,"small"),J(),ee(6,"div",1),V(7,en,4,7,"label",2,Q),J()),o&2&&(Ye("id",i.inputId+"_label"),d(2),C(i.name()),d(2),C(i.description()),d(),x(i.descriptionExtra()?5:-1),d(),bt("aria-labelledby",i.inputId+"_label"),d(),k(i.options()))},styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:3fr 2fr;justify-items:start;align-items:center;margin:1.5rem .5rem;gap:1rem}@container (width < 40rem){[_nghost-%COMP%]{grid-template-columns:1fr}}.content-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;gap:.5rem;width:100%}label[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-weight:700;text-wrap:nowrap}svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;cursor:pointer}.options-bar[_ngcontent-%COMP%]{padding:.25rem;display:flex;background-color:var(--color-surface-container-high);border-radius:10px;border:.5px solid var(--color-outline)}.option-label[_ngcontent-%COMP%]{padding:10px;cursor:pointer;border-radius:10px;transition:.3s ease;flex:1 1 auto;text-align:center}.option-label[_ngcontent-%COMP%]:has(input:focus-visible){outline:-webkit-focus-ring-color auto 1px}.option-name[_ngcontent-%COMP%]{border-radius:10px;border:none;transition:all .15s ease-in-out}.option__selected[_ngcontent-%COMP%]{background-color:var(--color-tertiary-container);font-weight:600;color:var(--color-on-tertiary-container);transition:.3s ease}input[_ngcontent-%COMP%]{clip:rect(0 0 0 0);clip-path:inset(100%);width:1px;height:1px;overflow:hidden;position:absolute;white-space:nowrap}"],changeDetection:0});let r=s;return r})();function tn(r,s){if(r&1&&(e(0,"small"),a(1),n()),r&2){let l=v();d(),C(l.descriptionExtra())}}function nn(r,s){if(r&1){let l=S();e(0,"button",7),m("click",function(){u(l);let o=v();return g(o.openPathSelectDialog())}),y(),e(1,"svg",8),h(2,"path",9),n()()}}function on(r,s){if(r&1){let l=S();e(0,"button",10),m("click",function(){u(l);let o=v();return g(o.resetValue())}),y(),e(1,"svg",8),h(2,"path",11),n()(),T(),e(3,"button",12),m("click",function(){u(l);let o=v();return g(o.onSubmitValue())}),y(),e(4,"svg",8),h(5,"path",13),n()()}if(r&2){let l=v();f("id",l.inputId+"reset")("title","Reset "+l.name()),d(3),f("id",l.inputId+"update")("title","Update "+l.name())}}var je=(()=>{let s=class s{constructor(){this.inputId="text-setting-"+Math.random().toString(36).substring(2,10),this.viewContainerRef=E($),this.name=w.required(),this.description=w(""),this.descriptionExtra=w(""),this.isNumberType=w.required(),this.isLongInput=w.required(),this.showFolderButton=w(!1),this.pathShouldEndWith=w(""),this.placeholder=w(""),this.value=ce.required(),this.minLength=w(0),this.maxLength=w(150),this.autocomplete=w("off"),this.disabled=w(!1),this.oldValue=P(""),this.onSubmit=K()}ngOnChanges(){this.oldValue.set(this.value())}openPathSelectDialog(){let t=this.viewContainerRef.createComponent(He);t.setInput("name",this.name()),t.setInput("path",this.value()),t.setInput("pathShouldEndWith",this.pathShouldEndWith()),t.instance.onSubmit.subscribe(o=>{o&&(this.value.set(o),this.onSubmitValue()),setTimeout(()=>{t.destroy()},2e3)})}resetValue(){this.value.set(this.oldValue())}onSubmitValue(){let t=this.value();t=t.toString().trim(),this.onSubmit.emit(t),this.oldValue.set(t)}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=M({type:s,selectors:[["app-text-setting"]],inputs:{name:[1,"name"],description:[1,"description"],descriptionExtra:[1,"descriptionExtra"],isNumberType:[1,"isNumberType"],isLongInput:[1,"isLongInput"],showFolderButton:[1,"showFolderButton"],pathShouldEndWith:[1,"pathShouldEndWith"],placeholder:[1,"placeholder"],value:[1,"value"],minLength:[1,"minLength"],maxLength:[1,"maxLength"],autocomplete:[1,"autocomplete"],disabled:[1,"disabled"]},outputs:{value:"valueChange",onSubmit:"onSubmit"},features:[Oe],decls:12,vars:22,consts:[[1,"content"],[1,"content-label"],[3,"for"],[1,"content-input"],[1,"wrapper"],[3,"ngModelChange","id","type","disabled","ngModel","minlength","maxlength","placeholder","autocomplete"],[1,"tertiary","folder-icon"],[1,"tertiary","folder-icon",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M137-144q-28.72 0-50.86-22.32T64-217v-526q0-28.36 22.14-50.68T137-816h271l73 73h342q28.36 0 50.68 22.32T896-670v453q0 28.36-22.32 50.68T823-144H137Zm0-73h686v-453H451l-73-73H137v526Zm0 0v-526 526Z"],[1,"secondary","icononly-button",3,"click","id","title"],["d","M263-179.67v-84h317.67q65 0 110.83-45.5t45.83-110.5q0-64.33-45.83-110.16-45.83-45.84-110.83-45.84H297.33l104 104-58.66 57.34-204-203 204-204 58.66 57.66-104 104H580q99.67 0 170.5 70.17t70.83 169.83q0 100.34-70.83 170.17-70.83 69.83-170.5 69.83H263Z"],[1,"primary","icononly-button",3,"click","id","title"],["d","M378-235 142-471l52-52 184 184 388-388 52 52-440 440Z"]],template:function(o,i){o&1&&(e(0,"div",0)(1,"div",1)(2,"label",2),a(3),n(),e(4,"small"),a(5),n(),b(6,tn,2,1,"small"),n(),e(7,"div",3)(8,"div",4)(9,"input",5),N("ngModelChange",function(p){return L(i.value,p)||(i.value=p),p}),n(),b(10,nn,3,0,"button",6),n(),b(11,on,6,4),n()()),o&2&&(d(2),f("for",i.inputId),d(),C(i.name()),d(2),C(i.description()),d(),x(i.descriptionExtra()?6:-1),d(2),O("wrapper__long",i.isLongInput()),d(),O("input__long",i.isLongInput())("input__folder",i.showFolderButton())("input__disabled",i.disabled()),f("id",i.inputId)("type",i.isNumberType()?"number":"text")("disabled",i.disabled()),I("ngModel",i.value),f("minlength",i.minLength())("maxlength",i.maxLength())("placeholder",i.placeholder())("autocomplete",i.autocomplete()),d(),x(i.showFolderButton()?10:-1),d(),x(i.value()!=i.oldValue()&&!i.disabled()?11:-1))},dependencies:[U,F,A,Ge,jt,W],styles:["[_nghost-%COMP%]{display:contents}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 2fr;justify-items:start;align-items:center;margin:1.5rem .5rem;gap:1rem}@container (width < 40rem){.content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.content-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;gap:.5rem;width:100%}label[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-weight:700;text-wrap:nowrap}svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;cursor:pointer}button[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}@container (width < 40rem){button[_ngcontent-%COMP%]{width:2rem;height:2rem}}.content-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem;width:100%;max-width:100%;overflow:hidden}.wrapper[_ngcontent-%COMP%]{display:inline-block;width:5rem;height:3rem;position:relative}.folder-icon[_ngcontent-%COMP%]{position:absolute;inset:0 0 0 auto;cursor:pointer;height:auto;width:auto;padding:.5rem;border-radius:.5rem;border-top-left-radius:0;border-bottom-left-radius:0}.folder-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:2rem;width:2rem}input[_ngcontent-%COMP%]{width:100%;height:100%;padding:.25rem;text-align:center;font-family:inherit;background-color:var(--color-surface-container-high);color:var(--color-on-surface);border:1px solid var(--color-outline);border-radius:.5rem}.wrapper__long[_ngcontent-%COMP%]{width:auto;flex:1;max-width:calc(100% - 6rem)}@container (width < 40rem){.wrapper__long[_ngcontent-%COMP%]{width:auto;max-width:none}}.input__long[_ngcontent-%COMP%]{field-sizing:content;font-size:larger}.input__folder[_ngcontent-%COMP%]{padding:.25rem 3rem .25rem .25rem}.input__disabled[_ngcontent-%COMP%]{background-color:var(--color-surface-container-low);cursor:not-allowed;text-decoration:line-through 2px var(--color-danger)}"],changeDetection:0});let r=s;return r})();function rn(r,s){r&1&&h(0,"app-load-indicator",0)}function an(r,s){r&1&&(e(0,"div",1)(1,"strong"),a(2,"Warning:"),n(),a(3," Log Level set to 'Debug', this will generate too many logs, change it if not needed! "),n())}function ln(r,s){if(r&1){let l=S();e(0,"app-options-setting",14),m("optionChange",function(o){u(l);let i=v();return g(i.updateSetting("gpu_enabled_nvidia",o))}),n()}if(r&2){let l,t=v();f("options",t.trueFalseOptions)("selectedOption",(l=t.settings())==null?null:l.gpu_enabled_nvidia)}}function sn(r,s){if(r&1){let l=S();e(0,"app-options-setting",15),m("optionChange",function(o){u(l);let i=v();return g(i.updateSetting("gpu_enabled_intel",o))}),n()}if(r&2){let l,t=v();f("options",t.trueFalseOptions)("selectedOption",(l=t.settings())==null?null:l.gpu_enabled_intel)}}function dn(r,s){if(r&1){let l=S();e(0,"app-options-setting",16),m("optionChange",function(o){u(l);let i=v();return g(i.updateSetting("gpu_enabled_amd",o))}),n()}if(r&2){let l,t=v();f("options",t.trueFalseOptions)("selectedOption",(l=t.settings())==null?null:l.gpu_enabled_amd)}}var ni=(()=>{let s=class s{constructor(){this.settingsService=E(ge),this.webSocketService=E(Jt),this.isLoading=this.settingsService.settingsResource.isLoading,this.settings=this.settingsService.settingsResource.value,this.loggingOptions=["Debug","Info","Warning","Error"],this.trueFalseOptions=["true","false"]}toTitleCase(t){return t.split("_").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" ")}updateSetting(t,o){this.settingsService.updateSetting(t,o).subscribe(i=>{let c=i.toLowerCase().includes("error")?"Error":"Success";this.webSocketService.showToast(i,c),this.settingsService.settingsResource.reload()})}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=M({type:s,selectors:[["app-trailer"]],decls:41,vars:30,consts:[[1,"center"],[1,"update-message","error"],["open",""],[1,"setting-group"],["name","Monitor Enabled","description","Monitor media from Radarr/Sonarr to download trailers.",3,"optionChange","options","selectedOption"],["name","Monitor Interval","description","Frequency (in minutes) to get new media data from Radarr/Sonarr.","descriptionExtra","Default is 60. Minuimum is 10. Container restart required to apply new interval.","placeholder","Monitor Interval","autocomplete","off",3,"onSubmit","isNumberType","isLongInput","minLength","maxLength","value","disabled"],["name","Wait for Media","description","Wait for media to be imported into Radarr/Sonarr before downloading trailers.",3,"optionChange","options","selectedOption"],["name","Log Level","description","Set logging level for the app.",3,"optionChange","options","selectedOption"],["name","Yt-dlp Cookies Path","description","Path to yt-dlp cookies file to use for downloading trailers.","pathShouldEndWith",".txt","placeholder","/config/cookies.txt","autocomplete","off",3,"onSubmit","isNumberType","isLongInput","showFolderButton","minLength","maxLength","value"],["name","NVIDIA GPU Acceleration","description","Use NVIDIA GPU for hardware acceleration.",3,"options","selectedOption"],["name","Intel GPU Acceleration","description","Use Intel GPU for hardware acceleration (VAAPI).",3,"options","selectedOption"],["name","AMD GPU Acceleration","description","Use AMD GPU for hardware acceleration (AMF).",3,"options","selectedOption"],["name","Update Yt-dlp","description","Update yt-dlp to latest version during container startup.","descriptionExtra","You need to restart the container to apply updates.",3,"optionChange","options","selectedOption"],["name","URL Base","description","URL Base for use with reverse proxy configuration","descriptionExtra","Restart required to take effect!","placeholder","trailarr","autocomplete","off",3,"onSubmit","isNumberType","isLongInput","minLength","maxLength","value"],["name","NVIDIA GPU Acceleration","description","Use NVIDIA GPU for hardware acceleration.",3,"optionChange","options","selectedOption"],["name","Intel GPU Acceleration","description","Use Intel GPU for hardware acceleration (VAAPI).",3,"optionChange","options","selectedOption"],["name","AMD GPU Acceleration","description","Use AMD GPU for hardware acceleration (AMF).",3,"optionChange","options","selectedOption"]],template:function(o,i){if(o&1&&(e(0,"h2"),a(1,"General Settings"),n(),h(2,"hr"),b(3,rn,1,0,"app-load-indicator",0),b(4,an,4,0,"div",1),e(5,"section")(6,"details",2)(7,"summary"),a(8,"General"),n(),h(9,"hr"),e(10,"div",3)(11,"app-options-setting",4),m("optionChange",function(p){return i.updateSetting("monitor_enabled",p)}),n(),e(12,"app-text-setting",5),m("onSubmit",function(p){return i.updateSetting("monitor_interval",p)}),n()()()(),e(13,"section")(14,"details",2)(15,"summary"),a(16,"Files"),n(),h(17,"hr"),e(18,"div",3)(19,"app-options-setting",6),m("optionChange",function(p){return i.updateSetting("wait_for_media",p)}),n()()()(),e(20,"section")(21,"details",2)(22,"summary"),a(23,"Advanced Options"),n(),h(24,"hr"),e(25,"div",3)(26,"app-options-setting",7),m("optionChange",function(p){return i.updateSetting("log_level",p)}),n(),e(27,"app-text-setting",8),m("onSubmit",function(p){return i.updateSetting("yt_cookies_path",p)}),n()()()(),e(28,"section")(29,"details",2)(30,"summary"),a(31,"Experimental Options"),n(),h(32,"hr"),e(33,"div",3)(34,"p"),a(35,"These are experimental options, might not work as expected!"),n(),b(36,ln,1,2,"app-options-setting",9),b(37,sn,1,2,"app-options-setting",10),b(38,dn,1,2,"app-options-setting",11),e(39,"app-options-setting",12),m("optionChange",function(p){return i.updateSetting("update_ytdlp",p)}),n(),e(40,"app-text-setting",13),m("onSubmit",function(p){return i.updateSetting("url_base",p)}),n()()()()),o&2){let c,p,_,Z,_e,he,fe,ve,Ce,be,xe;d(3),x(i.isLoading()?3:-1),d(),x(((c=i.settings())==null?null:c.log_level)=="DEBUG"?4:-1),d(7),f("options",i.trueFalseOptions)("selectedOption",(p=i.settings())==null?null:p.monitor_enabled),d(),f("isNumberType",!0)("isLongInput",!1)("minLength",1)("maxLength",6)("value",((_=i.settings())==null?null:_.monitor_interval)??60)("disabled",!1),d(7),f("options",i.trueFalseOptions)("selectedOption",(Z=i.settings())==null?null:Z.wait_for_media),d(7),f("options",i.loggingOptions)("selectedOption",i.toTitleCase(((_e=i.settings())==null?null:_e.log_level)??"INFO")),d(),f("isNumberType",!1)("isLongInput",!0)("showFolderButton",!0)("minLength",0)("maxLength",255)("value",((he=i.settings())==null?null:he.yt_cookies_path)??""),d(9),x((fe=i.settings())!=null&&fe.gpu_available_nvidia?36:-1),d(),x((ve=i.settings())!=null&&ve.gpu_available_intel?37:-1),d(),x((Ce=i.settings())!=null&&Ce.gpu_available_amd?38:-1),d(),f("options",i.trueFalseOptions)("selectedOption",(be=i.settings())==null?null:be.update_ytdlp),d(),f("isNumberType",!1)("isLongInput",!0)("minLength",0)("maxLength",255)("value",((xe=i.settings())==null?null:xe.url_base)??"")}},dependencies:[U,G,Be,je],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:12px}.center[_ngcontent-%COMP%]{position:fixed;inset:50vh 50vw;transform:translate(-50%,-50%);align-self:center;justify-self:center;margin:auto}details[_ngcontent-%COMP%]{margin:.5rem 0;border:1px solid var(--color-outline);border-radius:.5rem;background-color:var(--color-surface-container)}summary[_ngcontent-%COMP%]{padding:1rem;font-weight:700;cursor:pointer;color:var(--color-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:calc(100vw - 260px)}@media (width < 1100px){summary[_ngcontent-%COMP%]{max-width:calc(100vw - 100px)}}@media (width < 765px){summary[_ngcontent-%COMP%]{max-width:calc(100vw - 50px)}}.setting-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 .5rem;container-type:inline-size}"],changeDetection:0});let r=s;return r})();function cn(r,s){if(r&1&&(e(0,"small"),a(1),n()),r&2){let l=v();d(),C(l.descriptionExtra())}}function pn(r,s){if(r&1){let l=S();e(0,"button",5),m("click",function(){u(l);let o=v();return g(o.resetValue())}),y(),e(1,"svg",6),h(2,"path",7),n()(),T(),e(3,"button",8),m("click",function(){u(l);let o=v();return g(o.onSubmitValue())}),y(),e(4,"svg",6),h(5,"path",9),n()()}if(r&2){let l=v();f("id",l.inputId+"reset")("title","Reset "+l.name()),d(3),f("id",l.inputId+"update")("title","Update "+l.name())}}var oi=(()=>{let s=class s{constructor(){this.inputId="range-setting-"+Math.random().toString(36).substring(2,10),this.name=w.required(),this.description=w(""),this.descriptionExtra=w(""),this.value=ce.required(),this.minValue=w(0),this.maxValue=w(150),this.stepValue=w(5),this.disabled=w(!1),this.oldValue=P(""),this.onSubmit=K()}ngOnInit(){this.oldValue.set(this.value())}resetValue(){this.value.set(this.oldValue())}onSubmitValue(){let t=this.value();t=t.toString().trim(),this.onSubmit.emit(t),this.oldValue.set(t)}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=M({type:s,selectors:[["app-range-setting"]],inputs:{name:[1,"name"],description:[1,"description"],descriptionExtra:[1,"descriptionExtra"],value:[1,"value"],minValue:[1,"minValue"],maxValue:[1,"maxValue"],stepValue:[1,"stepValue"],disabled:[1,"disabled"]},outputs:{value:"valueChange",onSubmit:"onSubmit"},decls:11,vars:14,consts:[[1,"content-label"],[3,"for"],[1,"content-input"],["type","range",3,"ngModelChange","id","disabled","ngModel","min","max","step"],[1,"content-input__value"],[1,"secondary","icononly-button",3,"click","id","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M263-179.67v-84h317.67q65 0 110.83-45.5t45.83-110.5q0-64.33-45.83-110.16-45.83-45.84-110.83-45.84H297.33l104 104-58.66 57.34-204-203 204-204 58.66 57.66-104 104H580q99.67 0 170.5 70.17t70.83 169.83q0 100.34-70.83 170.17-70.83 69.83-170.5 69.83H263Z"],[1,"primary","icononly-button",3,"click","id","title"],["d","M378-235 142-471l52-52 184 184 388-388 52 52-440 440Z"]],template:function(o,i){o&1&&(e(0,"div",0)(1,"label",1),a(2),n(),e(3,"small"),a(4),n(),b(5,cn,2,1,"small"),n(),e(6,"div",2)(7,"input",3),N("ngModelChange",function(p){return L(i.value,p)||(i.value=p),p}),n(),e(8,"span",4),a(9),n(),b(10,pn,6,4),n()),o&2&&(d(),f("for",i.inputId),d(),C(i.name()),d(2),C(i.description()),d(),x(i.descriptionExtra()?5:-1),d(2),O("input__disabled",i.disabled()),f("id",i.inputId)("disabled",i.disabled()),I("ngModel",i.value),f("min",i.minValue())("max",i.maxValue())("step",i.stepValue()),d(2),C(i.value()),d(),x(i.value()!=i.oldValue()&&!i.disabled()?10:-1))},dependencies:[U,F,Gt,A,W],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:3fr 2fr;justify-items:start;align-items:center;margin:1.5rem .5rem;gap:1rem}@container (width < 40rem){[_nghost-%COMP%]{grid-template-columns:1fr}}.content-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;gap:.5rem;width:100%}label[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-weight:700;text-wrap:nowrap}svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;cursor:pointer}button[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}@container (width < 40rem){button[_ngcontent-%COMP%]{width:2rem;height:2rem}}.content-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem;width:100%;max-width:100%;overflow:hidden}input[_ngcontent-%COMP%]{width:15vw;max-width:25rem;height:3rem;padding:.25rem;text-align:center;font-family:inherit;background-color:var(--color-surface-container-high);color:var(--color-on-surface);border:1px solid var(--color-outline);border-radius:.5rem}@container (width < 40rem){input[_ngcontent-%COMP%]{flex:1;width:auto;max-width:50vw;height:2rem}}.content-input__value[_ngcontent-%COMP%]{text-align:center;align-self:center;width:3ch}.input__disabled[_ngcontent-%COMP%]{background-color:var(--color-surface-container-low);cursor:not-allowed;text-decoration:line-through 2px var(--color-danger)}"],changeDetection:0});let r=s;return r})();var mn=["deleteProfileDialog"],un=["copyProfileDialog"],gn=["jsonEditDialog"];function _n(r,s){r&1&&h(0,"app-load-indicator",5)}function hn(r,s){if(r&1&&(e(0,"tr")(1,"td"),a(2),n(),e(3,"td"),a(4),n(),e(5,"td"),a(6),n()()),r&2){let l=s.$implicit;d(2),C(l.filter_by),d(2),C(l.filter_condition),d(2),C(l.filter_value)}}function fn(r,s){if(r&1&&(e(0,"table",38)(1,"thead")(2,"tr")(3,"th"),a(4,"Column"),n(),e(5,"th"),a(6,"Condition"),n(),e(7,"th"),a(8,"Value"),n()()(),e(9,"tbody"),V(10,hn,7,3,"tr",null,Q),n()()),r&2){let l,t=v();d(10),k((l=t.profile())==null||l.customfilter==null?null:l.customfilter.filters)}}function vn(r,s){r&1&&(e(0,"p"),a(1,"No filters defined for this profile."),n())}function Cn(r,s){r&1&&z(0,vn,2,0,"ng-template",null,4,ke)}var ri=(()=>{let s=class s{constructor(){this.profileService=E(Ze),this.router=E(pe),this.viewContainerRef=E($),this.profileId=w(0,{transform:t=>{let o=Number(t);return isNaN(o)?0:o}}),this.profile=this.profileService.selectedProfile,this.newProfileName=P(""),this.profileJSON=P("{}"),this.minLimitMax=B(()=>{let t=this.profile();return t&&t.max_duration?t.max_duration-60:540}),this.maxLimitMin=B(()=>{let t=this.profile();return t&&t.min_duration?t.min_duration+60:90}),this.trueFalseOptions=["true","false"],this.fileFormatOptions=["mkv","mp4","webm"],this.audioFormatOptions=["aac","ac3","eac3","flac","opus","copy"],this.videoFormatOptions=["h264","h265","vp8","vp9","av1","copy"],this.videoResolutionOptions=["360","480","720","1080","1440","2160"],this.subtitleFormatOptions=["srt","vtt"],this.isLoading=!1,this.emptyCustomFilter={id:null,filter_name:"",filter_type:"TRAILER",filters:[]},this.customFilter=B(()=>{let t=this.profile();return t&&t.customfilter?t.customfilter:this.emptyCustomFilter}),this.setProfileIDeffect=oe(()=>{let t=this.profileId();if(this.profileService.allProfiles.isLoading()){console.log("Profile data is still loading. Waiting for it to complete.");return}if(!this.profileService.profileExists(t)){console.warn(`Profile with ID '${t}' does not exist. Redirecting to profiles list.`),this.router.navigate(["/settings/profiles"]);return}this.profileService.selectedProfileId.set(t),t<=0&&this.openFilterDialog()}),this.deleteDialog=j.required("deleteProfileDialog"),this.copyProfileDialog=j.required("copyProfileDialog"),this.jsonEditDialog=j.required("jsonEditDialog"),this.closeDeleteDialog=()=>this.deleteDialog().nativeElement.close(),this.showDeleteDialog=()=>this.deleteDialog().nativeElement.showModal(),this.closeCopyProfileDialog=()=>this.copyProfileDialog().nativeElement.close(),this.showCopyProfileDialog=()=>{let t=this.profile().customfilter.filter_name+" - Copy";this.newProfileName.set(t),this.copyProfileDialog().nativeElement.showModal()},this.closeJsonEditDialog=()=>this.jsonEditDialog().nativeElement.close(),this.showJsonEditDialog=()=>{this.profileJSON.set(JSON.stringify(this.profile(),null,2)),this.jsonEditDialog().nativeElement.showModal()}}openFilterDialog(){let t=this.viewContainerRef.createComponent(Qe);t.setInput("customFilter",this.customFilter()),t.setInput("filterType","TRAILER"),t.instance.dialogClosed.subscribe(o=>{o!==-1&&this.profileService.allProfiles.reload(),setTimeout(()=>{t.destroy()},3e3)})}onConfirmCopy(){let t=Me(Ee({},this.profile()),{id:null,customfilter:Me(Ee({},this.customFilter()),{filters:this.customFilter().filters.map(o=>Me(Ee({},o),{id:null})),filter_name:this.newProfileName(),id:null})});console.log("Profile copied:",t),this.profileService.createProfile(t).subscribe(o=>{o?(this.closeCopyProfileDialog(),this.router.navigate(["/settings/profiles",o])):console.error("Failed to create new profile. Please try again.")})}onJsonEditSave(){try{let t=JSON.parse(this.profileJSON());console.log("Profile updated:",t),this.profileService.updateProfile(t).subscribe(o=>{o&&this.closeJsonEditDialog()})}catch(t){console.error("Invalid JSON format:",t)}}onConfirmDelete(){this.closeDeleteDialog(),this.profileService.deleteProfile(this.profileId()),this.router.navigate(["/settings/profiles"])}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=M({type:s,selectors:[["app-edit-profile"]],viewQuery:function(o,i){o&1&&(H(i.deleteDialog,mn,5),H(i.copyProfileDialog,un,5),H(i.jsonEditDialog,gn,5)),o&2&&le(3)},inputs:{profileId:[1,"profileId"]},decls:143,vars:106,consts:[["deleteProfileDialog",""],["copyProfileDialog",""],["jsonEditDialog",""],["jsonEditor",""],["noFilters",""],[1,"center"],[1,"title-block"],["title","Edit Profile Name",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"edit-icon"],["d","M177-177h44l462-460.6-44-44.4-462 460.6v44.4Zm-73 73v-146l590-590q8-7 18-11t21.5-4q10.5 0 20 3.5T772-841l69 69q8 9 11.5 19t3.5 20q0 11-4 21.5t-10.67 17.17L250-104H104Zm672-630-41-41 41 41Zm-114 74-23-22 44 44-21-22Z"],[1,"icon-button","danger","top-right-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M259.09-114.02q-28.45 0-48.41-19.89-19.96-19.89-19.96-48.24v-565.94h-45.07v-68.13h198.28v-34.3h271.9v34.3h198.52v68.13h-45.07v565.94q0 27.6-20.33 47.86-20.34 20.27-48.04 20.27H259.09Zm441.82-634.07H259.09v565.94h441.82v-565.94ZM363.89-266.24h64.07v-399h-64.07v399Zm168.15 0h64.31v-399h-64.31v399ZM259.09-748.09v565.94-565.94Z"],[1,"text"],["open",""],[1,"setting-group"],["name","Profile Enabled","description","Enable or disable this profile",3,"optionChange","options","selectedOption"],["name","Priority","description","Priority level for this profile. Default is 0. Minimum is 0. Maximum is 1000.","descriptionExtra","When multiple profiles match, the one with the highest priority will be used.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","File Format","description","Final file format(extension) of the trailer file.",3,"optionChange","options","selectedOption"],["name","File Name","description","File name to use for downloaded trailers.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Folder Enabled","description","Save trailer file in a seperate folder inside Media folder.",3,"optionChange","options","selectedOption"],["name","Folder Name","description","Name of the folder to save trailer file.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Embed Metadata","description","Embed info from YouTube video in the trailer file.",3,"optionChange","options","selectedOption"],["name","Remove Silence","description","Detect and remove silence (3s+, 30dB) from the end of the trailer file.",3,"optionChange","options","selectedOption"],["name","Audio Format","description","Final audio format(codec) of the trailer file.",3,"optionChange","options","selectedOption"],["name","Audio Volume Level","description","Volume level of the audio in the trailer file. Value less than 100 will reduce the loudness and viceversa!","descriptionExtra","Default is 100 (Full Volume). Minimum is 1. Maximum is 200.",3,"onSubmit","minValue","maxValue","stepValue","value","disabled"],["name","Video Format","description","Final video format(codec) of the trailer file.",3,"optionChange","options","selectedOption"],["name","Video Resolution","description","Resolution of the trailer video file.",3,"optionChange","options","selectedOption"],["name","Subtitles Enabled","description","Enable or disable subtitle download for this profile.",3,"optionChange","options","selectedOption"],["name","Subtitles Format","description","Final subtitle format of the trailer file.",3,"optionChange","options","selectedOption"],["name","Subtitles Language","description","Language of the subtitle to download. Use 2-letter ISO language code.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Search Query","description","Query to use when searching for trailers on YouTube.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Min Duration","description","Minimum video duration (in seconds) to consider while searching.","descriptionExtra","Default is 30. Minimum is 30. Should be atmost `Maximum Duration - 60`.",3,"onSubmit","minValue","maxValue","value","disabled"],["name","Max Duration","description","Maximum video duration (in seconds) to consider while searching.","descriptionExtra","Default is 600. Maximum is 600. Should be atleast `Minimum Duration + 60`.",3,"onSubmit","minValue","maxValue","value","disabled"],["name","Always Search","description","Enable this to always search for trailers, ignoring the youtube id received from Radarr.",3,"optionChange","options","selectedOption"],["name","Include Words in Title","description","Download a video only if certain words exist in video title. Comma-separated list.","descriptionExtra","Eg: 'trailer, official'",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Exclude Words in Title","description","Exclude downloading a video if certain words exist in video title. Comma-separated list.","descriptionExtra","Eg: 'teaser, behind the scenes, review, comment'",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Yt-dlp Extra Options","description","Additional options to pass to yt-dlp when downloading trailers.","descriptionExtra","Advanced use cases only. Use with caution!",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],[1,"filter-details"],[1,"primary","filters-button",3,"click"],[1,"buttons-row"],[1,"icon-button","secondary",3,"click"],["d","M524-407v-117H407v-73h117v-116h73v116h116v73H597v117h-73ZM137-64q-28.72 0-50.86-22.14T64-137v-512q0-28.72 22.14-50.86T137-722h106v-101q0-28.72 22.14-50.86Q287.27-896 316-896h507q28.72 0 50.86 22.14T896-823v507q0 28.73-22.14 50.86Q851.72-243 823-243H722v106q0 28.72-22.14 50.86T649-64H137Zm179-252h507v-507H316v507Z"],["d","M590-144v-73h97q24 0 40.5-15.88Q744-248.75 744-273v-91q0-40 23.5-71.5T830-479v-7q-39-7-62.5-38.5T744-596v-91q0-24.25-16.37-40.63Q711.25-744 687-744h-97v-72h108q49 0 83.5 34.58Q816-746.83 816-697v91q0 24.25 15.88 40.12Q847.75-550 871-550h25v139h-25q-23.25 0-39.12 16.37Q816-378.25 816-354v91q0 49.83-34.58 84.42Q746.83-144 698-144H590Zm-327 0q-50 0-84.5-34.58Q144-213.17 144-263v-91q0-24.25-16.37-40.63Q111.25-411 87-411H64v-139h23q24.25 0 40.63-15.88Q144-581.75 144-606v-91q0-49.83 34.58-84.42Q213.17-816 263-816h108v72h-98q-24 0-40 16.37-16 16.38-16 40.63v91q0 40-24 71.5T131-486v7q38 12 62 43.5t24 71.5v91q0 24.25 15.88 40.12Q248.75-217 273-217h98v73H263Z"],[1,"error",3,"click"],[1,"dialog-content",3,"click"],[1,"danger",3,"click"],[1,"secondary",3,"click"],[3,"click"],[1,"input-wrapper"],["for","new-profile-name"],["type","text","id","new-profile-name","placeholder","New Profile Name",1,"new-profile-name",3,"ngModelChange","ngModel"],[1,"primary",3,"click","disabled"],["for","profile-json"],["id","profile-json",1,"json-editor",3,"ngModelChange","ngModel"]],template:function(o,i){if(o&1){let c=S();b(0,_n,1,0,"app-load-indicator",5),e(1,"div",6)(2,"h2"),a(3),n(),e(4,"i",7),m("click",function(){return u(c),g(i.openFilterDialog())}),y(),e(5,"svg",8),h(6,"path",9),n()()(),T(),e(7,"button",10),m("click",function(){return u(c),g(i.showDeleteDialog())}),y(),e(8,"svg",11),h(9,"path",12),n(),T(),e(10,"span",13),a(11,"Delete"),n()(),h(12,"hr"),e(13,"section")(14,"details",14)(15,"summary"),a(16,"General"),n(),h(17,"hr"),e(18,"div",15)(19,"app-options-setting",16),m("optionChange",function(_){return u(c),g(i.profileService.updateSetting("enabled",_))}),n(),e(20,"app-text-setting",17),m("onSubmit",function(_){return u(c),g(i.profileService.updateSetting("priority",_))}),n()()()(),e(21,"section")(22,"details",14)(23,"summary"),a(24,"File"),n(),h(25,"hr"),e(26,"div",15)(27,"app-options-setting",18),m("optionChange",function(_){return u(c),g(i.profileService.updateSetting("file_format",_))}),n(),e(28,"app-text-setting",19),m("onSubmit",function(_){return u(c),g(i.profileService.updateSetting("file_name",_))}),n(),e(29,"app-options-setting",20),m("optionChange",function(_){return u(c),g(i.profileService.updateSetting("folder_enabled",_))}),n(),e(30,"app-text-setting",21),m("onSubmit",function(_){return u(c),g(i.profileService.updateSetting("folder_name",_))}),n(),e(31,"app-options-setting",22),m("optionChange",function(_){return u(c),g(i.profileService.updateSetting("embed_metadata",_))}),n(),e(32,"app-options-setting",23),m("optionChange",function(_){return u(c),g(i.profileService.updateSetting("remove_silence",_))}),n()()()(),e(33,"section")(34,"details",14)(35,"summary"),a(36,"Audio"),n(),h(37,"hr"),e(38,"div",15)(39,"app-options-setting",24),m("optionChange",function(_){return u(c),g(i.profileService.updateSetting("audio_format",_))}),n(),e(40,"app-range-setting",25),m("onSubmit",function(_){return u(c),g(i.profileService.updateSetting("audio_volume_level",_))}),n()()()(),e(41,"section")(42,"details",14)(43,"summary"),a(44,"Video"),n(),h(45,"hr"),e(46,"div",15)(47,"app-options-setting",26),m("optionChange",function(_){return u(c),g(i.profileService.updateSetting("video_format",_))}),n(),e(48,"app-options-setting",27),m("optionChange",function(_){return u(c),g(i.profileService.updateSetting("video_resolution",_))}),n()()()(),e(49,"section")(50,"details",14)(51,"summary"),a(52,"Subtitle"),n(),h(53,"hr"),e(54,"div",15)(55,"app-options-setting",28),m("optionChange",function(_){return u(c),g(i.profileService.updateSetting("subtitles_enabled",_))}),n(),e(56,"app-options-setting",29),m("optionChange",function(_){return u(c),g(i.profileService.updateSetting("subtitles_format",_))}),n(),e(57,"app-text-setting",30),m("onSubmit",function(_){return u(c),g(i.profileService.updateSetting("subtitles_language",_))}),n()()()(),e(58,"section")(59,"details",14)(60,"summary"),a(61,"Search"),n(),h(62,"hr"),e(63,"div",15)(64,"app-text-setting",31),m("onSubmit",function(_){return u(c),g(i.profileService.updateSetting("search_query",_))}),n(),e(65,"app-range-setting",32),m("onSubmit",function(_){return u(c),g(i.profileService.updateSetting("min_duration",_))}),n(),e(66,"app-range-setting",33),m("onSubmit",function(_){return u(c),g(i.profileService.updateSetting("max_duration",_))}),n(),e(67,"app-options-setting",34),m("optionChange",function(_){return u(c),g(i.profileService.updateSetting("always_search",_))}),n(),e(68,"app-text-setting",35),m("onSubmit",function(_){return u(c),g(i.profileService.updateSetting("include_words",_))}),n(),e(69,"app-text-setting",36),m("onSubmit",function(_){return u(c),g(i.profileService.updateSetting("exclude_words",_))}),n(),e(70,"app-text-setting",37),m("onSubmit",function(_){return u(c),g(i.profileService.updateSetting("ytdlp_extra_options",_))}),n()()()(),e(71,"section")(72,"details",14)(73,"summary"),a(74,"Filters"),n(),h(75,"hr"),e(76,"div",15)(77,"p"),a(78,"Filters are conditions that media must meet. This profile is used only when all conditions match."),n(),e(79,"small"),a(80,"Think of filters as rules; if a movie or show matches all the rules, this profile will be used."),n(),b(81,fn,12,0,"table",38)(82,Cn,2,0),e(83,"button",39),m("click",function(){return u(c),g(i.openFilterDialog())}),a(84,"Add/Edit Filters"),n()()()(),e(85,"div",40)(86,"button",41),m("click",function(){return u(c),g(i.showCopyProfileDialog())}),y(),e(87,"svg",11),h(88,"path",42),n(),T(),e(89,"span",13),a(90,"Duplicate Profile"),n()(),e(91,"button",41),m("click",function(){return u(c),g(i.showJsonEditDialog())}),y(),e(92,"svg",11),h(93,"path",43),n(),T(),e(94,"span",13),a(95,"Advanced Editor"),n()()(),e(96,"dialog",44,0),m("click",function(){return u(c),g(i.closeDeleteDialog())}),e(98,"div",45),m("click",function(_){return u(c),g(_.stopPropagation())}),e(99,"h2"),a(100,"Delete Profile"),n(),e(101,"p"),a(102,"This will Delete the profile and no longer use it for downloads"),n(),e(103,"p"),a(104,"Delete the profile?"),n(),e(105,"div",40)(106,"button",46),m("click",function(){return u(c),g(i.onConfirmDelete())}),a(107,"Delete"),n(),e(108,"button",47),m("click",function(){return u(c),g(i.closeDeleteDialog())}),a(109,"Cancel"),n()()()(),e(110,"dialog",48,1),m("click",function(){return u(c),g(i.closeCopyProfileDialog())}),e(112,"div",45),m("click",function(_){return u(c),g(_.stopPropagation())}),e(113,"h2"),a(114,"Duplicate Profile"),n(),e(115,"p"),a(116,"This will create a copy of the current profile."),n(),e(117,"div",49)(118,"label",50),a(119,"New Profile Name"),n(),e(120,"input",51),N("ngModelChange",function(_){return u(c),L(i.newProfileName,_)||(i.newProfileName=_),g(_)}),n()(),e(121,"div",40)(122,"button",52),m("click",function(){return u(c),g(i.onConfirmCopy())}),a(123,"Duplicate"),n(),e(124,"button",47),m("click",function(){return u(c),g(i.closeCopyProfileDialog())}),a(125,"Cancel"),n()()()(),e(126,"dialog",48,2),m("click",function(){return u(c),g(i.closeJsonEditDialog())}),e(128,"div",45),m("click",function(_){return u(c),g(_.stopPropagation())}),e(129,"h2"),a(130,"Edit Profile JSON"),n(),e(131,"p"),a(132,"This will allow you to edit the profile JSON directly."),n(),e(133,"div",49)(134,"label",53),a(135,"Profile JSON"),n(),e(136,"textarea",54,3),N("ngModelChange",function(_){return u(c),L(i.profileJSON,_)||(i.profileJSON=_),g(_)}),n()(),e(138,"div",40)(139,"button",52),m("click",function(){return u(c),g(i.onJsonEditSave())}),a(140,"Save"),n(),e(141,"button",47),m("click",function(){return u(c),g(i.closeJsonEditDialog())}),a(142,"Cancel"),n()()()()}if(o&2){let c,p,_,Z,_e,he,fe,ve,Ce,be,xe,it,nt,ot,rt,at,lt,st,dt,ct,pt,mt,ut,gt,_t,Pe;x(i.profileService.allProfiles.isLoading()?0:-1),d(3),R("Profile: ",(c=i.profile())==null||c.customfilter==null?null:c.customfilter.filter_name),d(16),f("options",i.trueFalseOptions)("selectedOption",(p=i.profile())==null?null:p.enabled),d(),f("isNumberType",!0)("isLongInput",!1)("placeholder","Priority")("autocomplete","off")("minLength",1)("maxLength",3)("value",((_=i.profile())==null?null:_.priority)??0)("disabled",!1),d(7),f("options",i.fileFormatOptions)("selectedOption",(Z=i.profile())==null?null:Z.file_format),d(),f("isNumberType",!1)("isLongInput",!0)("placeholder","File Name")("autocomplete","off")("minLength",1)("maxLength",150)("value",((_e=i.profile())==null?null:_e.file_name)??"")("disabled",!1),d(),f("options",i.trueFalseOptions)("selectedOption",(he=i.profile())==null?null:he.folder_enabled),d(),f("isNumberType",!1)("isLongInput",!0)("placeholder","Folder Name")("autocomplete","off")("minLength",1)("maxLength",50)("value",((fe=i.profile())==null?null:fe.folder_name)??"")("disabled",!((ve=i.profile())!=null&&ve.folder_enabled)),d(),f("options",i.trueFalseOptions)("selectedOption",(Ce=i.profile())==null?null:Ce.embed_metadata),d(),f("options",i.trueFalseOptions)("selectedOption",(be=i.profile())==null?null:be.remove_silence),d(7),f("options",i.audioFormatOptions)("selectedOption",(xe=i.profile())==null?null:xe.audio_format),d(),f("minValue",1)("maxValue",200)("stepValue",1)("value",((it=i.profile())==null?null:it.audio_volume_level)??100)("disabled",!1),d(7),f("options",i.videoFormatOptions)("selectedOption",(nt=i.profile())==null?null:nt.video_format),d(),f("options",i.videoResolutionOptions)("selectedOption",(ot=i.profile())==null?null:ot.video_resolution),d(7),f("options",i.trueFalseOptions)("selectedOption",(rt=i.profile())==null?null:rt.subtitles_enabled),d(),f("options",i.subtitleFormatOptions)("selectedOption",(at=i.profile())==null?null:at.subtitles_format),d(),f("isNumberType",!1)("isLongInput",!1)("placeholder","Subtitles Language")("autocomplete","off")("minLength",2)("maxLength",20)("value",((lt=i.profile())==null?null:lt.subtitles_language)??"en")("disabled",!((st=i.profile())!=null&&st.subtitles_enabled)),d(7),f("isNumberType",!1)("isLongInput",!0)("placeholder","Search Query")("autocomplete","off")("minLength",10)("maxLength",150)("value",((dt=i.profile())==null?null:dt.search_query)??"")("disabled",!1),d(),f("minValue",30)("maxValue",i.minLimitMax())("value",((ct=i.profile())==null?null:ct.min_duration)??30)("disabled",!1),d(),f("minValue",i.maxLimitMin())("maxValue",600)("value",((pt=i.profile())==null?null:pt.max_duration)??600)("disabled",!1),d(),f("options",i.trueFalseOptions)("selectedOption",(mt=i.profile())==null?null:mt.always_search),d(),f("isNumberType",!1)("isLongInput",!0)("placeholder","Include Words")("autocomplete","off")("minLength",0)("maxLength",200)("value",((ut=i.profile())==null?null:ut.include_words)??"")("disabled",!1),d(),f("isNumberType",!1)("isLongInput",!0)("placeholder","Exclude Words List")("autocomplete","off")("minLength",0)("maxLength",200)("value",((gt=i.profile())==null?null:gt.exclude_words)??"")("disabled",!1),d(),f("isNumberType",!1)("isLongInput",!0)("placeholder","Yt-dlp Extra Options")("autocomplete","off")("minLength",0)("maxLength",500)("value",((_t=i.profile())==null?null:_t.ytdlp_extra_options)??"")("disabled",!1),d(11),x(!((Pe=i.profile())==null||Pe.customfilter==null||Pe.customfilter.filters==null)&&Pe.customfilter.filters.length?81:82),d(39),I("ngModel",i.newProfileName),d(2),f("disabled",!i.newProfileName()),d(14),I("ngModel",i.profileJSON),d(3),f("disabled",!i.profileJSON())}},dependencies:[U,F,A,W,G,Be,oi,je],styles:["[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column}.center[_ngcontent-%COMP%]{position:fixed;top:50vh;left:50%;transform:translate(-50%,-50%)}.title-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;max-width:calc(100% - 7rem);color:var(--color-primary)}.edit-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.top-right-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:10px}details[_ngcontent-%COMP%]{margin:.5rem 0;border:1px solid var(--color-outline);border-radius:.5rem;background-color:var(--color-surface-container)}summary[_ngcontent-%COMP%]{padding:1rem;font-weight:700;cursor:pointer;color:var(--color-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:calc(100vw - 260px)}@media (width < 1100px){summary[_ngcontent-%COMP%]{max-width:calc(100vw - 100px)}}@media (width < 765px){summary[_ngcontent-%COMP%]{max-width:calc(100vw - 50px)}}.setting-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 .5rem;container-type:inline-size}table[_ngcontent-%COMP%]{text-align:center;margin:1.5rem auto 1rem;padding:1rem;width:clamp(300px,50vw,800px);border-collapse:collapse;border:2px solid var(--color-outline);font-family:sans-serif;font-size:.8rem;letter-spacing:1px}thead[_ngcontent-%COMP%], tfoot[_ngcontent-%COMP%]{background-color:var(--color-secondary-container)}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid var(--color-outline);padding:8px 10px}td[_ngcontent-%COMP%]:last-of-type{text-align:center}tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(2n){background-color:var(--color-surface-container-high)}.filters-button[_ngcontent-%COMP%]{width:auto;margin:1rem auto}.dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem;text-align:center}.input-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem}.input-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:0;left:1rem;transform:translateY(-50%);transform-origin:left top;transition:all .2s ease-in-out;color:var(--color-secondary);background:var(--color-surface-container-highest);padding:0 .25rem;font-size:small;pointer-events:none}.new-profile-name[_ngcontent-%COMP%]{height:3rem;min-width:25vw;width:100%;border:1px solid var(--color-outline);border-radius:.5rem;padding:.25rem;font-size:large;color:var(--color-tertiary)}.json-editor[_ngcontent-%COMP%]{max-width:85vw;min-width:50vw;min-height:40vh;max-height:75vh;width:100%;padding:1rem;border:1px solid var(--color-outline);border-radius:.5rem;color:var(--color-tertiary);overscroll-behavior:contain}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0});let r=s;return r})();var bn=r=>[r];function xn(r,s){r&1&&h(0,"app-load-indicator",8)}function wn(r,s){if(r&1&&(e(0,"p"),a(1),n()),r&2){let l=v().$implicit;d(),Ke("Subtitle: ",l.subtitles_language," | ",l.subtitles_format)}}function Sn(r,s){r&1&&(e(0,"p"),a(1,"Subtitles: No"),n())}function yn(r,s){r&1&&(y(),e(0,"svg",14),h(1,"path",16),n())}function Pn(r,s){r&1&&(y(),e(0,"svg",15),h(1,"path",17),n())}function En(r,s){if(r&1&&(e(0,"a",10)(1,"h3",11),a(2),n(),e(3,"div",12)(4,"p"),a(5),n(),e(6,"p"),a(7),n(),b(8,wn,2,2,"p")(9,Sn,2,0,"p"),n(),e(10,"div",13),b(11,yn,2,0,":svg:svg",14)(12,Pn,2,0,":svg:svg",15),n()()),r&2){let l=s.$implicit;f("routerLink",ie(7,bn,l.id)),d(2),C(l.customfilter.filter_name),d(3),Ke("Video: ",l.video_resolution,"p | ",l.video_format),d(2),R("Audio: ",l.audio_format),d(),x(l.subtitles_enabled?8:9),d(3),x(l.enabled?11:12)}}function Mn(r,s){if(r&1&&(e(0,"div",9),V(1,En,13,9,"a",10,Ve),n()),r&2){let l=v(2);d(),k(l.profileService.allProfiles.value())}}function Tn(r,s){r&1&&(e(0,"div",8)(1,"p"),a(2,"No profiles found."),n()())}function On(r,s){if(r&1&&b(0,Mn,3,0,"div",9)(1,Tn,3,0,"div",8),r&2){let l=v();x(l.profileService.allProfiles.value()&&l.profileService.allProfiles.value().length>0?0:1)}}var ai=(()=>{let s=class s{constructor(){this.profileService=E(Ze),this.router=E(pe),this.viewContainerRef=E($),this.isLoading=P(!0),this.RouteAdd=ue,this.RouteProfiles=re,this.RouteEdit=qe,this.RouteSettings=Re}openFilterDialog(){let t=this.viewContainerRef.createComponent(Qe);t.setInput("customFilter",null),t.setInput("filterType","TRAILER"),t.instance.dialogClosed.subscribe(o=>{o>=0&&(this.profileService.allProfiles.reload(),this.router.navigate(["/settings/profiles",o])),setTimeout(()=>{t.destroy()},3e3)})}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=M({type:s,selectors:[["app-show-profiles"]],decls:14,vars:3,consts:[[1,"title-block"],["title","Refresh",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"refresh-icon"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],[1,"animated-button","top-right-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"],[1,"text"],[1,"center"],[1,"profile-container"],[1,"profile-card",3,"routerLink"],[1,"profile-card-title"],[1,"profile-card-content"],[1,"profile-card-checkbox"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","title","Profile Enabled",1,"profile-card-icon","success"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","title","Profile Disabled",1,"profile-card-icon","danger"],["d","m421-288 294-294-55-54-239 239-121-121-54 54 175 176Zm58.54 224q-85.18 0-161.02-33.02t-132.16-89.34q-56.32-56.32-89.34-132.29T64-480q0-86.27 33.08-162.15 33.08-75.88 89.68-132.47 56.61-56.59 132.22-88.99Q394.59-896 479.56-896q86.33 0 162.51 32.39 76.18 32.4 132.56 89Q831-718 863.5-641.96q32.5 76.04 32.5 162.5 0 85.46-32.39 160.8-32.4 75.34-88.99 131.92Q718.03-130.16 642-97.08 565.98-64 479.54-64Zm.46-73q142.51 0 242.76-100.74Q823-338.49 823-480q0-142.51-100.24-242.76Q622.51-823 480-823q-141.51 0-242.26 100.24Q137-622.51 137-480q0 141.51 100.74 242.26Q338.49-137 480-137Zm0-343Z"],["d","M836-29 724-141q-52 37-113.57 57Q548.87-64 480-64q-87.64 0-163.98-32.02-76.34-32.02-132.16-87.84-55.82-55.82-87.84-132.16T64-480q0-68.87 20-130.43Q104-672 141-724L15-850l52-52L888-81l-52 52ZM480-137q54.5 0 102.25-14.5T671-193L498-366l-77 78-175-176 49-49 122 120 27-27-251-251q-27 41-41.5 88.75T137-480q0 146 98.5 244.5T480-137Zm339-99-52-52q26-41 41-89.5T823-480q0-146-98.5-244.5T480-823q-54 0-102.5 15T288-767l-52-52q50.84-36.43 112.62-56.72Q410.4-896 480-896q87.89 0 163.94 32Q720-832 776-776t88 132.06q32 76.05 32 163.94 0 69.6-20.28 131.38Q855.43-286.84 819-236ZM594-461l-55-54 121-121 55 54-121 121Zm-67-66Zm-95 95Z"]],template:function(o,i){o&1&&(e(0,"div",0)(1,"h2"),a(2,"Profiles"),n(),e(3,"i",1),m("click",function(){return i.profileService.allProfiles.reload()}),y(),e(4,"svg",2),h(5,"path",3),n()()(),T(),e(6,"button",4),m("click",function(){return i.openFilterDialog()}),y(),e(7,"svg",5),h(8,"path",6),n(),T(),e(9,"span",7),a(10,"Add New"),n()(),h(11,"hr"),b(12,xn,1,0,"app-load-indicator",8)(13,On,2,1)),o&2&&(d(3),O("loading",i.profileService.allProfiles.isLoading()),d(9),x(i.profileService.allProfiles.isLoading()?12:13))},dependencies:[G,me],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;position:relative;gap:12px}.title-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.refresh-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.loading[_ngcontent-%COMP%]{cursor:progress;animation:spin-animation 2s linear infinite}.top-right-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:10px}.center[_ngcontent-%COMP%]{position:fixed;top:50vh;left:50%;transform:translate(-50%,-50%)}.profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:1rem}.profile-card[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr auto;grid-template-columns:1fr auto;gap:10px;max-width:500px;padding:12px;border:2px solid var(--color-outline);border-radius:8px;background-color:var(--color-surface-container);color:var(--color-on-surface);cursor:pointer;text-decoration:none}@media (max-width: 765px){.profile-card[_ngcontent-%COMP%]{margin:auto;width:100%}}.profile-card-title[_ngcontent-%COMP%]{grid-row:1;grid-column:1/span 2;color:var(--color-primary);text-align:center}.profile-card-content[_ngcontent-%COMP%]{grid-row:2;grid-column:1;padding:0 1rem}.profile-card-checkbox[_ngcontent-%COMP%]{grid-row:2;grid-column:2;width:auto;padding:.5rem;margin:auto}.profile-card-icon[_ngcontent-%COMP%]{width:3rem;height:3rem}.success[_ngcontent-%COMP%]{fill:var(--color-success)}.error[_ngcontent-%COMP%]{fill:var(--color-error)}"],changeDetection:0});let r=s;return r})();var li=(()=>{let s=class s{constructor(){this.RouteAbout=Ne,this.RouteConnections=X,this.RouteProfiles=re,this.RouteGeneral=we,this.RoutePlex=Fe}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=M({type:s,selectors:[["app-settings"]],decls:14,vars:5,consts:[[1,"settingsnav"],["routerLinkActive","active",1,"setnav-btn",3,"routerLink"],[1,"settings-container"],[1,"settings-content"]],template:function(o,i){o&1&&(e(0,"div",0)(1,"a",1),a(2,"General"),n(),e(3,"a",1),a(4,"Connections"),n(),e(5,"a",1),a(6,"Profiles"),n(),e(7,"a",1),a(8,"Plex"),n(),e(9,"a",1),a(10,"About"),n()(),e(11,"div",2)(12,"div",3),h(13,"router-outlet"),n()()),o&2&&(d(),f("routerLink",i.RouteGeneral),d(2),f("routerLink",i.RouteConnections),d(2),f("routerLink",i.RouteProfiles),d(2),f("routerLink",i.RoutePlex),d(2),f("routerLink",i.RouteAbout))},dependencies:[me,qt,Nt],styles:[".settings-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:1rem}@media (width < 765px){.settings-container[_ngcontent-%COMP%]{margin:.5rem}}.settingsnav[_ngcontent-%COMP%]{position:sticky;top:76px;left:0;right:0;z-index:99;margin:0;padding:0;display:flex;flex-direction:row;background-color:var(--color-surface-container-high);color:var(--color-on-surface)}@media (width < 765px){.settingsnav[_ngcontent-%COMP%]{order:2;justify-content:space-around;position:fixed;top:auto;bottom:76px}}.settingsnav[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1}.settings-content[_ngcontent-%COMP%]{order:2;padding:.5rem}@media (width < 765px){.settings-content[_ngcontent-%COMP%]{margin-bottom:80px;order:1}}.setnav-btn[_ngcontent-%COMP%]{margin:0;padding:.8rem;box-sizing:border-box;text-decoration:none;color:inherit;text-align:center;font-weight:400;transition:.3s;cursor:pointer;border-radius:0;border-bottom:2px solid transparent}.setnav-btn.active[_ngcontent-%COMP%]{background-color:var(--color-secondary-container);opacity:1;font-weight:600;color:var(--color-on-secondary-container);border-bottom:2px solid var(--color-primary)}.setnav-btn[_ngcontent-%COMP%]:not(.active):hover{background-color:var(--color-secondary-container);opacity:.6;font-weight:500;color:var(--color-on-secondary-container);border-bottom:2px solid var(--color-primary)}"]});let r=s;return r})();var si=(()=>{let s=class s{constructor(){this.http=E(Le),this.baseUrl=ae.apiUrl+"plex"}startAuth(t){return this.http.post(`${this.baseUrl}/auth/start`,t)}pollForToken(t,o){return this.http.get(`${this.baseUrl}/auth/poll/${t}?client_identifier=${encodeURIComponent(o)}`)}triggerScan(t){return this.http.post(`${this.baseUrl}/scan`,t)}checkExtras(t){return this.http.post(`${this.baseUrl}/extras`,t)}};s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=Te({token:s,factory:s.\u0275fac,providedIn:"root"});let r=s;return r})();function Vn(r,s){if(r&1){let l=S();e(0,"div",13)(1,"p",14),a(2," Connect your Plex account to enable library scanning and extras checking. "),n(),e(3,"button",15),m("click",function(){u(l);let o=v();return g(o.connectPlex())}),h(4,"i",16),a(5," Connect Plex "),n()()}}function kn(r,s){if(r&1){let l=S();e(0,"div",13)(1,"div",17)(2,"div",18)(3,"span",19),a(4,"Loading..."),n()()(),e(5,"h6",20),a(6,"Waiting for you to log in to Plex..."),n(),e(7,"div",21)(8,"p",22)(9,"strong"),a(10,"Your PIN:"),n(),e(11,"span",23),a(12),n()(),e(13,"p",24),a(14," A new browser window has opened. Please enter this PIN to complete the connection. "),n()(),e(15,"button",25),m("click",function(){u(l);let o=v();return g(o.disconnectPlex())}),a(16," Cancel "),n()()}if(r&2){let l=v();d(12),C(l.pin())}}function Dn(r,s){if(r&1){let l=S();e(0,"div",13)(1,"div",26),h(2,"i",27),e(3,"strong"),a(4,"Plex is now connected!"),n()(),e(5,"div",28)(6,"p")(7,"strong"),a(8,"Server:"),n(),a(9),n(),e(10,"p")(11,"strong"),a(12,"Status:"),n(),e(13,"span",29),a(14,"Connected"),n()()(),e(15,"div",30)(16,"button",31),m("click",function(){u(l);let o=v();return g(o.testScan())}),h(17,"i",32),a(18," Test Scan "),n(),e(19,"button",33),m("click",function(){u(l);let o=v();return g(o.testExtras())}),h(20,"i",34),a(21," Test Extras "),n(),e(22,"button",35),m("click",function(){u(l);let o=v();return g(o.disconnectPlex())}),h(23,"i",36),a(24," Disconnect Plex "),n()()()}if(r&2){let l=v();d(9),R(" ",l.serverAddress())}}function In(r,s){if(r&1){let l=S();e(0,"div",13)(1,"div",37),h(2,"i",38),e(3,"strong"),a(4,"Connection Error"),n(),e(5,"div",39),a(6),n()(),e(7,"button",40),m("click",function(){u(l);let o=v();return g(o.tryAgain())}),h(8,"i",32),a(9," Try Again "),n()()}if(r&2){let l=v();d(6),C(l.errorMessage())}}var di=(()=>{let s=class s{constructor(){this.plexService=E(si),this.authState=P("initial"),this.pin=P(""),this.authUrl=P(""),this.errorMessage=P(""),this.token=P(""),this.serverAddress=P(""),this.clientIdentifier=P(""),this.isInitial=B(()=>this.authState()==="initial"),this.isPending=B(()=>this.authState()==="pending"),this.isSuccess=B(()=>this.authState()==="success"),this.isError=B(()=>this.authState()==="error")}ngOnDestroy(){this.stopPolling()}connectPlex(){this.authState.set("pending"),this.errorMessage.set("");let t="trailarr-"+Date.now(),o={client_identifier:t,product_name:"Trailarr"};this.clientIdentifier.set(t),this.plexService.startAuth(o).subscribe({next:i=>{this.pin.set(i.pin),this.authUrl.set(i.auth_url),window.open(i.auth_url,"_blank"),this.startPolling(i.pin)},error:i=>{console.error("Failed to start Plex auth:",i),this.authState.set("error"),this.errorMessage.set(i.error?.detail||"Failed to start Plex authentication")}})}startPolling(t){this.pollingSubscription=ht(2e3).pipe(ft(()=>this.plexService.pollForToken(t,this.clientIdentifier())),vt(o=>o.status==="pending",!0)).subscribe({next:o=>{o.status==="success"?(this.authState.set("success"),this.token.set(o.token||""),this.serverAddress.set(o.plex_server_address||""),this.stopPolling()):o.status==="expired"&&(this.authState.set("error"),this.errorMessage.set("Authentication PIN has expired. Please try again."),this.stopPolling())},error:o=>{console.error("Failed to poll for token:",o),this.authState.set("error"),this.errorMessage.set(o.error?.detail||"Failed to check authentication status"),this.stopPolling()}})}stopPolling(){this.pollingSubscription&&(this.pollingSubscription.unsubscribe(),this.pollingSubscription=void 0)}disconnectPlex(){this.stopPolling(),this.authState.set("initial"),this.pin.set(""),this.authUrl.set(""),this.token.set(""),this.serverAddress.set(""),this.clientIdentifier.set(""),this.errorMessage.set("")}tryAgain(){this.authState.set("initial"),this.errorMessage.set("")}testScan(){if(!this.token()||!this.serverAddress()){console.error("No token or server address available");return}let t={token:this.token(),server_address:this.serverAddress(),media_folder_path:"/library/movies"};this.plexService.triggerScan(t).subscribe({next:o=>{console.log("Scan result:",o),alert(`Scan triggered: ${o.message}`)},error:o=>{console.error("Scan failed:",o),alert(`Scan failed: ${o.error?.detail||"Unknown error"}`)}})}testExtras(){if(!this.token()||!this.serverAddress()){console.error("No token or server address available");return}let t={token:this.token(),server_address:this.serverAddress(),media_type:"movie",tmdb_id:"550"};this.plexService.checkExtras(t).subscribe({next:o=>{console.log("Extras result:",o);let i=o.has_extras?`Found ${o.extras.length} extras: ${o.extras.map(c=>c.title).join(", ")}`:"No extras found";alert(i)},error:o=>{console.error("Extras check failed:",o),alert(`Extras check failed: ${o.error?.detail||"Unknown error"}`)}})}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=M({type:s,selectors:[["app-plex-integration"]],decls:28,vars:4,consts:[[1,"container-fluid","py-3"],[1,"row","justify-content-center"],[1,"col-12","col-md-8","col-lg-6"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"bi","bi-play-btn-fill","me-2"],[1,"card-body"],["class","text-center",4,"ngIf"],[1,"card","mt-4"],[1,"bi","bi-info-circle","me-2"],[1,"text-muted","mb-2"],[1,"text-muted"],[1,"text-center"],[1,"text-muted","mb-4"],["type","button",1,"btn","btn-primary","btn-lg",3,"click"],[1,"bi","bi-plug","me-2"],[1,"mb-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mb-3"],[1,"alert","alert-info"],[1,"mb-2"],[1,"badge","bg-dark","fs-6","mx-2"],[1,"mb-0"],["type","button",1,"btn","btn-outline-secondary","mt-3",3,"click"],[1,"alert","alert-success"],[1,"bi","bi-check-circle-fill","me-2"],[1,"text-start","mb-4"],[1,"badge","bg-success"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-center"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-arrow-clockwise","me-2"],["type","button",1,"btn","btn-outline-info",3,"click"],[1,"bi","bi-collection-play","me-2"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-plug-fill","me-2"],[1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"mt-2"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,i){o&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),h(6,"i",6),a(7," Plex Integration "),n()(),e(8,"div",7),z(9,Vn,6,0,"div",8)(10,kn,17,1,"div",8)(11,Dn,25,1,"div",8)(12,In,10,1,"div",8),n()(),e(13,"div",9)(14,"div",4)(15,"h6",5),h(16,"i",10),a(17," About Plex Integration "),n()(),e(18,"div",7)(19,"p",11),a(20," The Plex integration allows Trailarr to: "),n(),e(21,"ul",12)(22,"li"),a(23,"Trigger media library scans when new trailers are downloaded"),n(),e(24,"li"),a(25,"Check for existing extras and trailers in your Plex library"),n(),e(26,"li"),a(27,"Avoid downloading duplicate content that already exists"),n()()()()()()()),o&2&&(d(9),f("ngIf",i.isInitial()),d(),f("ngIf",i.isPending()),d(),f("ngIf",i.isSuccess()),d(),f("ngIf",i.isError()))},dependencies:[Ie,Dt],styles:[".card[_ngcontent-%COMP%]{border:1px solid var(--bs-border-color);box-shadow:0 .125rem .25rem #00000013}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.badge[_ngcontent-%COMP%]{font-size:1rem;padding:.5rem 1rem}.alert[_ngcontent-%COMP%]{border-radius:.5rem}.btn[_ngcontent-%COMP%]{border-radius:.375rem;transition:all .15s ease-in-out}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:var(--bs-primary)}.bi[_ngcontent-%COMP%]{font-size:1.1em}@media (max-width: 576px){.d-grid[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:.5rem}}"]});let r=s;return r})();var Ar=[{path:"",loadComponent:()=>li,children:[{path:X,component:ii},{path:`${X}/${ue}`,component:tt},{path:`${X}/:${Rt}`,component:tt},{path:re,component:ai},{path:`${re}/:${Ft}`,component:ri},{path:we,component:ni},{path:Fe,component:di},{path:Ne,component:ti},{path:"**",redirectTo:we,pathMatch:"prefix"}]}];export{Ar as default};
