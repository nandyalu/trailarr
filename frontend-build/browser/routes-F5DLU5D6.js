import{a as _e}from"./chunk-FDWLNSCB.js";import{a as he,b as Ge}from"./chunk-EVWNYK3S.js";import{a as Rt,b as At,d as Ut,f as Gt,g as Zt,i as Qt,j as Ae,k as Ue,l as ee}from"./chunk-246NVML4.js";import{a as Wt,b as Ze,c as fe,d as Qe}from"./chunk-UG5RFH4P.js";import{a as Re}from"./chunk-XUPODHPG.js";import"./chunk-TDHWVRPW.js";import{a as Fe,b as X,c as Ie,h as re,j as qe,l as Pe,m as Mt,o as Tt,p as It}from"./chunk-ZEQ6WCJQ.js";import{a as qt,b as Nt}from"./chunk-NAMTLW4N.js";import{b as Q,e as W,f as Ot,h as kt,j as H,k as Dt,l as Vt,q as Lt,r as Ne,s as Ft,u as q}from"./chunk-JVTE5FXR.js";import{b as N}from"./chunk-3OXZ5NJK.js";import{$a as U,Aa as Y,Ba as R,Bc as Pt,Ca as T,Cb as wt,Da as O,Db as xt,Ea as p,Fa as i,Fb as St,Ga as n,Gb as Ve,Ha as _,I as P,Ib as yt,Jb as Le,L as u,La as je,M as g,Ma as x,N as S,Na as d,O as M,Oc as ue,Pa as f,Pc as ge,Qa as mt,Qc as Et,Ra as ut,Sa as gt,T as y,Ta as se,U as ne,Ua as pe,Va as _t,W as Oe,Wa as k,Ya as A,Za as l,_ as dt,_a as b,a as ie,ab as ze,b as Te,ba as a,bb as L,cb as F,db as I,eb as de,fb as ce,ga as ke,gb as oe,ha as E,hb as ht,ib as ft,kb as V,ma as le,mb as Ct,nb as G,ob as z,pb as vt,qb as De,rb as Z,ua as ct,ub as K,va as $,vb as w,wa as j,wb as J,xb as me,ya as C,za as v,zb as bt}from"./chunk-IMRADBSH.js";var Xt=["passwordUpdateDialog"],Ht=o=>({$implicit:o});function ei(o,m){o&1&&je(0)}function ti(o,m){o&1&&je(0)}function ii(o,m){if(o&1&&(i(0,"p",32),l(1),n()),o&2){let e=f(2);a(),b(e.updateError)}}function ni(o,m){if(o&1&&(i(0,"p",33),l(1),n()),o&2){let e=f(2);a(),b(e.updateSuccess)}}function oi(o,m){o&1&&_(0,"div",36)}function ri(o,m){if(o&1){let e=x();i(0,"form",20),d("click",function(t){return u(e),g(t.stopPropagation())}),i(1,"h2"),l(2,"Update Login Credentials"),n(),i(3,"div",21)(4,"div",22),_(5,"input",23,2),i(7,"label",24),l(8,"Current Username"),n()(),i(9,"div",22)(10,"input",25,3),I("ngModelChange",function(t){u(e);let s=f();return F(s.currentPassword,t)||(s.currentPassword=t),g(t)}),n(),i(12,"label",26),l(13,"Current Password"),n(),i(14,"i",18),d("click",function(){u(e);let t=f();return g(t.currentPasswordVisible=!t.currentPasswordVisible)}),le(15,ei,1,0,"ng-container",27),n()(),i(16,"h3"),l(17,"New Login"),n(),i(18,"div",22)(19,"input",28,4),I("ngModelChange",function(t){u(e);let s=f();return F(s.newUsername,t)||(s.newUsername=t),g(t)}),n(),i(21,"label",29),l(22,"New Username"),n()(),i(23,"div",22)(24,"input",30,5),I("ngModelChange",function(t){u(e);let s=f();return F(s.newPassword,t)||(s.newPassword=t),g(t)}),n(),i(26,"label",31),l(27,"New Password "),n(),i(28,"i",18),d("click",function(){u(e);let t=f();return g(t.newPasswordVisible=!t.newPasswordVisible)}),le(29,ti,1,0,"ng-container",27),n()(),i(30,"span"),l(31,"For updating only username/password, leave the other blank"),n()(),C(32,ii,2,1,"p",32),C(33,ni,2,1,"p",33),i(34,"button",34),d("click",function(){u(e);let t=f();return g(t.onConfirmUpdate())}),l(35,"Update"),n(),i(36,"button",35),d("click",function(){u(e);let t=f();return g(t.closePwUpdateDialog())}),l(37,"Cancel"),n(),C(38,oi,1,0,"div",36),n()}if(o&2){let e=f(),r=_t(115),t=oe(0);a(5),p("value",t==null?null:t.webui_username),a(5),p("type",e.currentPasswordVisible?"text":"password"),L("ngModel",e.currentPassword),a(5),p("ngTemplateOutlet",r)("ngTemplateOutletContext",V(14,Ht,e.currentPasswordVisible)),a(4),L("ngModel",e.newUsername),a(5),p("type",e.newPasswordVisible?"text":"password"),L("ngModel",e.newPassword),a(5),p("ngTemplateOutlet",r)("ngTemplateOutletContext",V(16,Ht,e.newPasswordVisible)),a(3),v(e.updateError?32:-1),a(),v(e.updateSuccess?33:-1),a(),p("disabled",e.getSubmitButtonState()),a(4),v(e.updateSuccess?38:-1)}}function ai(o,m){o&1&&(S(),i(0,"svg",37),_(1,"path",38),n())}function li(o,m){o&1&&(S(),i(0,"svg",37),_(1,"path",39),n())}function si(o,m){if(o&1&&C(0,ai,2,0,":svg:svg",37)(1,li,2,0,":svg:svg",37),o&2){let e=m.$implicit;v(e?0:1)}}var Bt=(()=>{class o{constructor(){this.settingsService=P(_e),this.settingsSignal=this.settingsService.settingsResource.value,this.currentPassword="",this.newUsername="",this.newPassword="",this.updateError="",this.updateSuccess="",this.currentPasswordVisible=!1,this.newPasswordVisible=!1,this.dialogOpen=!1}ngOnInit(){this.settingsService.getServerStats().subscribe(e=>this.serverStats=e)}clearPwUpdateFields(){this.currentPassword="",this.newPassword="",this.updateError="",this.updateSuccess=""}togglePasswordVisibility(e){e.type=e.type==="password"?"text":"password"}getSubmitButtonState(){if(!this.currentPassword)return!0;let e=!1;return this.newUsername.length>0&&(e=!0),this.newPassword.length>4&&(e=!0),!e}showPwUpdateDialog(){this.clearPwUpdateFields(),this.dialogOpen=!0,this.passwordUpdateDialog.nativeElement.showModal()}closePwUpdateDialog(){this.clearPwUpdateFields(),this.passwordUpdateDialog.nativeElement.close(),this.dialogOpen=!1}onConfirmUpdate(){console.log("Updating password"),this.updateError="",this.updateSuccess="",this.settingsService.updatePassword(this.currentPassword,this.newUsername,this.newPassword).subscribe(e=>{console.log(e),e.includes("Error")?this.updateError=e:(this.updateSuccess=e,setTimeout(()=>{this.closePwUpdateDialog()},3e3))})}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=E({type:o,selectors:[["app-about"]],viewQuery:function(r,t){if(r&1&&mt(Xt,5),r&2){let s;ut(s=gt())&&(t.passwordUpdateDialog=s.first)}},decls:116,vars:23,consts:[["passwordUpdateDialog",""],["passwordVisibilityIcon",""],["currentUsernameInput",""],["currentPasswordInput",""],["newUsernameInput",""],["newPasswordInput",""],[1,"about-container"],[1,"about-section"],[1,"about-content"],["href","https://hub.docker.com/r/nandyalu/trailarr","target","_blank",1,"update-available"],["href","https://pypi.org/project/yt-dlp/","target","_blank",1,"update-available"],["appCopyToClipboard","",3,"textToCopy"],[1,"update-login",3,"click"],["href","https://nandyalu.github.io/trailarr","target","_blank"],["href","https://discord.gg/KKPr5kQEzQ","target","_blank"],["href","https://github.com/nandyalu/trailarr","target","_blank"],["href","https://github.com/nandyalu/trailarr/issues","target","_blank"],["href","https://www.reddit.com/r/trailarr","target","_blank"],[3,"click"],[1,"dialog-content"],[1,"dialog-content",3,"click"],[1,"text-input"],[1,"password-input"],["id","trailarr_current_username","name","Current Username","type","text","autocomplete","current-username","disabled","true",3,"value"],["for","trailarr_current_username"],["id","trailarr_current_password","name","Current Password","autocomplete","current-password","required","","tabindex","1",3,"ngModelChange","type","ngModel"],["for","trailarr_current_password"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","trailarr_new_username","name","New Username","type","text","autocomplete","username","required","","tabindex","1",3,"ngModelChange","ngModel"],["for","trailarr_new_username"],["id","trailer_new_password","name","New Password","autocomplete","new-password","required","","minlength","5","tabindex","1",3,"ngModelChange","type","ngModel"],["for","trailer_new_password"],[1,"update-error"],[1,"update-success"],["tabindex","1","type","submit",1,"primary",3,"click","disabled"],["type","reset","tabindex","2",1,"secondary",3,"click"],[1,"close-progress"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","fill","#e8eaed"],["d","M480.12-330q70.88 0 120.38-49.62t49.5-120.5q0-70.88-49.62-120.38T479.88-670Q409-670 359.5-620.38T310-499.88q0 70.88 49.62 120.38t120.5 49.5Zm-.36-58q-46.76 0-79.26-32.74-32.5-32.73-32.5-79.5 0-46.76 32.74-79.26 32.73-32.5 79.5-32.5 46.76 0 79.26 32.74 32.5 32.73 32.5 79.5 0 46.76-32.74 79.26-32.73 32.5-79.5 32.5Zm.24 188q-146 0-264-83T40-500q58-134 176-217t264-83q146 0 264 83t176 217q-58 134-176 217t-264 83Zm0-300Zm-.17 240Q601-260 702.5-325.5 804-391 857-500q-53-109-154.33-174.5Q601.34-740 480.17-740T257.5-674.5Q156-609 102-500q54 109 155.33 174.5Q358.66-260 479.83-260Z"],["d","m629-419-44-44q26-71-27-118t-115-24l-44-44q17-11 38-16t43-5q71 0 120.5 49.5T650-500q0 22-5.5 43.5T629-419Zm129 129-40-40q49-36 85.5-80.5T857-500q-50-111-150-175.5T490-740q-42 0-86 8t-69 19l-46-47q35-16 89.5-28T485-800q143 0 261.5 81.5T920-500q-26 64-67 117t-95 93Zm58 226L648-229q-35 14-79 21.5t-89 7.5q-146 0-265-81.5T40-500q20-52 55.5-101.5T182-696L56-822l42-43 757 757-39 44ZM223-654q-37 27-71.5 71T102-500q51 111 153.5 175.5T488-260q33 0 65-4t48-12l-64-64q-11 5-27 7.5t-30 2.5q-70 0-120-49t-50-121q0-15 2.5-30t7.5-27l-97-97Zm305 142Zm-116 58Z"]],template:function(r,t){if(r&1){let s=x();de(0),i(1,"div",6)(2,"section",7)(3,"h1"),l(4,"About Trailarr"),n(),_(5,"hr"),i(6,"div",8)(7,"span"),l(8,"Version"),n(),i(9,"code"),l(10),n(),i(11,"a",9),l(12),n()(),i(13,"div",8)(14,"span"),l(15,"Yt-dlp Version"),n(),i(16,"code"),l(17),n(),i(18,"a",10),l(19),n()(),i(20,"div",8)(21,"span"),l(22,"API Key"),n(),i(23,"code",11),l(24),n()(),i(25,"div",8)(26,"span"),l(27,"Appdata Folder"),n(),i(28,"code"),l(29),n()(),i(30,"div",8)(31,"span"),l(32,"Server Started"),n(),i(33,"code"),l(34),G(35,"timeago"),n()(),i(36,"div",8)(37,"span"),l(38,"Timezone"),n(),i(39,"code"),l(40),n()()(),i(41,"section",7)(42,"h1"),l(43,"Statistics"),n(),_(44,"hr"),i(45,"div",8)(46,"span"),l(47,"Movies"),n(),i(48,"code"),l(49),n()(),i(50,"div",8)(51,"span"),l(52,"Movies Monitored"),n(),i(53,"code"),l(54),n()(),i(55,"div",8)(56,"span"),l(57,"Series"),n(),i(58,"code"),l(59),n()(),i(60,"div",8)(61,"span"),l(62,"Series Monitored"),n(),i(63,"code"),l(64),n()(),i(65,"div",8)(66,"span"),l(67,"Trailers Downloaded"),n(),i(68,"code"),l(69),n()(),i(70,"div",8)(71,"span"),l(72,"Trailers Detected"),n(),i(73,"code"),l(74),n()()(),i(75,"section",7)(76,"h1"),l(77,"Login Credentials"),n(),_(78,"hr"),i(79,"div",8)(80,"button",12),d("click",function(){return u(s),g(t.showPwUpdateDialog())}),l(81,"Update Login"),n()()(),i(82,"section",7)(83,"h1"),l(84,"Getting Support"),n(),_(85,"hr"),i(86,"div",8)(87,"span"),l(88,"Documentation"),n(),i(89,"a",13),l(90,"https://nandyalu.github.io/trailarr"),n()(),i(91,"div",8)(92,"span"),l(93,"Discord"),n(),i(94,"a",14),l(95,"https://discord.gg/KKPr5kQEzQ"),n()(),i(96,"div",8)(97,"span"),l(98,"Github"),n(),i(99,"a",15),l(100,"https://github.com/nandyalu/trailarr"),n()(),i(101,"div",8)(102,"span"),l(103,"Issues"),n(),i(104,"a",16),l(105,"https://github.com/nandyalu/trailarr/issues"),n()(),i(106,"div",8)(107,"span"),l(108,"Reddit"),n(),i(109,"a",17),l(110,"https://www.reddit.com/r/trailarr"),n()()()(),i(111,"dialog",18,0),d("click",function(){return u(s),g(t.closePwUpdateDialog())}),C(113,ri,39,18,"form",19),n(),le(114,si,2,1,"ng-template",null,1,De)}if(r&2){let s=ce(t.settingsSignal());a(10),b(s==null?null:s.version),a(),k("latest",!(s!=null&&s.update_available)),a(),b(s!=null&&s.update_available?"Update Available":"Latest"),a(5),b(s==null?null:s.ytdlp_version),a(),k("latest",!(s!=null&&s.update_available_ytdlp)),a(),b(s!=null&&s.update_available_ytdlp?"Update Available":"Latest"),a(4),p("textToCopy",(s==null?null:s.api_key)||""),a(),b((s==null?null:s.api_key)||""),a(5),b(s==null?null:s.app_data_dir),a(5),b(s!=null&&s.server_start_time?z(35,21,s==null?null:s.server_start_time):"Unknown"),a(6),b(s==null?null:s.timezone),a(9),b(t.serverStats==null?null:t.serverStats.movies_count),a(5),b(t.serverStats==null?null:t.serverStats.movies_monitored),a(5),b(t.serverStats==null?null:t.serverStats.series_count),a(5),b(t.serverStats==null?null:t.serverStats.series_monitored),a(5),b(t.serverStats==null?null:t.serverStats.trailers_downloaded),a(5),b(t.serverStats==null?null:t.serverStats.trailers_detected),a(39),v(t.dialogOpen?113:-1)}},dependencies:[Wt,q,Dt,Q,W,Ot,Lt,Ne,H,kt,Nt,xt,qt],styles:[".about-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.about-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin:1.5rem .5rem;gap:1rem}.about-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .about-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;text-align:left;width:40%}.about-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2){text-decoration:none;text-align:left;margin:0;padding:.25rem}.update-available[_ngcontent-%COMP%]{background-color:var(--color-primary);color:var(--color-on-primary);border-radius:5px;border-radius:1rem;padding:.25rem .5rem;font-style:italic;width:auto!important}.latest[_ngcontent-%COMP%]{background-color:var(--color-tertiary);color:var(--color-on-tertiary)}@media screen and (max-width:768px){.about-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem}.about-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;font-weight:unset;font-style:italic;font-size:small}}.dialog-content[_ngcontent-%COMP%]{min-width:25vw;padding:1rem;text-align:center}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:1rem}.dialog-content[_ngcontent-%COMP%]   .update-success[_ngcontent-%COMP%]{font-weight:bolder;color:var(--color-success)}.dialog-content[_ngcontent-%COMP%]   .update-error[_ngcontent-%COMP%]{font-weight:bolder;color:var(--color-warning)}.text-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;gap:.5rem;justify-content:space-between;margin:1rem;align-items:center}.password-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin:.25rem;align-items:center;position:relative}.password-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;transform:translateY(-50%);top:50%;left:1rem;font-size:1rem;pointer-events:none;color:var(--color-on-surface);padding:0 .5rem;transition:.5s}.password-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:15rem;height:3rem;padding:.25rem .5rem;font-family:inherit;font-size:1.25rem;background-color:var(--color-surface-container-high);color:var(--color-tertiary);border:1px solid var(--color-outline);border-radius:.5rem}input[_ngcontent-%COMP%]:disabled{background-color:var(--color-surface-container-low);cursor:not-allowed}.password-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .password-input[_ngcontent-%COMP%]   input.ng-touched[_ngcontent-%COMP%] ~ label[_ngcontent-%COMP%], .password-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ label[_ngcontent-%COMP%]{top:0;background:var(--color-surface-container-high);font-size:.8rem}i[_ngcontent-%COMP%]{position:absolute;right:.5rem;font-size:0}svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:var(--color-secondary)}.close-progress[_ngcontent-%COMP%]{width:100%;height:.25rem;background-color:var(--color-success-text);border-radius:.25rem;animation:_ngcontent-%COMP%_closeProgress 3s linear 0s}@keyframes _ngcontent-%COMP%_closeProgress{0%{width:100%}to{width:0%}}"]})}}return o})();var pi=["pathSelectDialog"];function di(o,m){o&1&&_(0,"app-load-indicator",3)}function ci(o,m){if(o&1){let e=x();i(0,"p",2),d("click",function(){let t=u(e).$implicit,s=f(2);return g(s.setPath(t.path,t.type))}),l(1),n()}if(o&2){let e=m.$implicit,r=f(2);k("selected",e.path===r.path()),a(),b(e.name)}}function mi(o,m){if(o&1&&T(0,ci,2,3,"p",8,R),o&2){let e=f();O(e.folders())}}function ui(o,m){o&1&&(i(0,"span",6),S(),i(1,"svg",9),_(2,"path",10),n()())}var He=(()=>{class o{constructor(){this.settingsService=P(_e),this.name=w.required(),this.path=me.required(),this.pathShouldEndWith=w.required(),this.isSubmitted=y(!1),this.isLoading=this.settingsService.filesResource.isLoading,this.folders=this.settingsService.filesResource.value,this.oldPath=y(""),this.onSubmit=K(),this.pathSelectDialog=J.required("pathSelectDialog"),this.showDialog=()=>this.pathSelectDialog().nativeElement.showModal(),this.closeDialog=()=>this.pathSelectDialog().nativeElement.close(),ne(()=>{let e=this.path();e||this.settingsService.filesPath.set("/"),e.endsWith("/")&&this.settingsService.filesPath.set(e)})}ngOnChanges(){this.oldPath.set(this.path())}ngAfterViewInit(){this.showDialog()}setPath(e,r="folder"){!e.endsWith("/")&&r==="folder"&&(e+="/"),this.path.set(e)}goUpOneLevel(){let e=this.path();e.endsWith("/")&&(e=e.slice(0,-1)),e=e.replace(/\/[^\/]*$/,""),this.setPath(e)}resetValue(){this.path.set(this.oldPath())}cancelDialog(){this.path.set(this.oldPath()),this.onSubmit.emit(""),this.closeDialog()}submitValue(){this.isSubmitted.set(!0);let e=this.path();e=e.toString().trim(),this.onSubmit.emit(e),this.oldPath.set(e)}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=E({type:o,selectors:[["app-path-select-dialog"]],viewQuery:function(r,t){r&1&&se(t.pathSelectDialog,pi,5),r&2&&pe()},inputs:{name:[1,"name"],path:[1,"path"],pathShouldEndWith:[1,"pathShouldEndWith"]},outputs:{path:"pathChange",onSubmit:"onSubmit"},features:[Oe],decls:18,vars:5,consts:[["pathSelectDialog",""],["type","text","placeholder","Enter path here",3,"ngModelChange","ngModel"],[3,"click"],[1,"center"],[1,"buttons-row"],[3,"click","disabled"],[1,"loading-icon"],[1,"danger",3,"click"],[3,"selected"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"loading"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"]],template:function(r,t){if(r&1){let s=x();i(0,"dialog",null,0)(2,"h2"),l(3),n(),_(4,"hr"),i(5,"input",1),I("ngModelChange",function(h){return u(s),F(t.path,h)||(t.path=h),g(h)}),n(),i(6,"section")(7,"p",2),d("click",function(){return u(s),g(t.goUpOneLevel())}),l(8,"(Up one level)"),n(),C(9,di,1,0,"app-load-indicator",3)(10,mi,2,0),n(),i(11,"div",4)(12,"button",5),d("click",function(){return u(s),g(t.submitValue())}),i(13,"span"),l(14," Confirm "),n(),C(15,ui,3,0,"span",6),n(),i(16,"button",7),d("click",function(){return u(s),g(t.cancelDialog())}),l(17,"Cancel"),n()()()}r&2&&(a(3),U("Select a Path for '",t.name(),"'"),a(2),L("ngModel",t.path),a(4),v(t.isLoading()?9:10),a(3),p("disabled",!t.path().endsWith(t.pathShouldEndWith())||t.isSubmitted()),a(3),v(t.isSubmitted()?15:-1))},dependencies:[q,Q,W,H,N],styles:["dialog[_ngcontent-%COMP%]{padding:1rem;height:65vh;display:flex;flex-direction:column}input[_ngcontent-%COMP%]{padding:.5rem;font-size:1rem;font-weight:700;color:var(--color-tertiary);margin:1rem;border:1px solid var(--color-outline);border-radius:.5rem}section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;width:60vw;overflow:auto;text-align:left;padding:1rem;overscroll-behavior:contain;border:1px solid var(--color-outline);border-radius:.5rem}@media(width<765px){section[_ngcontent-%COMP%]{width:80vw}}p[_ngcontent-%COMP%]{padding:.5rem;margin:0;cursor:pointer;border-bottom:1px solid var(--color-outline)}p[_ngcontent-%COMP%]:hover{opacity:.8}.selected[_ngcontent-%COMP%], p[_ngcontent-%COMP%]:hover{background-color:var(--color-on-tertiary);color:var(--color-tertiary)}.buttons-row[_ngcontent-%COMP%]{padding:1rem}.loading-icon[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center}.loading-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}.loading[_ngcontent-%COMP%]{animation:spin-animation 2s linear infinite}"]})}}return o})();var gi=["cancelDialog"],_i=["deleteConnectionDialog"];function hi(o,m){return this.connectionCreate().path_mappings[o].path_from}function fi(o,m){o&1&&(i(0,"h2"),l(1,"Create Connection"),n())}function Ci(o,m){if(o&1){let e=x();i(0,"h2"),l(1,"Edit Connection"),n(),i(2,"button",9),d("click",function(){u(e);let t=f();return g(t.showDeleteDialog())}),S(),i(3,"svg",10),_(4,"path",11),n(),M(),i(5,"span",12),l(6,"Delete"),n()()}}function vi(o,m){o&1&&_(0,"app-load-indicator")}function bi(o,m){if(o&1&&(i(0,"p",36),l(1),n()),o&2){let e=m.$implicit;a(),b(e.message)}}function wi(o,m){if(o&1&&T(0,bi,2,1,"p",36,R),o&2){let e=f(2);O(e.connectionForm.name().errors())}}function xi(o,m){if(o&1&&(i(0,"label",37),_(1,"input",38),$(),i(2,"span",39),l(3),G(4,"uppercase"),n()()),o&2){let e=m.$implicit,r=f(2);k("option__selected",e===r.connectionCreate().arr_type),a(),p("id","arrtype_"+e+"_option")("value",e),j(r.connectionForm.arr_type),a(2),b(z(4,7,e))}}function Si(o,m){if(o&1&&(i(0,"label",37),_(1,"input",38),$(),i(2,"span",39),l(3),G(4,"uppercase"),n()()),o&2){let e=m.$implicit,r=f(2);k("option__selected",e===r.connectionCreate().monitor),a(),p("id","monitorType_"+e+"_option")("value",e),j(r.connectionForm.monitor),a(2),b(z(4,7,e))}}function yi(o,m){if(o&1&&(i(0,"p",36),l(1),n()),o&2){let e=m.$implicit;a(),b(e.message)}}function Pi(o,m){if(o&1&&T(0,yi,2,1,"p",36,R),o&2){let e=f(2);O(e.connectionForm.url().errors())}}function Ei(o,m){if(o&1&&(i(0,"p",36),l(1),n()),o&2){let e=m.$implicit;a(),b(e.message)}}function Mi(o,m){if(o&1&&T(0,Ei,2,1,"p",36,R),o&2){let e=f(2);O(e.connectionForm.external_url().errors())}}function Ti(o,m){if(o&1&&(i(0,"p",36),l(1),n()),o&2){let e=m.$implicit;a(),b(e.message)}}function Oi(o,m){if(o&1&&T(0,Ti,2,1,"p",36,R),o&2){let e=f(2);O(e.connectionForm.api_key().errors())}}function ki(o,m){if(o&1){let e=x();i(0,"div",42)(1,"div",13)(2,"label",43),l(3,"Path From"),n(),_(4,"input",44),$(),n(),i(5,"div",13)(6,"label",43),l(7,"Path To"),n(),i(8,"div",45),_(9,"input",46),$(),i(10,"button",47),d("click",function(){let t=u(e).$index,s=f(3);return g(s.openPathSelectDialog(t))}),S(),i(11,"svg",10),_(12,"path",48),n()()()(),M(),i(13,"button",49),d("click",function(){let t=u(e).$index,s=f(3);return g(s.removePathMapping(t))}),S(),i(14,"svg",10),_(15,"path",50),n()()()}if(o&2){let e=m.$implicit,r=m.$index;a(2),p("for","path_from"+r),a(2),p("id","path_from"+r),j(e.path_from),p("readOnly",!0),a(2),p("for","path_to"+r),a(3),p("id","path_to"+r),j(e.path_to),a(4),p("id","remove"+r)}}function Di(o,m){if(o&1&&(i(0,"div",40)(1,"h3"),l(2,"Path Mappings"),n(),_(3,"help-link-icon",23),n(),_(4,"hr"),i(5,"div",41),T(6,ki,16,10,"div",42,hi,!0),n()),o&2){let e=f(2);a(3),p("link","https://nandyalu.github.io/trailarr/getting-started/03-setup/connections/#2-path-mappings"),a(3),O(e.connectionForm.path_mappings)}}function Vi(o,m){if(o&1&&(i(0,"p",30),l(1),n()),o&2){f();let e=oe(36);a(),b(e)}}function Li(o,m){if(o&1){let e=x();i(0,"button",51),d("click",function(t){u(e);let s=f(2);return g(s.onSubmit(t))}),S(),i(1,"svg",10),_(2,"path",52),n(),M(),i(3,"span",12),l(4,"Submit"),n()()}if(o&2){let e=f(2);p("disabled",!e.connectionForm().dirty()||!e.connectionForm().valid())}}function Fi(o,m){if(o&1){let e=x();i(0,"button",53),d("click",function(t){u(e);let s=f(2);return g(s.onSubmit(t))}),S(),i(1,"svg",10),_(2,"path",54),n(),M(),i(3,"span",12),l(4,"Test"),n()()}if(o&2){let e=f(2);p("disabled",!e.connectionForm().dirty()||e.connectionForm().invalid())}}function Ii(o,m){o&1&&_(0,"div",35)}function qi(o,m){if(o&1){let e=x();i(0,"form",2)(1,"div",13)(2,"label",14),l(3,"Name"),n(),_(4,"input",15),$(),C(5,wi,2,0),n(),i(6,"div",16)(7,"div",17)(8,"legend",18),l(9,"Arr Type:"),n(),i(10,"div",19),T(11,xi,5,9,"label",20,R),n()(),i(13,"div",17)(14,"legend",21),l(15,"Monitor Type:"),n(),i(16,"div",22),T(17,Si,5,9,"label",20,R),n(),_(19,"help-link-icon",23),n()(),i(20,"div",13)(21,"label",24),l(22,"Server URL"),n(),_(23,"input",25),$(),C(24,Pi,2,0),n(),i(25,"div",13)(26,"label",26),l(27,"External URL (optional)"),n(),_(28,"input",27),$(),C(29,Mi,2,0),n(),i(30,"div",13)(31,"label",28),l(32,"API Key"),n(),_(33,"input",29),$(),C(34,Oi,2,0),n(),C(35,Di,8,1),de(36),C(37,Vi,2,1,"p",30),i(38,"div",5),C(39,Li,5,1,"button",31)(40,Fi,5,1,"button",32),i(41,"button",33),d("click",function(){u(e);let t=f();return g(t.onCancel())}),S(),i(42,"svg",10),_(43,"path",34),n(),M(),i(44,"span",12),l(45,"Cancel"),n()()(),C(46,Ii,1,0,"div",35),n()}if(o&2){let e=f();p("id","connectionForm"+e.connectionId()),a(4),j(e.connectionForm.name),a(),v(e.connectionForm.name().touched()&&e.connectionForm.name().invalid()?5:-1),a(6),O(e.arrOptions),a(6),O(e.monitorOptions),a(2),p("link","https://nandyalu.github.io/trailarr/user-guide/settings/connections/#monitor-types"),a(4),j(e.connectionForm.url),a(),v(e.connectionForm.url().touched()&&e.connectionForm.url().invalid()?24:-1),a(4),j(e.connectionForm.external_url),a(),v(e.connectionForm.external_url().touched()&&e.connectionForm.external_url().invalid()?29:-1),a(4),j(e.connectionForm.api_key),a(),v(e.connectionForm.api_key().touched()&&e.connectionForm.api_key().invalid()?34:-1),a(),v(e.arePathMappingsAdded()?35:-1),a();let r=ce(e.submitResult());a(),v(r?37:-1),a(2),v(e.isReadyToSubmit()?39:40),a(7),v(r.toLowerCase().includes("ated success")?46:-1)}}var Ni=Ut(o=>{Zt(o.path_from),ee(o.path_from,{message:"Path From is required."}),ee(o.path_to,{message:"Path To is required."})}),Je=(()=>{class o{constructor(){this.changeDetectorRef=P(bt),this.router=P(ue),this.viewContainerRef=P(ke),this.connectionService=P(Qe),this.connectionId=w(0,{transform:e=>{let r=Number(e);return isNaN(r)?-1:r}}),this.arrOptions=[Ze.Radarr,Ze.Sonarr],this.monitorOptions=[fe.Missing,fe.New,fe.None,fe.Sync],this.connectionCreate=y({api_key:"",arr_type:Ze.Radarr,monitor:fe.New,name:"",path_mappings:[],url:"",external_url:""}),this.arePathMappingsAdded=y(!1),this.isCreate=y(!1),this.isConnectionTested=y(!1),this.isReadyToSubmit=y(!1),this.isSubmitting=y(!1),this.submitResult=y(""),this.connectionForm=Rt(this.connectionCreate,e=>{ee(e.api_key,{message:"API Key is required."}),Ue(e.api_key,/^[a-zA-Z0-9]*$/,{message:"API Key must be alphanumeric."}),Ae(e.api_key,32,{message:"API Key must be at least 32 characters long."}),Qt(e.api_key,50,{message:"API Key cannot be longer than 50 characters."}),ee(e.arr_type,{message:"ARR Type is required."}),ee(e.monitor,{message:"Monitor Type is required."}),ee(e.name,{message:"Connection Name is required."}),Ae(e.name,3,{message:"Connection Name must be at least 3 characters long."}),ee(e.url,{message:"URL is required."}),Ae(e.url,5,{message:"URL must be at least 5 characters long."}),Ue(e.url,/^https?:\/\/.*/,{message:"URL must start with http:// or https://."}),Ue(e.external_url,/^https?:\/\/.*/,{message:"External URL must start with http:// or https://."}),At(e.path_mappings,Ni)}),this.connection=this.connectionService.selectedConnection,this.isLoading=this.connectionService.connectionsResource.isLoading,this.connectionIDeffect=ne(()=>{let e=this.connectionId();if(this.isLoading()){console.log("Connection data is still loading. Waiting for it to complete.");return}if(e==-1)this.isCreate.set(!0);else if(!this.connectionService.connectionExists(e)){console.warn(`Connection with ID '${e}' does not exist. Redirecting to connections list.`),this.router.navigate(["/settings/connections"]);return}this.connectionService.connectionID.set(e)}),this.connectionEffect=ne(()=>{if(this.isSubmitting())return;let e=this.connection();e&&!this.isSubmitting()&&(this.connectionCreate.set(e),this.isCreate.set(e.id===-1),this.isConnectionTested.set(!1),this.isReadyToSubmit.set(!1),this.arePathMappingsAdded.set(e.path_mappings.length>0),this.submitResult.set(""),this.changeDetectorRef.markForCheck())}),this.cancelDialog=J("cancelDialog"),this.deleteDialog=J("deleteConnectionDialog"),this.closeDeleteDialog=()=>this.deleteDialog()?.nativeElement.close(),this.showDeleteDialog=()=>this.deleteDialog()?.nativeElement.showModal(),this.closeCancelDialog=()=>this.cancelDialog()?.nativeElement.close(),this.showCancelDialog=()=>this.cancelDialog()?.nativeElement.showModal()}formatPathFrom(e){return e.endsWith("/")||e.endsWith("\\")?e:e.includes("/")?e+"/":e.includes("\\")?e+"\\":e}addPathMappings(e){let r=!1,t=0,s=this.connectionCreate().path_mappings,c=[];if(e.forEach(h=>{let D=this.formatPathFrom(h);s.some(te=>te.path_from===D)||(c.push({id:null,connection_id:null,path_from:D,path_to:""}),r=!0,t++)}),this.connectionCreate.update(h=>(h.path_mappings=[...h.path_mappings,...c],ie({},h))),r){this.arePathMappingsAdded.set(!0);let h=`Retrieved ${e.length} root folders.`;h+=`
Added ${t} new root folders to Path Mappings.`,h+=`
Please update and test the connection to submit!`,e.length===1&&(h=h.replace("root folders.","root folder.")),t===1&&(h=h.replace("new root folders","new root folder")),this.submitResult.update(D=>`${D}
${h}`)}else this.isConnectionTested.set(!0),this.arePathMappingsAdded.set(!0),this.isReadyToSubmit.set(!0),this.submitResult.update(h=>{let D=h+`
Retrieved ${e.length} root folders that were already in Path Mappings.
You can now submit the connection.`;return e.length===1&&(D=D.replace("root folders that were ","root folder that was ")),D});console.log("Path Mappings after adding root folders:",this.connectionCreate())}removePathMapping(e){let t=this.connectionCreate().path_mappings.filter((s,c)=>c!==e);this.connectionCreate.update(s=>(s.path_mappings=t,ie({},s)))}openPathSelectDialog(e){let r=this.connectionCreate().path_mappings[e].path_from,t=this.viewContainerRef.createComponent(He);t.setInput("name",r),t.setInput("path",r),t.setInput("pathShouldEndWith","/"),t.instance.onSubmit.subscribe(s=>{s&&this.connectionForm.path_mappings[e].path_to().setControlValue(s),setTimeout(()=>{t.destroy()},500)})}checkConnectionValidity(){return this.connectionForm().valid()?!0:(this.submitResult.set("Form is invalid, please correct the errors and try again."),!1)}onCancel(){this.connectionForm().dirty()?this.showCancelDialog():this.router.navigate(["/settings/connections"])}onConfirmCancel(){this.closeCancelDialog(),this.router.navigate(["/settings/connections"])}onConfirmDelete(){this.closeDeleteDialog(),this.deleteConnection()}onSubmit(e){if(e.preventDefault(),!!this.checkConnectionValidity()){if(!this.isConnectionTested()||!this.isReadyToSubmit()){this.testConnection();return}if(!this.isReadyToSubmit()){this.submitResult.set("Please test the connection before submitting.");return}if(this.isCreate()){this.createConnection();return}this.updateConnection()}}createConnection(){if(!this.checkConnectionValidity()||!this.isReadyToSubmit()||this.isSubmitting())return;this.isSubmitting.set(!0),this.submitResult.set("Creating connection, please wait...");let e=this.connectionCreate();this.connectionService.addConnection(e).subscribe({next:r=>{this.submitResult.set(r),setTimeout(()=>{this.router.navigate(["/settings/connections"]).then(()=>{this.connectionService.connectionsResource.reload()})},3e3)},error:r=>{console.error("Error creating connection:",r),this.submitResult.set(`Error creating connection: ${r.message||r}. Try again in some time`)}})}deleteConnection(){this.connectionService.connectionExists(this.connectionId())&&this.connectionService.deleteConnection(this.connectionId()).subscribe({next:e=>{this.submitResult.set(`Connection deleted successfully: ${e}`),this.connectionService.connectionsResource.reload(),setTimeout(()=>{this.router.navigate(["/settings/connections"]).then(()=>{this.connectionService.connectionsResource.reload()})},3e3)},error:e=>{console.error("Error deleting connection:",e),this.submitResult.set(`Error deleting connection: ${e.message||e}. Try again in some time`)}})}getRootFolders(){if(!this.checkConnectionValidity()||this.isReadyToSubmit())return;let e=this.connectionCreate();this.connectionService.getRootFolders(e).subscribe({next:r=>{Array.isArray(r)?(this.arePathMappingsAdded.set(!0),this.addPathMappings(r)):(this.arePathMappingsAdded.set(!1),this.submitResult.update(t=>`${t}
Error getting root folders: ${r}`))},error:r=>{console.error("Error fetching root folders:",r),this.submitResult.update(t=>`${t}
Error fetching root folders: ${r.message||r}. Try again in some time`)}})}testConnection(){if(!this.checkConnectionValidity())return;let e=this.connectionCreate();this.connectionService.testConnection(e).subscribe({next:r=>{this.submitResult.set(r),r.toLowerCase().includes("success")&&(this.isConnectionTested()?(this.isReadyToSubmit.set(!0),this.submitResult.update(t=>`${t}
Connection tested successfully. You can now submit the connection.`)):(this.isConnectionTested.set(!0),this.getRootFolders()))},error:r=>{console.error("Error testing connection:",r),this.submitResult.set(`Error testing connection: ${r.message||r}. Try again in some time`)}})}updateConnection(){if(!this.checkConnectionValidity()||!this.isReadyToSubmit()||this.isSubmitting())return;this.isSubmitting.set(!0),this.submitResult.set("Updating connection, please wait...");let e=this.connectionCreate();this.connectionService.updateConnection(this.connectionId(),e).subscribe({next:r=>{this.submitResult.set(r),setTimeout(()=>{this.router.navigate(["/settings/connections"]).then(()=>{this.connectionService.connectionsResource.reload()})},3e3)},error:r=>{console.error("Error updating connection:",r),this.submitResult.set(`Error updating connection: ${r.message||r}. Try again in some time`)}})}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=E({type:o,selectors:[["app-edit-connection2"]],viewQuery:function(r,t){r&1&&se(t.cancelDialog,gi,5)(t.deleteDialog,_i,5),r&2&&pe(2)},inputs:{connectionId:[1,"connectionId"]},decls:31,vars:2,consts:[["cancelDialog",""],["deleteConnectionDialog",""],[3,"id"],[3,"click"],[1,"dialog-content",3,"click"],[1,"buttons-row"],[1,"danger",3,"click"],[1,"primary",3,"click"],[1,"secondary",3,"click"],[1,"icon-button","danger","top-right-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M259.09-114.02q-28.45 0-48.41-19.89-19.96-19.89-19.96-48.24v-565.94h-45.07v-68.13h198.28v-34.3h271.9v34.3h198.52v68.13h-45.07v565.94q0 27.6-20.33 47.86-20.34 20.27-48.04 20.27H259.09Zm441.82-634.07H259.09v565.94h441.82v-565.94ZM363.89-266.24h64.07v-399h-64.07v399Zm168.15 0h64.31v-399h-64.31v399ZM259.09-748.09v565.94-565.94Z"],[1,"text"],[1,"input-group"],["for","name"],["id","name","autocapitalize","words","autocomplete","off","placeholder","Connection Name","type","text",3,"field"],[1,"d-row"],[1,"option-container"],["id","arrtype_label"],["role","radiogroup","aria-labelledby","arrtype_label",1,"options-bar"],[1,"option-label",3,"option__selected"],["id","monitorType_label"],["role","radiogroup","aria-labelledby","monitorType_label",1,"options-bar"],[3,"link"],["for","url"],["id","url","autocomplete","off","placeholder","Server URL Ex: http://192.168.0.15:6969","type","url",3,"field"],["for","externalUrl"],["id","externalUrl","autocomplete","off","placeholder","External URL Ex: http://radarr.mydomain.com","type","url",3,"field"],["for","apiKey"],["id","apiKey","autocomplete","off","placeholder","API Key","type","text",3,"field"],[1,"result-text"],["id","submit","type","submit",1,"animated-button","primary",3,"disabled"],["id","test","type","test",1,"animated-button","primary",3,"disabled"],["id","cancel","type","button",1,"animated-button","secondary",3,"click"],["d","m247-195-51-52 233-233-233-234 51-52 234 234 232-234 51 52-232 234 232 233-51 52-232-234-234 234Z"],[1,"close-progress"],[1,"invalid-text"],[1,"option-label"],["type","radio",3,"id","value","field"],[1,"option-name"],[1,"d-row",2,"justify-content","flex-start"],[1,"mappings-wrapper"],[1,"d-row","mappings"],[3,"for"],["type","text","placeholder","Arr Internal Path","autocomplete","off",3,"id","field","readOnly"],[1,"input-wrapper"],["type","text","placeholder","Trailarr Internal Path","autocomplete","off",3,"id","field"],["type","button","title","Select Path",1,"tertiary","folder-icon",3,"click"],["d","M137-144q-28.72 0-50.86-22.32T64-217v-526q0-28.36 22.14-50.68T137-816h271l73 73h342q28.36 0 50.68 22.32T896-670v453q0 28.36-22.32 50.68T823-144H137Zm0-73h686v-453H451l-73-73H137v526Zm0 0v-526 526Z"],["type","button","name","Remove Path Mapping",1,"icononly-button","tertiary",3,"click","id"],["d","m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"],["id","submit","type","submit",1,"animated-button","primary",3,"click","disabled"],["d","M856-690v513q0 28.73-22.14 50.86Q811.72-104 783-104H177q-28.73 0-50.86-22.14Q104-148.27 104-177v-606q0-28.72 22.14-50.86Q148.27-856 177-856h513l166 166Zm-73 32.22L657.78-783H177v606h606v-480.78ZM479.82-238q46.18 0 78.68-32.32 32.5-32.33 32.5-78.5 0-46.18-32.32-78.68-32.33-32.5-78.5-32.5-46.18 0-78.68 32.32-32.5 32.33-32.5 78.5 0 46.18 32.32 78.68 32.33 32.5 78.5 32.5ZM226-577h374v-157H226v157Zm-49-80.78V-177v-606 125.22Z"],["id","test","type","test",1,"animated-button","primary",3,"click","disabled"],["d","M766-113q-43 0-76-26t-41-63H443q-67.76 0-111.38-43.67Q288-289.34 288-357.17T331.62-469q43.62-44 111.38-44h77q40.17 0 65.59-25.17 25.41-25.17 25.41-65t-25.35-65.33Q560.3-694 520.21-694H312q-10 37-42.5 63T194-605q-50.92 0-85.96-35.06Q73-675.12 73-726.06t35.04-86.44Q143.08-848 194-848q43 0 75.5 26.5t42.91 62.5H520q68.17 0 112.09 43.88 43.91 43.87 43.91 112 0 68.12-43.91 111.62Q588.17-448 520-448h-77q-39.76 0-64.88 25.38Q353-397.25 353-357.12 353-317 378.12-292q25.12 25 64.88 25h206q9.3-35.81 41.65-62.41Q723-356 766-356q51.33 0 86.67 35.26Q888-285.47 888-234.24 888-183 852.67-148q-35.34 35-86.67 35ZM193.68-678q20.32 0 34.82-13.68 14.5-13.69 14.5-34 0-20.32-14.27-34.82T194.14-775q-20.32 0-34.23 14.27Q146-746.46 146-726.14q0 20.32 13.68 34.23 13.69 13.91 34 13.91Z"]],template:function(r,t){if(r&1){let s=x();C(0,fi,2,0,"h2")(1,Ci,7,0),_(2,"hr"),C(3,vi,1,0,"app-load-indicator")(4,qi,47,19,"form",2),i(5,"dialog",3,0),d("click",function(){return u(s),g(t.closeCancelDialog())}),i(7,"div",4),d("click",function(h){return u(s),g(h.stopPropagation())}),i(8,"h2"),l(9,"Unsaved Changes"),n(),i(10,"p"),l(11,"Changes will be lost. Are you sure you want to cancel?"),n(),i(12,"div",5)(13,"button",6),d("click",function(){return u(s),g(t.onConfirmCancel())}),l(14,"Yes"),n(),i(15,"button",7),d("click",function(){return u(s),g(t.closeCancelDialog())}),l(16,"No"),n()()()(),i(17,"dialog",3,1),d("click",function(){return u(s),g(t.closeDeleteDialog())}),i(19,"div",4),d("click",function(h){return u(s),g(h.stopPropagation())}),i(20,"h2"),l(21,"Delete Connection"),n(),i(22,"p"),l(23,"This will Delete the connection and no longer monitor its Media"),n(),i(24,"p"),l(25,"Delete the connection?"),n(),i(26,"div",5)(27,"button",6),d("click",function(){return u(s),g(t.onConfirmDelete())}),l(28,"Delete"),n(),i(29,"button",8),d("click",function(){return u(s),g(t.closeDeleteDialog())}),l(30,"Cancel"),n()()()()}r&2&&(v(t.isCreate()?0:1),a(3),v(t.isLoading()||!t.connectionForm?3:4))},dependencies:[Gt,he,N,Ve],styles:["[_nghost-%COMP%]{width:100%;border:2px solid var(--color-outline);padding:1.5rem;display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-radius:1rem;background-color:var(--color-surface-container);transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.top-right-button[_ngcontent-%COMP%]{position:absolute;top:2rem;right:2rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:0;border:var(--color-outline);border-radius:.5rem;container-type:inline-size}.input-group[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:2px}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin:0 0 0 .5rem;font-size:smaller}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto;height:3rem;padding:.75rem;font-family:inherit;font-size:1rem;letter-spacing:1px;background-color:var(--color-surface-container-high);color:var(--color-tertiary);border:2px solid var(--color-outline);border-radius:.5rem}input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid var(--color-error);opacity:.6;background-color:var(--color-error-container);color:var(--color-on-error-container)}.input-group[_ngcontent-%COMP%]   .invalid-text[_ngcontent-%COMP%]{color:var(--color-error)}.d-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;justify-content:space-around;align-items:center}@container (width < 40rem){.d-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}.option-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}@container (width < 40rem){.option-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}.options-bar[_ngcontent-%COMP%]{padding:.25rem;display:flex;background-color:var(--color-surface-container-high);border-radius:10px;border:.5px solid var(--color-outline)}.option-label[_ngcontent-%COMP%]{padding:10px;cursor:pointer;border-radius:10px;transition:.3s ease;flex:1 1 auto;text-align:center}.option-label[_ngcontent-%COMP%]:has(input:focus-visible){outline:-webkit-focus-ring-color auto 1px}.option-name[_ngcontent-%COMP%]{border-radius:10px;border:none;transition:all .15s ease-in-out}.option__selected[_ngcontent-%COMP%]{background-color:var(--color-tertiary-container);font-weight:600;color:var(--color-on-tertiary-container);transition:.3s ease}input[type=radio][_ngcontent-%COMP%]{clip:rect(0 0 0 0);clip-path:inset(100%);width:1px;height:1px;overflow:hidden;position:absolute;white-space:nowrap}.mappings-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.d-row.mappings[_ngcontent-%COMP%]{align-items:flex-end}input[_ngcontent-%COMP%]:read-only{opacity:.8;cursor:not-allowed}.input-wrapper[_ngcontent-%COMP%]{display:inline-block;width:auto;height:3rem;position:relative}.folder-icon[_ngcontent-%COMP%]{position:absolute;inset:0 0 0 auto;cursor:pointer;height:auto;width:auto;padding:.5rem;border-radius:.5rem;border-top-left-radius:0;border-bottom-left-radius:0}.folder-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:2rem;width:2rem}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;padding:.75rem 3rem .75rem .75rem}.result-text[_ngcontent-%COMP%]{white-space:pre-wrap;color:var(--color-info);font-weight:600;line-height:1.5rem}.close-progress[_ngcontent-%COMP%]{width:100%;height:.25rem;background-color:var(--color-success-text);border-radius:.25rem;animation:_ngcontent-%COMP%_closeProgress 3s linear 0s}@keyframes _ngcontent-%COMP%_closeProgress{0%{width:100%}to{width:0%}}.dialog-content[_ngcontent-%COMP%]{background-color:var(--color-on-error-container);color:var(--color-on-error);padding:1rem;text-align:center}dialog[_ngcontent-%COMP%]::backdrop{background-image:linear-gradient(0deg,gray,#690005)}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0})}}return o})();var Ai=o=>[o],Ui=(o,m,e)=>["/",o,m,e];function Gi(o,m){o&1&&_(0,"app-load-indicator",1)}function Zi(o,m){if(o&1&&(i(0,"p"),l(1),n()),o&2){let e=f(2);A(ft("result-",e.resultType())),a(),b(e.resultMessage())}}function Qi(o,m){o&1&&_(0,"img",18)}function Wi(o,m){o&1&&_(0,"img",19)}function Hi(o,m){if(o&1&&(i(0,"div",12),_(1,"a",13),i(2,"h3",14),l(3),n(),i(4,"div",15)(5,"p"),l(6),n(),i(7,"p"),l(8),G(9,"uppercase"),n(),i(10,"p"),l(11),G(12,"date"),n()(),i(13,"div",16)(14,"a",17),C(15,Qi,1,0,"img",18)(16,Wi,1,0,"img",19),n()()()),o&2){let e,r=m.$implicit;a(),p("routerLink",V(13,Ai,r.id)),a(2),b(r.name),a(3),U("URL: ",r.url),a(2),U("Monitor: ",z(9,8,r.monitor)),a(3),U("Added: ",vt(12,10,r.added_at,"mediumDate"));let t=r.external_url.length>0?r.external_url:r.url;a(3),p("href",ht(t),dt),a(),v((e=r.arr_type)==="radarr"?15:e==="sonarr"?16:-1)}}function Bi(o,m){if(o&1&&(i(0,"div",11),T(1,Hi,17,15,"div",12,Y),n()),o&2){f(2);let e=oe(0);a(),O(e)}}function $i(o,m){if(o&1&&(i(0,"div",1)(1,"div",20),l(2,"Add New!"),n(),i(3,"p",21),l(4,`I'm all alone here!. Click the "ADD" button to add some Radarr/Sonarr instances to let the magic happen!`),n()()),o&2){let e=f(2);a(),p("routerLink",Ct(1,Ui,e.RouteSettings,e.RouteConnections,e.RouteAdd))}}function ji(o,m){if(o&1){let e=x();i(0,"div",2)(1,"h2"),l(2,"Connections"),n(),i(3,"i",3),d("click",function(){u(e);let t=f();return g(t.connectionsResource.reload())}),S(),i(4,"svg",4),_(5,"path",5),n()()(),M(),i(6,"button",6),S(),i(7,"svg",7),_(8,"path",8),n(),M(),i(9,"span",9),l(10,"Add New"),n()(),_(11,"hr"),C(12,Zi,2,4,"p",10),C(13,Bi,3,0,"div",11)(14,$i,5,5,"div",1)}if(o&2){let e=f(),r=oe(0);a(3),k("loading",e.connectionsResource.isLoading()),a(3),p("routerLink",e.RouteAdd),a(6),v(e.resultMessage()?12:-1),a(),v(r&&r.length>0?13:14)}}var $t=(()=>{class o{constructor(){this.connectionService=P(Qe),this.connectionsResource=this.connectionService.connectionsResource,this.isLoading=this.connectionsResource.isLoading,this.resultMessage=y(""),this.resultType=y(""),this.selectedId=0,this.RouteAdd="add",this.RouteConnections=X,this.RouteEdit=Ie,this.RouteSettings=qe}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=E({type:o,selectors:[["app-show-connections"]],decls:4,vars:2,consts:[[1,"sett-conn-container"],[1,"center"],[1,"title-block"],["title","Refresh",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"refresh-icon"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],[1,"animated-button","top-right-button",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"],[1,"text"],[3,"class"],[1,"connection-container"],[1,"connection-card"],[1,"card-link",3,"routerLink"],[1,"title"],[1,"content"],[1,"link-image"],["target","_blank",3,"href"],["src","assets/radarr_128.png"],["src","assets/sonarr_128.png"],[1,"all-empty-card","center",3,"routerLink"],[1,"text-primary"]],template:function(r,t){r&1&&(de(0),i(1,"div",0),C(2,Gi,1,0,"app-load-indicator",1)(3,ji,15,5),n()),r&2&&(ce(t.connectionsResource.value()),a(2),v(t.isLoading()?2:3))},dependencies:[Le,N,ge,Ve,yt],styles:[".sett-conn-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;position:relative;gap:12px}.title-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.refresh-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.loading[_ngcontent-%COMP%]{cursor:progress;animation:spin-animation 2s linear infinite}.top-right-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:10px}.center[_ngcontent-%COMP%]{margin:auto}.result-success[_ngcontent-%COMP%]{padding:10px;display:block;border-radius:4px;color:var(--color-success-text);background-color:var(--color-success)}.result-error[_ngcontent-%COMP%]{padding:10px;display:block;border-radius:4px;color:var(--color-error-text);background-color:var(--color-error)}.connection-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:1rem}.connection-card[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr auto;grid-template-columns:1fr auto;gap:10px;max-width:500px;padding:12px;border:2px solid var(--color-outline);border-radius:8px;background-color:var(--color-surface-container);color:var(--color-on-surface);position:relative}@media(max-width:765px){.connection-card[_ngcontent-%COMP%]{margin:auto;width:100%}}.card-link[_ngcontent-%COMP%]{position:absolute;inset:0}.connection-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{grid-row:1;grid-column:1/span 2;color:var(--color-primary);text-align:center}.connection-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{grid-row:2;grid-column:1}.connection-card[_ngcontent-%COMP%]   .link-image[_ngcontent-%COMP%]{grid-row:2;grid-column:2;width:auto;margin:auto;position:relative;pointer-events:none;z-index:1}.connection-card[_ngcontent-%COMP%]   .link-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem;pointer-events:all}.connection-card[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{grid-row:3;grid-column:1/span 2;display:flex;justify-content:space-between}.dialog-content[_ngcontent-%COMP%]{background-color:var(--color-on-error-container);color:var(--color-on-error);padding:1rem;text-align:center}dialog[_ngcontent-%COMP%]::backdrop{background-image:linear-gradient(0deg,gray,#690005)}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0})}}return o})();var zi=o=>["content-label",o],Ji=o=>["options-bar",o];function Yi(o,m){if(o&1&&(i(0,"small"),l(1),n()),o&2){let e=f();a(),b(e.descriptionExtra())}}function Ki(o,m){o&1&&(i(0,"span",4),l(1,"best"),n())}function Xi(o,m){if(o&1&&(i(0,"span",4),l(1),n()),o&2){let e=f().$implicit;a(),b(e)}}function en(o,m){if(o&1){let e=x();i(0,"label",2)(1,"input",3),d("change",function(){let t=u(e).$implicit,s=f();return g(s.onOptionClick(t))}),n(),C(2,Ki,2,0,"span",4)(3,Xi,2,1,"span",4),n()}if(o&2){let e=m.$implicit,r=f();p("ngClass",r.getOptionClasses(e)),a(),p("id",r.inputId+"_"+e)("name",r.inputId)("value",e)("checked",e===r.selectedOption())("disabled",r.disabledOptions().includes(e)),a(),v(e==="0"?2:3)}}var Be=(()=>{class o{constructor(){this.inputId="options-setting-"+Math.random().toString(36).substring(2,10),this.name=w.required(),this.description=w(""),this.descriptionExtra=w(""),this.options=w.required(),this.disabledOptions=w([]),this.selectedOption=w("",{transform:String}),this.colorType=w("default"),this.colorTypeOption=w(""),this.optionChange=K()}getOptionClasses(e){let r=e.toLowerCase(),t=this.colorTypeOption().toLowerCase(),s=this.selectedOption().toLowerCase(),c=["option-label"];if(r===s&&c.push("option__selected"),this.disabledOptions().includes(e)&&c.push("option__disabled"),this.colorTypeOption()!==""&&r===t){let h="option__"+this.colorType().toLowerCase();c.push(h)}return c}onOptionClick(e){this.optionChange.emit(e)}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=E({type:o,selectors:[["app-options-setting"]],inputs:{name:[1,"name"],description:[1,"description"],descriptionExtra:[1,"descriptionExtra"],options:[1,"options"],disabledOptions:[1,"disabledOptions"],selectedOption:[1,"selectedOption"],colorType:[1,"colorType"],colorTypeOption:[1,"colorTypeOption"]},outputs:{optionChange:"optionChange"},decls:9,vars:13,consts:[[3,"id"],["role","radiogroup"],[3,"ngClass"],["type","radio",3,"change","id","name","value","checked","disabled"],[1,"option-name"]],template:function(r,t){r&1&&(i(0,"div",0)(1,"span"),l(2),n(),i(3,"small"),l(4),n(),C(5,Yi,2,1,"small"),n(),i(6,"div",1),T(7,en,4,7,"label",2,R),n()),r&2&&(A(V(9,zi,"text-"+t.colorType())),p("id",t.inputId+"_label"),a(2),b(t.name()),a(2),b(t.description()),a(),v(t.descriptionExtra()?5:-1),a(),A(V(11,Ji,"border-"+t.colorType())),ct("aria-labelledby",t.inputId+"_label"),a(),O(t.options()))},dependencies:[Le,wt],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:3fr 2fr;justify-items:start;align-items:center;margin:1.5rem .5rem;gap:1rem}@container (width < 40rem){[_nghost-%COMP%]{grid-template-columns:1fr}}.content-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;gap:.5rem;width:100%}label[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-weight:700;text-wrap:nowrap}svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;cursor:pointer}.options-bar[_ngcontent-%COMP%]{padding:.25rem;display:flex;background-color:var(--color-surface-container-high);border-radius:10px}.option-label[_ngcontent-%COMP%]{padding:10px;cursor:pointer;border-radius:10px;transition:.3s ease;flex:1 1 auto;text-align:center}.option-label[_ngcontent-%COMP%]:has(input:focus-visible){outline:-webkit-focus-ring-color auto 1px}.option-name[_ngcontent-%COMP%]{border-radius:10px;border:none;transition:all .15s ease-in-out}.option__selected[_ngcontent-%COMP%]{background-color:var(--color-tertiary-container);font-weight:600;color:var(--color-on-tertiary-container);transition:.3s ease}.option__disabled[_ngcontent-%COMP%]{opacity:.8;cursor:not-allowed;text-decoration:line-through 2px var(--color-danger)}.option__warning[_ngcontent-%COMP%]{color:var(--color-warning)}.option__selected.option__warning[_ngcontent-%COMP%]{background-color:var(--color-warning);color:var(--color-warning-text)}.option__danger[_ngcontent-%COMP%]{color:var(--color-error)}.option__selected.option__danger[_ngcontent-%COMP%]{background-color:var(--color-error-container);color:var(--color-on-error-container)}input[_ngcontent-%COMP%]{clip:rect(0 0 0 0);clip-path:inset(100%);width:1px;height:1px;overflow:hidden;position:absolute;white-space:nowrap}"],changeDetection:0})}}return o})();var tn=o=>["content-label",o];function nn(o,m){if(o&1&&(i(0,"small"),l(1),n()),o&2){let e=f();a(),b(e.descriptionExtra())}}function on(o,m){if(o&1){let e=x();i(0,"button",6),d("click",function(){u(e);let t=f();return g(t.openPathSelectDialog())}),S(),i(1,"svg",7),_(2,"path",8),n()()}}function rn(o,m){if(o&1){let e=x();i(0,"button",9),d("click",function(){u(e);let t=f();return g(t.resetValue())}),S(),i(1,"svg",7),_(2,"path",10),n()(),M(),i(3,"button",11),d("click",function(){u(e);let t=f();return g(t.onSubmitValue())}),S(),i(4,"svg",7),_(5,"path",12),n()()}if(o&2){let e=f();p("id",e.inputId+"reset")("title","Reset "+e.name()),a(3),p("id",e.inputId+"update")("title","Update "+e.name())}}var $e=(()=>{class o{constructor(){this.inputId="text-setting-"+Math.random().toString(36).substring(2,10),this.viewContainerRef=P(ke),this.name=w.required(),this.description=w(""),this.descriptionExtra=w(""),this.isNumberType=w.required(),this.isLongInput=w.required(),this.showFolderButton=w(!1),this.pathShouldEndWith=w(""),this.placeholder=w(""),this.value=me.required(),this.minLength=w(0),this.maxLength=w(150),this.autocomplete=w("off"),this.disabled=w(!1),this.colorType=w("default"),this.oldValue=y(""),this.onSubmit=K()}ngOnChanges(){this.oldValue.set(this.value())}openPathSelectDialog(){let e=this.viewContainerRef.createComponent(He);e.setInput("name",this.name()),e.setInput("path",this.value()),e.setInput("pathShouldEndWith",this.pathShouldEndWith()),e.instance.onSubmit.subscribe(r=>{r&&(this.value.set(r),this.onSubmitValue()),setTimeout(()=>{e.destroy()},2e3)})}resetValue(){this.value.set(this.oldValue())}onSubmitValue(){let e=this.value();e=e.toString().trim(),this.onSubmit.emit(e),this.oldValue.set(e)}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=E({type:o,selectors:[["app-text-setting"]],inputs:{name:[1,"name"],description:[1,"description"],descriptionExtra:[1,"descriptionExtra"],isNumberType:[1,"isNumberType"],isLongInput:[1,"isLongInput"],showFolderButton:[1,"showFolderButton"],pathShouldEndWith:[1,"pathShouldEndWith"],placeholder:[1,"placeholder"],value:[1,"value"],minLength:[1,"minLength"],maxLength:[1,"maxLength"],autocomplete:[1,"autocomplete"],disabled:[1,"disabled"],colorType:[1,"colorType"]},outputs:{value:"valueChange",onSubmit:"onSubmit"},features:[Oe],decls:12,vars:28,consts:[[1,"content"],[3,"for"],[1,"content-input"],[1,"wrapper"],[3,"ngModelChange","id","type","disabled","ngModel","minlength","maxlength","placeholder","autocomplete"],[1,"tertiary","folder-icon"],[1,"tertiary","folder-icon",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M137-144q-28.72 0-50.86-22.32T64-217v-526q0-28.36 22.14-50.68T137-816h271l73 73h342q28.36 0 50.68 22.32T896-670v453q0 28.36-22.32 50.68T823-144H137Zm0-73h686v-453H451l-73-73H137v526Zm0 0v-526 526Z"],[1,"secondary","icononly-button",3,"click","id","title"],["d","M263-179.67v-84h317.67q65 0 110.83-45.5t45.83-110.5q0-64.33-45.83-110.16-45.83-45.84-110.83-45.84H297.33l104 104-58.66 57.34-204-203 204-204 58.66 57.66-104 104H580q99.67 0 170.5 70.17t70.83 169.83q0 100.34-70.83 170.17-70.83 69.83-170.5 69.83H263Z"],[1,"primary","icononly-button",3,"click","id","title"],["d","M378-235 142-471l52-52 184 184 388-388 52 52-440 440Z"]],template:function(r,t){r&1&&(i(0,"div",0)(1,"div")(2,"label",1),l(3),n(),i(4,"small"),l(5),n(),C(6,nn,2,1,"small"),n(),i(7,"div",2)(8,"div",3)(9,"input",4),I("ngModelChange",function(c){return F(t.value,c)||(t.value=c),c}),n(),C(10,on,3,0,"button",5),n(),C(11,rn,6,4),n()()),r&2&&(a(),A(V(26,tn,"text-"+t.colorType())),a(),p("for",t.inputId),a(),b(t.name()),a(2),b(t.description()),a(),v(t.descriptionExtra()?6:-1),a(2),k("wrapper__long",t.isLongInput()),a(),A("border-"+t.colorType()),k("input__long",t.isLongInput())("input__folder",t.showFolderButton())("input__disabled",t.disabled()),p("id",t.inputId)("type",t.isNumberType()?"number":"text")("disabled",t.disabled()),L("ngModel",t.value),p("minlength",t.minLength())("maxlength",t.maxLength())("placeholder",t.placeholder())("autocomplete",t.autocomplete()),a(),v(t.showFolderButton()?10:-1),a(),v(t.value()!=t.oldValue()&&!t.disabled()?11:-1))},dependencies:[q,Q,W,Ne,Ft,H],styles:["[_nghost-%COMP%]{display:contents}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 2fr;justify-items:start;align-items:center;margin:1.5rem .5rem;gap:1rem}@container (width < 40rem){.content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.content-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;gap:.5rem;width:100%}label[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-weight:700;text-wrap:nowrap}svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;cursor:pointer}button[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}@container (width < 40rem){button[_ngcontent-%COMP%]{width:2rem;height:2rem}}.content-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem;width:100%;max-width:100%;overflow:hidden}.wrapper[_ngcontent-%COMP%]{display:inline-block;width:5rem;height:3rem;position:relative}.folder-icon[_ngcontent-%COMP%]{position:absolute;inset:0 0 0 auto;cursor:pointer;height:auto;width:auto;padding:.5rem;border-radius:.5rem;border-top-left-radius:0;border-bottom-left-radius:0}.folder-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:2rem;width:2rem}input[_ngcontent-%COMP%]{width:100%;height:100%;padding:.25rem;text-align:center;font-family:inherit;background-color:var(--color-surface-container-high);color:var(--color-on-surface);border-radius:.5rem}.wrapper__long[_ngcontent-%COMP%]{width:auto;flex:1;max-width:calc(100% - 6rem)}@container (width < 40rem){.wrapper__long[_ngcontent-%COMP%]{width:auto;max-width:none}}.input__long[_ngcontent-%COMP%]{field-sizing:content;font-size:larger}.input__folder[_ngcontent-%COMP%]{padding:.25rem 3rem .25rem .25rem}.input__disabled[_ngcontent-%COMP%]{background-color:var(--color-surface-container-low);cursor:not-allowed;text-decoration:line-through 2px var(--color-danger)}"],changeDetection:0})}}return o})();function an(o,m){o&1&&_(0,"app-load-indicator",0)}function ln(o,m){if(o&1&&(i(0,"li"),l(1),n()),o&2){let e=m.$implicit;a(),b(e)}}function sn(o,m){if(o&1&&(i(0,"div",1)(1,"ul"),T(2,ln,2,1,"li",null,Y),n()()),o&2){let e=f();a(2),O(e.warningMessages())}}function pn(o,m){if(o&1){let e=x();i(0,"app-options-setting",18),d("optionChange",function(t){u(e);let s=f();return g(s.updateSetting("delete_trailer_media",t))}),n()}if(o&2){let e,r=f();p("options",r.trueFalseOptions)("colorType","danger")("colorTypeOption","true")("selectedOption",(e=r.settings())==null?null:e.delete_trailer_media)}}function dn(o,m){if(o&1){let e=x();i(0,"app-options-setting",19),d("optionChange",function(t){u(e);let s=f();return g(s.updateSetting("gpu_enabled_nvidia",t))}),n()}if(o&2){let e,r=f();p("options",r.trueFalseOptions)("selectedOption",(e=r.settings())==null?null:e.gpu_enabled_nvidia)("colorType","warning")("colorTypeOption","true")}}function cn(o,m){if(o&1){let e=x();i(0,"app-options-setting",20),d("optionChange",function(t){u(e);let s=f();return g(s.updateSetting("gpu_enabled_intel",t))}),n()}if(o&2){let e,r=f();p("options",r.trueFalseOptions)("selectedOption",(e=r.settings())==null?null:e.gpu_enabled_intel)("colorType","warning")("colorTypeOption","true")}}function mn(o,m){if(o&1){let e=x();i(0,"app-options-setting",21),d("optionChange",function(t){u(e);let s=f();return g(s.updateSetting("gpu_enabled_amd",t))}),n()}if(o&2){let e,r=f();p("options",r.trueFalseOptions)("selectedOption",(e=r.settings())==null?null:e.gpu_enabled_amd)("colorType","warning")("colorTypeOption","true")}}var jt=(()=>{class o{constructor(){this.settingsService=P(_e),this.webSocketService=P(It),this.isLoading=this.settingsService.settingsResource.isLoading,this.settings=this.settingsService.settingsResource.value,this.loggingOptions=["Debug","Info","Warning","Error"],this.trueFalseOptions=["true","false"],this.themeOptions=["Auto","Dark","Light"],this.helpLinks={general:"https://nandyalu.github.io/trailarr/user-guide/settings/general-settings/",files:"https://nandyalu.github.io/trailarr/user-guide/settings/general-settings/#file-settings",advanced:"https://nandyalu.github.io/trailarr/user-guide/settings/general-settings/#advanced-settings",deleteTrailers:"https://nandyalu.github.io/trailarr/user-guide/settings/general-settings/#delete-trailer-settings",experimental:"https://nandyalu.github.io/trailarr/user-guide/settings/general-settings/#experimental-settings"},this.warningMessages=Z(()=>{let e=[];return this.settings()?.log_level==="DEBUG"&&e.push("Log Level set to 'Debug', this will generate too many logs in the console, change it if not needed!"),this.settings()?.monitor_enabled===!1&&e.push("Monitor is disabled, trailers will not be downloaded automatically."),e})}toTitleCase(e){return e.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" ")}updateSetting(e,r){this.settingsService.updateSetting(e,r).subscribe(t=>{let s=t.toLowerCase().includes("error")?"Error":"Success";this.webSocketService.showToast(t,s),this.settingsService.settingsResource.reload()})}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=E({type:o,selectors:[["app-trailer"]],decls:61,vars:47,consts:[[1,"center"],[1,"border-warning","sticky-warning"],["open",""],[3,"link"],[1,"setting-group"],["name","Monitor Enabled","description","Monitor media from Radarr/Sonarr to download trailers.",3,"optionChange","options","selectedOption"],["name","Monitor Interval","description","Frequency (in minutes) to get new media data from Radarr/Sonarr.","descriptionExtra","Default is 60. Minuimum is 10. Container restart required to apply new interval.","placeholder","Monitor Interval","autocomplete","off",3,"onSubmit","isNumberType","isLongInput","minLength","maxLength","value","disabled"],["name","Theme","description","Select application theme.",3,"optionChange","options","selectedOption"],["name","Wait for Media","description","Wait for media to be imported into Radarr/Sonarr before downloading trailers.",3,"optionChange","options","selectedOption"],["name","Log Level","description","Set logging level for the app.",3,"optionChange","options","selectedOption"],["name","Yt-dlp Cookies Path","description","Path to yt-dlp cookies file to use for downloading trailers.","pathShouldEndWith",".txt","placeholder","/config/cookies.txt","autocomplete","off",3,"onSubmit","isNumberType","isLongInput","showFolderButton","minLength","maxLength","value"],["name","On Deleting from Connection","description","Delete trailers when media is removed from the connected Radarr/Sonarr instance.",3,"optionChange","options","colorType","colorTypeOption","selectedOption"],["name","Only if Media Files Deleted","description","Delete trailers for media removed from Arr only when media files doesn't exist on disk.",3,"options","colorType","colorTypeOption","selectedOption"],["name","NVIDIA GPU Acceleration","description","Use NVIDIA GPU for hardware acceleration.",3,"options","selectedOption","colorType","colorTypeOption"],["name","Intel GPU Acceleration","description","Use Intel GPU for hardware acceleration (VAAPI).",3,"options","selectedOption","colorType","colorTypeOption"],["name","AMD GPU Acceleration","description","Use AMD GPU for hardware acceleration (AMF).",3,"options","selectedOption","colorType","colorTypeOption"],["name","Update Yt-dlp","description","Update yt-dlp to latest version during container startup.","descriptionExtra","You need to restart the container to apply updates.",3,"optionChange","options","selectedOption","colorType","colorTypeOption"],["name","URL Base","description","URL Base for use with reverse proxy configuration","descriptionExtra","Restart required to take effect!","placeholder","trailarr","autocomplete","off",3,"onSubmit","isNumberType","isLongInput","minLength","maxLength","value","colorType"],["name","Only if Media Files Deleted","description","Delete trailers for media removed from Arr only when media files doesn't exist on disk.",3,"optionChange","options","colorType","colorTypeOption","selectedOption"],["name","NVIDIA GPU Acceleration","description","Use NVIDIA GPU for hardware acceleration.",3,"optionChange","options","selectedOption","colorType","colorTypeOption"],["name","Intel GPU Acceleration","description","Use Intel GPU for hardware acceleration (VAAPI).",3,"optionChange","options","selectedOption","colorType","colorTypeOption"],["name","AMD GPU Acceleration","description","Use AMD GPU for hardware acceleration (AMF).",3,"optionChange","options","selectedOption","colorType","colorTypeOption"]],template:function(r,t){if(r&1&&(i(0,"h2"),l(1,"General Settings"),n(),_(2,"hr"),C(3,an,1,0,"app-load-indicator",0),C(4,sn,4,0,"div",1),i(5,"section")(6,"details",2)(7,"summary")(8,"span"),l(9,"General"),n(),_(10,"help-link-icon",3),n(),_(11,"hr"),i(12,"div",4)(13,"app-options-setting",5),d("optionChange",function(c){return t.updateSetting("monitor_enabled",c)}),n(),i(14,"app-text-setting",6),d("onSubmit",function(c){return t.updateSetting("monitor_interval",c)}),n(),i(15,"app-options-setting",7),G(16,"titlecase"),d("optionChange",function(c){return t.updateSetting("app_theme",c)}),n()()()(),i(17,"section")(18,"details",2)(19,"summary")(20,"span"),l(21,"Files"),n(),_(22,"help-link-icon",3),n(),_(23,"hr"),i(24,"div",4)(25,"app-options-setting",8),d("optionChange",function(c){return t.updateSetting("wait_for_media",c)}),n()()()(),i(26,"section")(27,"details",2)(28,"summary")(29,"span"),l(30,"Advanced Options"),n(),_(31,"help-link-icon",3),n(),_(32,"hr"),i(33,"div",4)(34,"app-options-setting",9),d("optionChange",function(c){return t.updateSetting("log_level",c)}),n(),i(35,"app-text-setting",10),d("onSubmit",function(c){return t.updateSetting("yt_cookies_path",c)}),n()()()(),i(36,"section")(37,"details",2)(38,"summary")(39,"span"),l(40,"Delete Trailers"),n(),_(41,"help-link-icon",3),n(),_(42,"hr"),i(43,"div",4)(44,"app-options-setting",11),d("optionChange",function(c){return t.updateSetting("delete_trailer_connection",c)}),n(),C(45,pn,1,4,"app-options-setting",12),n()()(),i(46,"section")(47,"details",2)(48,"summary")(49,"span"),l(50,"Experimental Options"),n(),_(51,"help-link-icon",3),n(),_(52,"hr"),i(53,"div",4)(54,"p"),l(55,"These are experimental options, might not work as expected!"),n(),C(56,dn,1,4,"app-options-setting",13),C(57,cn,1,4,"app-options-setting",14),C(58,mn,1,4,"app-options-setting",15),i(59,"app-options-setting",16),d("optionChange",function(c){return t.updateSetting("update_ytdlp",c)}),n(),i(60,"app-text-setting",17),d("onSubmit",function(c){return t.updateSetting("url_base",c)}),n()()()()),r&2){let s,c,h,D,ae,te,Ce,ve,be,we,xe,Se,ye;a(3),v(t.isLoading()?3:-1),a(),v(t.warningMessages().length>0?4:-1),a(6),p("link",t.helpLinks.general),a(3),p("options",t.trueFalseOptions)("selectedOption",(s=t.settings())==null?null:s.monitor_enabled),a(),p("isNumberType",!0)("isLongInput",!1)("minLength",1)("maxLength",6)("value",((c=t.settings())==null?null:c.monitor_interval)??60)("disabled",!1),a(),p("options",t.themeOptions)("selectedOption",z(16,45,(h=t.settings())==null?null:h.app_theme)),a(7),p("link",t.helpLinks.files),a(3),p("options",t.trueFalseOptions)("selectedOption",(D=t.settings())==null?null:D.wait_for_media),a(6),p("link",t.helpLinks.advanced),a(3),p("options",t.loggingOptions)("selectedOption",t.toTitleCase(((ae=t.settings())==null?null:ae.log_level)??"INFO")),a(),p("isNumberType",!1)("isLongInput",!0)("showFolderButton",!0)("minLength",0)("maxLength",255)("value",((te=t.settings())==null?null:te.yt_cookies_path)??""),a(6),p("link",t.helpLinks.deleteTrailers),a(3),p("options",t.trueFalseOptions)("colorType","danger")("colorTypeOption","true")("selectedOption",(Ce=t.settings())==null?null:Ce.delete_trailer_connection),a(),v((ve=t.settings())!=null&&ve.delete_trailer_connection?45:-1),a(6),p("link",t.helpLinks.experimental),a(5),v((be=t.settings())!=null&&be.gpu_available_nvidia?56:-1),a(),v((we=t.settings())!=null&&we.gpu_available_intel?57:-1),a(),v((xe=t.settings())!=null&&xe.gpu_available_amd?58:-1),a(),p("options",t.trueFalseOptions)("selectedOption",(Se=t.settings())==null?null:Se.update_ytdlp)("colorType","warning")("colorTypeOption","true"),a(),p("isNumberType",!1)("isLongInput",!0)("minLength",0)("maxLength",255)("value",((ye=t.settings())==null?null:ye.url_base)??"")("colorType","danger")}},dependencies:[q,he,N,Be,$e,St],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:12px}.center[_ngcontent-%COMP%]{position:fixed;inset:50vh 50vw;transform:translate(-50%,-50%);align-self:center;justify-self:center;margin:auto}.sticky-warning[_ngcontent-%COMP%]{position:sticky;top:122px;z-index:10;padding:0 1rem;margin:.5rem 0;border-radius:.5rem;font-size:larger;font-weight:600;color:var(--color-warning);background-color:var(--color-surface-container)}details[_ngcontent-%COMP%]{margin:.5rem 0;border:1px solid var(--color-outline);border-radius:.5rem;background-color:var(--color-surface-container)}summary[_ngcontent-%COMP%]{padding:1rem;font-weight:700;cursor:pointer;color:var(--color-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:calc(100vw - 260px);display:flex;align-items:center;justify-content:space-between}@media(width<1100px){summary[_ngcontent-%COMP%]{max-width:calc(100vw - 100px)}}@media(width<765px){summary[_ngcontent-%COMP%]{max-width:calc(100vw - 50px)}}.setting-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 .5rem;container-type:inline-size}"],changeDetection:0})}}return o})();var un=o=>["content-label",o];function gn(o,m){if(o&1&&(i(0,"small"),l(1),n()),o&2){let e=f();a(),b(e.descriptionExtra())}}function _n(o,m){if(o&1){let e=x();i(0,"button",4),d("click",function(){u(e);let t=f();return g(t.resetValue())}),S(),i(1,"svg",5),_(2,"path",6),n()(),M(),i(3,"button",7),d("click",function(){u(e);let t=f();return g(t.onSubmitValue())}),S(),i(4,"svg",5),_(5,"path",8),n()()}if(o&2){let e=f();p("id",e.inputId+"reset")("title","Reset "+e.name()),a(3),p("id",e.inputId+"update")("title","Update "+e.name())}}var zt=(()=>{class o{constructor(){this.inputId="range-setting-"+Math.random().toString(36).substring(2,10),this.name=w.required(),this.description=w(""),this.descriptionExtra=w(""),this.value=me.required(),this.minValue=w(0),this.maxValue=w(150),this.stepValue=w(5),this.disabled=w(!1),this.colorType=w("default"),this.oldValue=y(""),this.onSubmit=K()}ngOnInit(){this.oldValue.set(this.value())}resetValue(){this.value.set(this.oldValue())}onSubmitValue(){let e=this.value();e=e.toString().trim(),this.onSubmit.emit(e),this.oldValue.set(e)}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=E({type:o,selectors:[["app-range-setting"]],inputs:{name:[1,"name"],description:[1,"description"],descriptionExtra:[1,"descriptionExtra"],value:[1,"value"],minValue:[1,"minValue"],maxValue:[1,"maxValue"],stepValue:[1,"stepValue"],disabled:[1,"disabled"],colorType:[1,"colorType"]},outputs:{value:"valueChange",onSubmit:"onSubmit"},decls:11,vars:18,consts:[[3,"for"],[1,"content-input"],["type","range",3,"ngModelChange","id","disabled","ngModel","min","max","step"],[1,"content-input__value"],[1,"secondary","icononly-button",3,"click","id","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M263-179.67v-84h317.67q65 0 110.83-45.5t45.83-110.5q0-64.33-45.83-110.16-45.83-45.84-110.83-45.84H297.33l104 104-58.66 57.34-204-203 204-204 58.66 57.66-104 104H580q99.67 0 170.5 70.17t70.83 169.83q0 100.34-70.83 170.17-70.83 69.83-170.5 69.83H263Z"],[1,"primary","icononly-button",3,"click","id","title"],["d","M378-235 142-471l52-52 184 184 388-388 52 52-440 440Z"]],template:function(r,t){r&1&&(i(0,"div")(1,"label",0),l(2),n(),i(3,"small"),l(4),n(),C(5,gn,2,1,"small"),n(),i(6,"div",1)(7,"input",2),I("ngModelChange",function(c){return F(t.value,c)||(t.value=c),c}),n(),i(8,"span",3),l(9),n(),C(10,_n,6,4),n()),r&2&&(A(V(16,un,"text-"+t.colorType())),a(),p("for",t.inputId),a(),b(t.name()),a(2),b(t.description()),a(),v(t.descriptionExtra()?5:-1),a(2),k("input__disabled",t.disabled()),p("id",t.inputId)("disabled",t.disabled()),L("ngModel",t.value),p("min",t.minValue())("max",t.maxValue())("step",t.stepValue()),a(2),b(t.value()),a(),v(t.value()!=t.oldValue()&&!t.disabled()?10:-1))},dependencies:[q,Q,Vt,W,H],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:3fr 2fr;justify-items:start;align-items:center;margin:1.5rem .5rem;gap:1rem}@container (width < 40rem){[_nghost-%COMP%]{grid-template-columns:1fr}}.content-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;gap:.5rem;width:100%}label[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-weight:700;text-wrap:nowrap}svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;cursor:pointer}button[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}@container (width < 40rem){button[_ngcontent-%COMP%]{width:2rem;height:2rem}}.content-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem;width:100%;max-width:100%;overflow:hidden}input[_ngcontent-%COMP%]{width:15vw;max-width:25rem;height:3rem;padding:.25rem;text-align:center;font-family:inherit;background-color:var(--color-surface-container-high);color:var(--color-on-surface);border:1px solid var(--color-outline);border-radius:.5rem}@container (width < 40rem){input[_ngcontent-%COMP%]{flex:1;width:auto;max-width:50vw;height:2rem}}.content-input__value[_ngcontent-%COMP%]{text-align:center;align-self:center;width:3ch}.input__disabled[_ngcontent-%COMP%]{background-color:var(--color-surface-container-low);cursor:not-allowed;text-decoration:line-through 2px var(--color-danger)}"],changeDetection:0})}}return o})();var hn=["deleteProfileDialog"],fn=["copyProfileDialog"],Cn=["jsonEditDialog"],vn=(o,m)=>m.id;function bn(o,m){o&1&&_(0,"app-load-indicator",5)}function wn(o,m){if(o&1&&(i(0,"li"),l(1),n()),o&2){let e=m.$implicit;a(),b(e)}}function xn(o,m){if(o&1&&(i(0,"div",14)(1,"ul"),T(2,wn,2,1,"li",null,Y),n()()),o&2){let e=f();a(2),O(e.invalidFormatsWarning())}}function Sn(o,m){if(o&1){let e=x();i(0,"app-text-setting",60),d("onSubmit",function(t){u(e);let s=f();return g(s.profileService.updateSetting("folder_name",t))}),n()}if(o&2){let e,r,t=f();p("isNumberType",!1)("isLongInput",!0)("placeholder","Folder Name")("autocomplete","off")("minLength",1)("maxLength",50)("value",((e=t.profile())==null?null:e.folder_name)??"")("disabled",!((r=t.profile())!=null&&r.folder_enabled))}}function yn(o,m){if(o&1&&(i(0,"tr")(1,"td"),l(2),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n()()),o&2){let e=m.$implicit;a(2),b(e.filter_by),a(2),b(e.filter_condition),a(2),b(e.filter_value)}}function Pn(o,m){if(o&1&&(i(0,"table",42)(1,"thead")(2,"tr")(3,"th"),l(4,"Column"),n(),i(5,"th"),l(6,"Condition"),n(),i(7,"th"),l(8,"Value"),n()()(),i(9,"tbody"),T(10,yn,7,3,"tr",null,vn),n()()),o&2){let e,r=f();a(10),O((e=r.profile())==null||e.customfilter==null?null:e.customfilter.filters)}}function En(o,m){o&1&&(i(0,"p"),l(1,"No filters defined for this profile."),n())}function Mn(o,m){o&1&&le(0,En,2,0,"ng-template",null,4,De)}function Tn(o,m){if(o&1){let e=x();i(0,"edit-filter-dialog",61),d("dialogClosed",function(t){u(e);let s=f();return g(s.onFilterDialogClosed(t))}),n()}if(o&2){let e=f();p("filterType","TRAILER")("customFilter",e.customFilter())}}var Jt=(()=>{class o{constructor(){this.profileService=P(Re),this.router=P(ue),this.profileId=w(0,{transform:e=>{let r=Number(e);return isNaN(r)?0:r}}),this.profile=this.profileService.selectedProfile,this.newProfileName=y(""),this.profileJSON=y("{}"),this.editFilterDialogOpen=y(!1),this.minLimitMax=Z(()=>{let e=this.profile();return e&&e.max_duration?e.max_duration-60:540}),this.maxLimitMin=Z(()=>{let e=this.profile();return e&&e.min_duration?e.min_duration+60:90}),this.trueFalseOptions=["true","false"],this.fileFormatOptions=["mkv","mp4","webm"],this.audioFormatOptions=["aac","ac3","eac3","flac","opus","copy"],this.videoFormatOptions=["h264","h265","vp8","vp9","av1","copy"],this.videoResolutionOptions=["480","720","1080","1440","2160","0"],this.subtitleFormatOptions=["srt","vtt"],this.helpLinks={general:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/settings/general/",file:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/settings/file/",audio:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/settings/audio/",video:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/settings/video/",subtitle:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/settings/subtitle/",search:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/settings/search/",filters:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/filters/"},this.fileFormatsDisabled=Z(()=>{let e=this.profile(),r=[];if(!e)return r;switch(e.video_resolution===0&&(r.push("mp4"),r.push("webm")),e.video_format){case"copy":r.push("mp4"),r.push("webm");break;case"h264":case"h265":r.push("webm");break;case"vp8":case"vp9":r.push("mp4");break}switch(e.audio_format){case"copy":r.push("mp4"),r.push("webm");break;case"aac":case"ac3":case"eac3":case"flac":r.push("webm");break}return r}),this.videoFormatsDisabled=Z(()=>{let e=this.profile(),r=[];if(!e)return r;switch(e.video_resolution===0&&(r.push("h264"),r.push("h265"),r.push("vp8"),r.push("vp9"),r.push("av1")),e.file_format){case"mp4":r.push("vp8"),r.push("vp9");break;case"webm":r.push("h264"),r.push("h265");break}return r}),this.audioFormatsDisabled=Z(()=>{let e=this.profile(),r=[];if(!e)return r;switch(e.video_resolution===0&&(r.push("aac"),r.push("ac3"),r.push("eac3"),r.push("flac"),r.push("opus")),e.file_format){case"webm":r.push("aac"),r.push("ac3"),r.push("eac3"),r.push("flac");break}return r}),this.invalidFormatsWarning=Z(()=>{let e=this.profile();if(!e)return[];let r=[];switch(e.video_resolution===0&&(e.file_format!=="mkv"&&r.push('Video resolution "best" requires file format "mkv".'),e.video_format!=="copy"&&r.push('Video resolution "best" requires video format "copy".'),e.audio_format!=="copy"&&r.push('Video resolution "best" requires audio format "copy".')),e.video_format){case"copy":e.file_format!=="mkv"&&r.push('Video format "copy" requires file format "mkv".');break;case"h264":case"h265":e.file_format==="webm"&&r.push(`Video format "${e.video_format}" is not compatible with file format "webm".`);break;case"vp8":case"vp9":e.file_format==="mp4"&&r.push(`Video format "${e.video_format}" is not compatible with file format "mp4".`);break}switch(e.audio_format){case"copy":e.file_format!=="mkv"&&r.push('Audio format "copy" requires file format "mkv".');break;case"aac":case"ac3":case"eac3":case"flac":e.file_format==="webm"&&r.push(`Audio format "${e.audio_format}" is not compatible with file format "webm".`);break}return r}),this.isLoading=!1,this.emptyCustomFilter={id:-1,filter_name:"",filter_type:"TRAILER",filters:[]},this.customFilter=Z(()=>{let e=this.profile();return e&&e.customfilter?e.customfilter:this.emptyCustomFilter}),this.setProfileIDeffect=ne(()=>{let e=this.profileId();if(this.profileService.allProfiles.isLoading()){console.log("Profile data is still loading. Waiting for it to complete.");return}if(!this.profileService.profileExists(e)){console.warn(`Profile with ID '${e}' does not exist. Redirecting to profiles list.`),this.router.navigate(["/settings/profiles"]);return}this.profileService.selectedProfileId.set(e),e<=0&&this.openFilterDialog()}),this.deleteDialog=J.required("deleteProfileDialog"),this.copyProfileDialog=J.required("copyProfileDialog"),this.jsonEditDialog=J.required("jsonEditDialog"),this.closeDeleteDialog=()=>this.deleteDialog().nativeElement.close(),this.showDeleteDialog=()=>this.deleteDialog().nativeElement.showModal(),this.closeCopyProfileDialog=()=>this.copyProfileDialog().nativeElement.close(),this.showCopyProfileDialog=()=>{let e=this.profile().customfilter.filter_name+" - Copy";this.newProfileName.set(e),this.copyProfileDialog().nativeElement.showModal()},this.closeJsonEditDialog=()=>this.jsonEditDialog().nativeElement.close(),this.showJsonEditDialog=()=>{this.profileJSON.set(JSON.stringify(this.profile(),null,2)),this.jsonEditDialog().nativeElement.showModal()}}openFilterDialog(){this.editFilterDialogOpen.set(!0)}onFilterDialogClosed(e){this.editFilterDialogOpen.set(!1),e!=-1&&this.profileService.allProfiles.reload()}onConfirmCopy(){let e=Te(ie({},this.profile()),{id:null,customfilter:Te(ie({},this.customFilter()),{filters:this.customFilter().filters.map(r=>Te(ie({},r),{id:null})),filter_name:this.newProfileName(),id:null})});console.log("Profile copied:",e),this.profileService.createProfile(e).subscribe(r=>{r?(this.closeCopyProfileDialog(),this.router.navigate(["/settings/profiles",r])):console.error("Failed to create new profile. Please try again.")})}onJsonEditSave(){try{let e=JSON.parse(this.profileJSON());console.log("Profile updated:",e),this.profileService.updateProfile(e).subscribe(r=>{r&&this.closeJsonEditDialog()})}catch(e){console.error("Invalid JSON format:",e)}}onConfirmDelete(){this.closeDeleteDialog(),this.profileService.deleteProfile(this.profileId()),this.router.navigate(["/settings/profiles"])}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=E({type:o,selectors:[["app-edit-profile"]],viewQuery:function(r,t){r&1&&se(t.deleteDialog,hn,5)(t.copyProfileDialog,fn,5)(t.jsonEditDialog,Cn,5),r&2&&pe(3)},inputs:{profileId:[1,"profileId"]},decls:161,vars:122,consts:[["deleteProfileDialog",""],["copyProfileDialog",""],["jsonEditDialog",""],["jsonEditor",""],["noFilters",""],[1,"center"],[1,"title-block"],["title","Edit Profile Name",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"edit-icon"],["d","M177-177h44l462-460.6-44-44.4-462 460.6v44.4Zm-73 73v-146l590-590q8-7 18-11t21.5-4q10.5 0 20 3.5T772-841l69 69q8 9 11.5 19t3.5 20q0 11-4 21.5t-10.67 17.17L250-104H104Zm672-630-41-41 41 41Zm-114 74-23-22 44 44-21-22Z"],[1,"icon-button","danger","top-right-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M259.09-114.02q-28.45 0-48.41-19.89-19.96-19.89-19.96-48.24v-565.94h-45.07v-68.13h198.28v-34.3h271.9v34.3h198.52v68.13h-45.07v565.94q0 27.6-20.33 47.86-20.34 20.27-48.04 20.27H259.09Zm441.82-634.07H259.09v565.94h441.82v-565.94ZM363.89-266.24h64.07v-399h-64.07v399Zm168.15 0h64.31v-399h-64.31v399ZM259.09-748.09v565.94-565.94Z"],[1,"text"],[1,"border-warning","sticky-warning"],["open",""],[3,"link"],[1,"setting-group"],["name","Profile Enabled","description","Enable or disable this profile",3,"optionChange","options","selectedOption"],["name","Priority","description","Priority level for this profile. Default is 0. Minimum is 0. Maximum is 1000.","descriptionExtra","When multiple profiles match, the one with the highest priority will be used first.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Stop Monitoring","description","Stop monitoring media that use this profile after successful download and save YouTube ID.","descriptionExtra","Set this to 'false' for non-trailer Profiles and 'true' for trailer Profiles.",3,"optionChange","options","selectedOption"],["name","File Format","description","Final file format(extension) of the trailer file.",3,"optionChange","options","selectedOption","disabledOptions"],["name","File Name","description","File name to use for downloaded trailers.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Folder Enabled","description","Save trailer file in a seperate folder inside Media folder.",3,"optionChange","options","selectedOption"],["name","Folder Name","description","Name of the folder to save trailer file.",3,"isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Custom Save Folder Path","description","Custom path to save trailer file.","descriptionExtra","Default is '{media_folder}'. Use this to save downloaded trailers to a different location.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value"],["name","Embed Metadata","description","Embed info from YouTube video in the trailer file.",3,"optionChange","options","selectedOption"],["name","Remove Silence","description","Detect and remove silence (3s+, 30dB) from the end of the trailer file.",3,"optionChange","options","selectedOption"],["name","Audio Format","description","Final audio format(codec) of the trailer file.",3,"optionChange","options","disabledOptions","selectedOption"],["name","Audio Volume Level","description","Volume level of the audio in the trailer file. Value less than 100 will reduce the loudness and viceversa!","descriptionExtra","Default is 100 (Full Volume). Minimum is 1. Maximum is 200.",3,"onSubmit","minValue","maxValue","stepValue","value","disabled","colorType"],["name","Video Format","description","Final video format(codec) of the trailer file.",3,"optionChange","options","disabledOptions","selectedOption"],["name","Video Resolution","description","Resolution of the trailer video file.",3,"optionChange","options","selectedOption"],["name","Subtitles Enabled","description","Enable or disable subtitle download for this profile.",3,"optionChange","options","selectedOption"],["name","Subtitles Format","description","Final subtitle format of the trailer file.",3,"optionChange","options","selectedOption"],["name","Subtitles Language","description","Language of the subtitle to download. Use 2-letter ISO language code.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Search Query","description","Query to use when searching for trailers on YouTube.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Min Duration","description","Minimum video duration (in seconds) to consider while searching.","descriptionExtra","Default is 30. Minimum is 30. Should be atmost `Maximum Duration - 60`.",3,"onSubmit","minValue","maxValue","value","disabled"],["name","Max Duration","description","Maximum video duration (in seconds) to consider while searching.","descriptionExtra","Default is 600. Maximum is 600. Should be atleast `Minimum Duration + 60`.",3,"onSubmit","minValue","maxValue","value","disabled"],["name","Always Search","description","Enable this to always search for trailers, ignoring the youtube id received from Radarr.",3,"optionChange","options","selectedOption"],["name","Include Words in Title","description","Download a video only if certain words exist in video title. Comma-separated list.","descriptionExtra","Eg: 'trailer, official'",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Exclude Words in Title","description","Exclude downloading a video if certain words exist in video title. Comma-separated list.","descriptionExtra","Eg: 'teaser, behind the scenes, review, comment'",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Yt-dlp Extra Options","description","Additional options to pass to yt-dlp when downloading trailers.","descriptionExtra","Advanced use cases only. Use with caution!",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled","colorType"],[1,"filter-details"],[1,"primary","filters-button",3,"click"],[1,"buttons-row"],[1,"icon-button","secondary",3,"click"],["d","M524-407v-117H407v-73h117v-116h73v116h116v73H597v117h-73ZM137-64q-28.72 0-50.86-22.14T64-137v-512q0-28.72 22.14-50.86T137-722h106v-101q0-28.72 22.14-50.86Q287.27-896 316-896h507q28.72 0 50.86 22.14T896-823v507q0 28.73-22.14 50.86Q851.72-243 823-243H722v106q0 28.72-22.14 50.86T649-64H137Zm179-252h507v-507H316v507Z"],["d","M590-144v-73h97q24 0 40.5-15.88Q744-248.75 744-273v-91q0-40 23.5-71.5T830-479v-7q-39-7-62.5-38.5T744-596v-91q0-24.25-16.37-40.63Q711.25-744 687-744h-97v-72h108q49 0 83.5 34.58Q816-746.83 816-697v91q0 24.25 15.88 40.12Q847.75-550 871-550h25v139h-25q-23.25 0-39.12 16.37Q816-378.25 816-354v91q0 49.83-34.58 84.42Q746.83-144 698-144H590Zm-327 0q-50 0-84.5-34.58Q144-213.17 144-263v-91q0-24.25-16.37-40.63Q111.25-411 87-411H64v-139h23q24.25 0 40.63-15.88Q144-581.75 144-606v-91q0-49.83 34.58-84.42Q213.17-816 263-816h108v72h-98q-24 0-40 16.37-16 16.38-16 40.63v91q0 40-24 71.5T131-486v7q38 12 62 43.5t24 71.5v91q0 24.25 15.88 40.12Q248.75-217 273-217h98v73H263Z"],[3,"filterType","customFilter"],[1,"error",3,"click"],[1,"dialog-content",3,"click"],[1,"danger",3,"click"],[1,"secondary",3,"click"],[3,"click"],[1,"input-wrapper"],["for","new-profile-name"],["type","text","id","new-profile-name","placeholder","New Profile Name",1,"new-profile-name",3,"ngModelChange","ngModel"],[1,"primary",3,"click","disabled"],["for","profile-json"],["id","profile-json",1,"json-editor",3,"ngModelChange","ngModel"],["name","Folder Name","description","Name of the folder to save trailer file.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],[3,"dialogClosed","filterType","customFilter"]],template:function(r,t){if(r&1){let s=x();C(0,bn,1,0,"app-load-indicator",5),i(1,"div",6)(2,"h2"),l(3),n(),i(4,"i",7),d("click",function(){return u(s),g(t.openFilterDialog())}),S(),i(5,"svg",8),_(6,"path",9),n()()(),M(),i(7,"button",10),d("click",function(){return u(s),g(t.showDeleteDialog())}),S(),i(8,"svg",11),_(9,"path",12),n(),M(),i(10,"span",13),l(11,"Delete"),n()(),_(12,"hr"),C(13,xn,4,0,"div",14),i(14,"section")(15,"details",15)(16,"summary")(17,"span"),l(18,"General"),n(),_(19,"help-link-icon",16),n(),_(20,"hr"),i(21,"div",17)(22,"app-options-setting",18),d("optionChange",function(h){return u(s),g(t.profileService.updateSetting("enabled",h))}),n(),i(23,"app-text-setting",19),d("onSubmit",function(h){return u(s),g(t.profileService.updateSetting("priority",h))}),n(),i(24,"app-options-setting",20),d("optionChange",function(h){return u(s),g(t.profileService.updateSetting("stop_monitoring",h))}),n()()()(),i(25,"section")(26,"details",15)(27,"summary")(28,"span"),l(29,"File"),n(),_(30,"help-link-icon",16),n(),_(31,"hr"),i(32,"div",17)(33,"app-options-setting",21),d("optionChange",function(h){return u(s),g(t.profileService.updateSetting("file_format",h))}),n(),i(34,"app-text-setting",22),d("onSubmit",function(h){return u(s),g(t.profileService.updateSetting("file_name",h))}),n(),i(35,"app-options-setting",23),d("optionChange",function(h){return u(s),g(t.profileService.updateSetting("folder_enabled",h))}),n(),C(36,Sn,1,8,"app-text-setting",24),i(37,"app-text-setting",25),d("onSubmit",function(h){return u(s),g(t.profileService.updateSetting("custom_folder",h))}),n(),i(38,"app-options-setting",26),d("optionChange",function(h){return u(s),g(t.profileService.updateSetting("embed_metadata",h))}),n(),i(39,"app-options-setting",27),d("optionChange",function(h){return u(s),g(t.profileService.updateSetting("remove_silence",h))}),n()()()(),i(40,"section")(41,"details",15)(42,"summary")(43,"span"),l(44,"Audio"),n(),_(45,"help-link-icon",16),n(),_(46,"hr"),i(47,"div",17)(48,"app-options-setting",28),d("optionChange",function(h){return u(s),g(t.profileService.updateSetting("audio_format",h))}),n(),i(49,"app-range-setting",29),d("onSubmit",function(h){return u(s),g(t.profileService.updateSetting("audio_volume_level",h))}),n()()()(),i(50,"section")(51,"details",15)(52,"summary")(53,"span"),l(54,"Video"),n(),_(55,"help-link-icon",16),n(),_(56,"hr"),i(57,"div",17)(58,"app-options-setting",30),d("optionChange",function(h){return u(s),g(t.profileService.updateSetting("video_format",h))}),n(),i(59,"app-options-setting",31),d("optionChange",function(h){return u(s),g(t.profileService.updateSetting("video_resolution",h))}),n()()()(),i(60,"section")(61,"details",15)(62,"summary")(63,"span"),l(64,"Subtitle"),n(),_(65,"help-link-icon",16),n(),_(66,"hr"),i(67,"div",17)(68,"app-options-setting",32),d("optionChange",function(h){return u(s),g(t.profileService.updateSetting("subtitles_enabled",h))}),n(),i(69,"app-options-setting",33),d("optionChange",function(h){return u(s),g(t.profileService.updateSetting("subtitles_format",h))}),n(),i(70,"app-text-setting",34),d("onSubmit",function(h){return u(s),g(t.profileService.updateSetting("subtitles_language",h))}),n()()()(),i(71,"section")(72,"details",15)(73,"summary")(74,"span"),l(75,"Search"),n(),_(76,"help-link-icon",16),n(),_(77,"hr"),i(78,"div",17)(79,"app-text-setting",35),d("onSubmit",function(h){return u(s),g(t.profileService.updateSetting("search_query",h))}),n(),i(80,"app-range-setting",36),d("onSubmit",function(h){return u(s),g(t.profileService.updateSetting("min_duration",h))}),n(),i(81,"app-range-setting",37),d("onSubmit",function(h){return u(s),g(t.profileService.updateSetting("max_duration",h))}),n(),i(82,"app-options-setting",38),d("optionChange",function(h){return u(s),g(t.profileService.updateSetting("always_search",h))}),n(),i(83,"app-text-setting",39),d("onSubmit",function(h){return u(s),g(t.profileService.updateSetting("include_words",h))}),n(),i(84,"app-text-setting",40),d("onSubmit",function(h){return u(s),g(t.profileService.updateSetting("exclude_words",h))}),n(),i(85,"app-text-setting",41),d("onSubmit",function(h){return u(s),g(t.profileService.updateSetting("ytdlp_extra_options",h))}),n()()()(),i(86,"section")(87,"details",15)(88,"summary")(89,"span"),l(90,"Filters"),n(),_(91,"help-link-icon",16),n(),_(92,"hr"),i(93,"div",17)(94,"p"),l(95,"Filters are conditions that media must meet. This profile is used only when all conditions match."),n(),i(96,"small"),l(97,"Think of filters as rules; if a movie or show matches all the rules, this profile will be used."),n(),C(98,Pn,12,0,"table",42)(99,Mn,2,0),i(100,"button",43),d("click",function(){return u(s),g(t.openFilterDialog())}),l(101,"Add/Edit Filters"),n()()()(),i(102,"div",44)(103,"button",45),d("click",function(){return u(s),g(t.showCopyProfileDialog())}),S(),i(104,"svg",11),_(105,"path",46),n(),M(),i(106,"span",13),l(107,"Duplicate Profile"),n()(),i(108,"button",45),d("click",function(){return u(s),g(t.showJsonEditDialog())}),S(),i(109,"svg",11),_(110,"path",47),n(),M(),i(111,"span",13),l(112,"Advanced Editor"),n()()(),C(113,Tn,1,2,"edit-filter-dialog",48),i(114,"dialog",49,0),d("click",function(){return u(s),g(t.closeDeleteDialog())}),i(116,"div",50),d("click",function(h){return u(s),g(h.stopPropagation())}),i(117,"h2"),l(118,"Delete Profile"),n(),i(119,"p"),l(120,"This will Delete the profile and no longer use it for downloads"),n(),i(121,"p"),l(122,"Delete the profile?"),n(),i(123,"div",44)(124,"button",51),d("click",function(){return u(s),g(t.onConfirmDelete())}),l(125,"Delete"),n(),i(126,"button",52),d("click",function(){return u(s),g(t.closeDeleteDialog())}),l(127,"Cancel"),n()()()(),i(128,"dialog",53,1),d("click",function(){return u(s),g(t.closeCopyProfileDialog())}),i(130,"div",50),d("click",function(h){return u(s),g(h.stopPropagation())}),i(131,"h2"),l(132,"Duplicate Profile"),n(),i(133,"p"),l(134,"This will create a copy of the current profile."),n(),i(135,"div",54)(136,"label",55),l(137,"New Profile Name"),n(),i(138,"input",56),I("ngModelChange",function(h){return u(s),F(t.newProfileName,h)||(t.newProfileName=h),g(h)}),n()(),i(139,"div",44)(140,"button",57),d("click",function(){return u(s),g(t.onConfirmCopy())}),l(141,"Duplicate"),n(),i(142,"button",52),d("click",function(){return u(s),g(t.closeCopyProfileDialog())}),l(143,"Cancel"),n()()()(),i(144,"dialog",53,2),d("click",function(){return u(s),g(t.closeJsonEditDialog())}),i(146,"div",50),d("click",function(h){return u(s),g(h.stopPropagation())}),i(147,"h2"),l(148,"Edit Profile JSON"),n(),i(149,"p"),l(150,"This will allow you to edit the profile JSON directly."),n(),i(151,"div",54)(152,"label",58),l(153,"Profile JSON"),n(),i(154,"textarea",59,3),I("ngModelChange",function(h){return u(s),F(t.profileJSON,h)||(t.profileJSON=h),g(h)}),n()(),i(156,"div",44)(157,"button",57),d("click",function(){return u(s),g(t.onJsonEditSave())}),l(158,"Save"),n(),i(159,"button",52),d("click",function(){return u(s),g(t.closeJsonEditDialog())}),l(160,"Cancel"),n()()()()}if(r&2){let s,c,h,D,ae,te,Ce,ve,be,we,xe,Se,ye,Ye,Ke,Xe,et,tt,it,nt,ot,rt,at,lt,st,pt,Me;v(t.profileService.allProfiles.isLoading()?0:-1),a(3),U("Profile: ",(s=t.profile())==null||s.customfilter==null?null:s.customfilter.filter_name),a(10),v(t.invalidFormatsWarning().length>0?13:-1),a(6),p("link",t.helpLinks.general),a(3),p("options",t.trueFalseOptions)("selectedOption",(c=t.profile())==null?null:c.enabled),a(),p("isNumberType",!0)("isLongInput",!1)("placeholder","Priority")("autocomplete","off")("minLength",1)("maxLength",3)("value",((h=t.profile())==null?null:h.priority)??0)("disabled",!1),a(),p("options",t.trueFalseOptions)("selectedOption",(D=t.profile())==null?null:D.stop_monitoring),a(6),p("link",t.helpLinks.file),a(3),p("options",t.fileFormatOptions)("selectedOption",(ae=t.profile())==null?null:ae.file_format)("disabledOptions",t.fileFormatsDisabled()),a(),p("isNumberType",!1)("isLongInput",!0)("placeholder","File Name")("autocomplete","off")("minLength",1)("maxLength",150)("value",((te=t.profile())==null?null:te.file_name)??"")("disabled",!1),a(),p("options",t.trueFalseOptions)("selectedOption",(Ce=t.profile())==null?null:Ce.folder_enabled),a(),v((ve=t.profile())!=null&&ve.folder_enabled?36:-1),a(),p("isNumberType",!1)("isLongInput",!0)("placeholder","Custom Save Folder Path")("autocomplete","off")("minLength",1)("maxLength",100)("value",((be=t.profile())==null?null:be.custom_folder)??""),a(),p("options",t.trueFalseOptions)("selectedOption",(we=t.profile())==null?null:we.embed_metadata),a(),p("options",t.trueFalseOptions)("selectedOption",(xe=t.profile())==null?null:xe.remove_silence),a(6),p("link",t.helpLinks.audio),a(3),p("options",t.audioFormatOptions)("disabledOptions",t.audioFormatsDisabled())("selectedOption",(Se=t.profile())==null?null:Se.audio_format),a(),p("minValue",1)("maxValue",200)("stepValue",1)("value",((ye=t.profile())==null?null:ye.audio_volume_level)??100)("disabled",!1)("colorType","warning"),a(6),p("link",t.helpLinks.video),a(3),p("options",t.videoFormatOptions)("disabledOptions",t.videoFormatsDisabled())("selectedOption",(Ye=t.profile())==null?null:Ye.video_format),a(),p("options",t.videoResolutionOptions)("selectedOption",(Ke=t.profile())==null?null:Ke.video_resolution),a(6),p("link",t.helpLinks.subtitle),a(3),p("options",t.trueFalseOptions)("selectedOption",(Xe=t.profile())==null?null:Xe.subtitles_enabled),a(),p("options",t.subtitleFormatOptions)("selectedOption",(et=t.profile())==null?null:et.subtitles_format),a(),p("isNumberType",!1)("isLongInput",!1)("placeholder","Subtitles Language")("autocomplete","off")("minLength",2)("maxLength",20)("value",((tt=t.profile())==null?null:tt.subtitles_language)??"en")("disabled",!((it=t.profile())!=null&&it.subtitles_enabled)),a(6),p("link",t.helpLinks.search),a(3),p("isNumberType",!1)("isLongInput",!0)("placeholder","Search Query")("autocomplete","off")("minLength",10)("maxLength",150)("value",((nt=t.profile())==null?null:nt.search_query)??"")("disabled",!1),a(),p("minValue",30)("maxValue",t.minLimitMax())("value",((ot=t.profile())==null?null:ot.min_duration)??30)("disabled",!1),a(),p("minValue",t.maxLimitMin())("maxValue",600)("value",((rt=t.profile())==null?null:rt.max_duration)??600)("disabled",!1),a(),p("options",t.trueFalseOptions)("selectedOption",(at=t.profile())==null?null:at.always_search),a(),p("isNumberType",!1)("isLongInput",!0)("placeholder","Include Words")("autocomplete","off")("minLength",0)("maxLength",200)("value",((lt=t.profile())==null?null:lt.include_words)??"")("disabled",!1),a(),p("isNumberType",!1)("isLongInput",!0)("placeholder","Exclude Words List")("autocomplete","off")("minLength",0)("maxLength",200)("value",((st=t.profile())==null?null:st.exclude_words)??"")("disabled",!1),a(),p("isNumberType",!1)("isLongInput",!0)("placeholder","Yt-dlp Extra Options")("autocomplete","off")("minLength",0)("maxLength",500)("value",((pt=t.profile())==null?null:pt.ytdlp_extra_options)??"")("disabled",!1)("colorType","warning"),a(6),p("link",t.helpLinks.filters),a(7),v(!((Me=t.profile())==null||Me.customfilter==null||Me.customfilter.filters==null)&&Me.customfilter.filters.length?98:99),a(15),v(t.editFilterDialogOpen()?113:-1),a(25),L("ngModel",t.newProfileName),a(2),p("disabled",!t.newProfileName()),a(14),L("ngModel",t.profileJSON),a(3),p("disabled",!t.profileJSON())}},dependencies:[Ge,q,Q,W,H,he,N,Be,zt,$e],styles:["[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column}.center[_ngcontent-%COMP%]{position:fixed;top:50vh;left:50%;transform:translate(-50%,-50%)}.title-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;max-width:calc(100% - 7rem);color:var(--color-primary)}.edit-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.top-right-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:10px}details[_ngcontent-%COMP%]{margin:.5rem 0;border:1px solid var(--color-outline);border-radius:.5rem;background-color:var(--color-surface-container)}summary[_ngcontent-%COMP%]{padding:1rem;font-weight:700;cursor:pointer;color:var(--color-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:calc(100vw - 260px);display:flex;align-items:center;justify-content:space-between}@media(width<1100px){summary[_ngcontent-%COMP%]{max-width:calc(100vw - 100px)}}@media(width<765px){summary[_ngcontent-%COMP%]{max-width:calc(100vw - 50px)}}.sticky-warning[_ngcontent-%COMP%]{position:sticky;top:122px;z-index:10;padding:0 1rem;margin:.5rem 0;border-radius:.5rem;font-size:larger;font-weight:600;color:var(--color-warning);background-color:var(--color-surface-container)}.setting-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 .5rem;container-type:inline-size}table[_ngcontent-%COMP%]{text-align:center;margin:1.5rem auto 1rem;padding:1rem;width:clamp(300px,50vw,800px);border-collapse:collapse;border:2px solid var(--color-outline);font-family:sans-serif;font-size:.8rem;letter-spacing:1px}thead[_ngcontent-%COMP%], tfoot[_ngcontent-%COMP%]{background-color:var(--color-secondary-container)}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid var(--color-outline);padding:8px 10px}td[_ngcontent-%COMP%]:last-of-type{text-align:center}tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(2n){background-color:var(--color-surface-container-high)}.filters-button[_ngcontent-%COMP%]{width:auto;margin:1rem auto}.dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem;text-align:center}.input-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem}.input-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:0;left:1rem;transform:translateY(-50%);transform-origin:left top;transition:all .2s ease-in-out;color:var(--color-secondary);background:var(--color-surface-container-highest);padding:0 .25rem;font-size:small;pointer-events:none}.new-profile-name[_ngcontent-%COMP%]{height:3rem;min-width:25vw;width:100%;border:1px solid var(--color-outline);border-radius:.5rem;padding:.25rem;font-size:large;color:var(--color-tertiary)}.json-editor[_ngcontent-%COMP%]{max-width:85vw;min-width:50vw;min-height:40vh;max-height:75vh;width:100%;padding:1rem;border:1px solid var(--color-outline);border-radius:.5rem;color:var(--color-tertiary);overscroll-behavior:contain}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0})}}return o})();var On=o=>[o];function kn(o,m){o&1&&_(0,"app-load-indicator",8)}function Dn(o,m){if(o&1&&(i(0,"p"),l(1),n()),o&2){let e=f().$implicit;a(),ze("Subtitle: ",e.subtitles_language," | ",e.subtitles_format)}}function Vn(o,m){o&1&&(i(0,"p"),l(1,"Subtitles: No"),n())}function Ln(o,m){o&1&&(S(),i(0,"svg",15),_(1,"path",17),n())}function Fn(o,m){o&1&&(S(),i(0,"svg",16),_(1,"path",18),n())}function In(o,m){if(o&1&&(i(0,"a",11)(1,"h3",12),l(2),n(),i(3,"div",13)(4,"p"),l(5),n(),i(6,"p"),l(7),n(),C(8,Dn,2,2,"p")(9,Vn,2,0,"p"),n(),i(10,"div",14),C(11,Ln,2,0,":svg:svg",15)(12,Fn,2,0,":svg:svg",16),n()()),o&2){let e=m.$implicit;p("routerLink",V(7,On,e.id)),a(2),b(e.customfilter.filter_name);let r=e.video_resolution?`${e.video_resolution}p`:"best";a(3),ze("Video: ",r," | ",e.video_format),a(2),U("Audio: ",e.audio_format),a(),v(e.subtitles_enabled?8:9),a(3),v(e.enabled?11:12)}}function qn(o,m){if(o&1&&(i(0,"div",10),T(1,In,13,9,"a",11,Y),n()),o&2){let e=f(2);a(),O(e.profileService.allProfiles.value())}}function Nn(o,m){o&1&&(i(0,"div",8)(1,"p"),l(2,"No profiles found."),n()())}function Rn(o,m){if(o&1&&C(0,qn,3,0,"div",10)(1,Nn,3,0,"div",8),o&2){let e=f();v(e.profileService.allProfiles.value()&&e.profileService.allProfiles.value().length>0?0:1)}}function An(o,m){if(o&1){let e=x();i(0,"edit-filter-dialog",19),d("dialogClosed",function(t){u(e);let s=f();return g(s.onFilterDialogClosed(t))}),n()}o&2&&p("filterType","TRAILER")("customFilter",null)}var Yt=(()=>{class o{constructor(){this.profileService=P(Re),this.router=P(ue),this.RouteAdd="add",this.RouteProfiles=re,this.RouteEdit=Ie,this.RouteSettings=qe,this.editFilterDialogOpen=y(!1)}openFilterDialog(){this.editFilterDialogOpen.set(!0)}onFilterDialogClosed(e){this.editFilterDialogOpen.set(!1),e>=0&&(this.profileService.allProfiles.reload(),this.router.navigate(["/settings/profiles",e]))}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=E({type:o,selectors:[["app-show-profiles"]],decls:15,vars:4,consts:[[1,"title-block"],["title","Refresh",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"refresh-icon"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],[1,"animated-button","top-right-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"],[1,"text"],[1,"center"],[3,"filterType","customFilter"],[1,"profile-container"],[1,"profile-card",3,"routerLink"],[1,"profile-card-title"],[1,"profile-card-content"],[1,"profile-card-checkbox"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","title","Profile Enabled",1,"profile-card-icon","success"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","title","Profile Disabled",1,"profile-card-icon","danger"],["d","m421-288 294-294-55-54-239 239-121-121-54 54 175 176Zm58.54 224q-85.18 0-161.02-33.02t-132.16-89.34q-56.32-56.32-89.34-132.29T64-480q0-86.27 33.08-162.15 33.08-75.88 89.68-132.47 56.61-56.59 132.22-88.99Q394.59-896 479.56-896q86.33 0 162.51 32.39 76.18 32.4 132.56 89Q831-718 863.5-641.96q32.5 76.04 32.5 162.5 0 85.46-32.39 160.8-32.4 75.34-88.99 131.92Q718.03-130.16 642-97.08 565.98-64 479.54-64Zm.46-73q142.51 0 242.76-100.74Q823-338.49 823-480q0-142.51-100.24-242.76Q622.51-823 480-823q-141.51 0-242.26 100.24Q137-622.51 137-480q0 141.51 100.74 242.26Q338.49-137 480-137Zm0-343Z"],["d","M836-29 724-141q-52 37-113.57 57Q548.87-64 480-64q-87.64 0-163.98-32.02-76.34-32.02-132.16-87.84-55.82-55.82-87.84-132.16T64-480q0-68.87 20-130.43Q104-672 141-724L15-850l52-52L888-81l-52 52ZM480-137q54.5 0 102.25-14.5T671-193L498-366l-77 78-175-176 49-49 122 120 27-27-251-251q-27 41-41.5 88.75T137-480q0 146 98.5 244.5T480-137Zm339-99-52-52q26-41 41-89.5T823-480q0-146-98.5-244.5T480-823q-54 0-102.5 15T288-767l-52-52q50.84-36.43 112.62-56.72Q410.4-896 480-896q87.89 0 163.94 32Q720-832 776-776t88 132.06q32 76.05 32 163.94 0 69.6-20.28 131.38Q855.43-286.84 819-236ZM594-461l-55-54 121-121 55 54-121 121Zm-67-66Zm-95 95Z"],[3,"dialogClosed","filterType","customFilter"]],template:function(r,t){r&1&&(i(0,"div",0)(1,"h2"),l(2,"Profiles"),n(),i(3,"i",1),d("click",function(){return t.profileService.allProfiles.reload()}),S(),i(4,"svg",2),_(5,"path",3),n()()(),M(),i(6,"button",4),d("click",function(){return t.openFilterDialog()}),S(),i(7,"svg",5),_(8,"path",6),n(),M(),i(9,"span",7),l(10,"Add New"),n()(),_(11,"hr"),C(12,kn,1,0,"app-load-indicator",8)(13,Rn,2,1),C(14,An,1,2,"edit-filter-dialog",9)),r&2&&(a(3),k("loading",t.profileService.allProfiles.isLoading()),a(9),v(t.profileService.allProfiles.isLoading()?12:13),a(2),v(t.editFilterDialogOpen()?14:-1))},dependencies:[Ge,N,ge],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;position:relative;gap:12px}.title-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.refresh-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.loading[_ngcontent-%COMP%]{cursor:progress;animation:spin-animation 2s linear infinite}.top-right-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:10px}.center[_ngcontent-%COMP%]{position:fixed;top:50vh;left:50%;transform:translate(-50%,-50%)}.profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:1rem}.profile-card[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr auto;grid-template-columns:1fr auto;gap:10px;max-width:500px;padding:12px;border:2px solid var(--color-outline);border-radius:8px;background-color:var(--color-surface-container);color:var(--color-on-surface);cursor:pointer;text-decoration:none}@media(max-width:765px){.profile-card[_ngcontent-%COMP%]{margin:auto;width:100%}}.profile-card-title[_ngcontent-%COMP%]{grid-row:1;grid-column:1/span 2;color:var(--color-primary);text-align:center}.profile-card-content[_ngcontent-%COMP%]{grid-row:2;grid-column:1;padding:0 1rem}.profile-card-checkbox[_ngcontent-%COMP%]{grid-row:2;grid-column:2;width:auto;padding:.5rem;margin:auto}.profile-card-icon[_ngcontent-%COMP%]{width:3rem;height:3rem}.success[_ngcontent-%COMP%]{fill:var(--color-success)}.error[_ngcontent-%COMP%]{fill:var(--color-error)}"],changeDetection:0})}}return o})();var Kt=(()=>{class o{constructor(){this.RouteAbout=Fe,this.RouteConnections=X,this.RouteProfiles=re,this.RouteGeneral=Pe}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=E({type:o,selectors:[["app-settings"]],decls:12,vars:4,consts:[[1,"settingsnav"],["routerLinkActive","active",1,"setnav-btn",3,"routerLink"],[1,"settings-container"],[1,"settings-content"]],template:function(r,t){r&1&&(i(0,"div",0)(1,"a",1),l(2,"General"),n(),i(3,"a",1),l(4,"Connections"),n(),i(5,"a",1),l(6,"Profiles"),n(),i(7,"a",1),l(8,"About"),n()(),i(9,"div",2)(10,"div",3),_(11,"router-outlet"),n()()),r&2&&(a(),p("routerLink",t.RouteGeneral),a(2),p("routerLink",t.RouteConnections),a(2),p("routerLink",t.RouteProfiles),a(2),p("routerLink",t.RouteAbout))},dependencies:[ge,Et,Pt],styles:[".settings-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:1rem}@media(width<765px){.settings-container[_ngcontent-%COMP%]{margin:.5rem}}.settingsnav[_ngcontent-%COMP%]{position:sticky;top:76px;left:0;right:0;z-index:99;margin:0;padding:0;display:flex;flex-direction:row;background-color:var(--color-surface-container-low);color:var(--color-on-surface)}@media(width<765px){.settingsnav[_ngcontent-%COMP%]{order:2;justify-content:space-around;position:fixed;top:auto;bottom:76px}}.settingsnav[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1}.settings-content[_ngcontent-%COMP%]{order:2;padding:.5rem}@media(width<765px){.settings-content[_ngcontent-%COMP%]{margin-bottom:80px;order:1}}.setnav-btn[_ngcontent-%COMP%]{margin:0;padding:.8rem;box-sizing:border-box;text-decoration:none;color:inherit;text-align:center;font-weight:400;transition:.3s;cursor:pointer;border-radius:0;border-bottom:2px solid transparent}.setnav-btn.active[_ngcontent-%COMP%]{background-color:var(--color-secondary-container);opacity:1;font-weight:600;color:var(--color-on-secondary-container);border-bottom:2px solid var(--color-primary)}.setnav-btn[_ngcontent-%COMP%]:not(.active):hover{background-color:var(--color-secondary-container);opacity:.6;font-weight:500;color:var(--color-on-secondary-container);border-bottom:2px solid var(--color-primary)}"]})}}return o})();var Lr=[{path:"",loadComponent:()=>Kt,children:[{path:X,component:$t},{path:`${X}/${"add"}`,component:Je},{path:`${X}/:${Mt}`,component:Je},{path:re,component:Yt},{path:`${re}/:${Tt}`,component:Jt},{path:Pe,component:jt},{path:Fe,component:Bt},{path:"**",redirectTo:Pe,pathMatch:"prefix"}]}];export{Lr as default};
