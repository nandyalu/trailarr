import{p as s}from"./chunk-ZEQ6WCJQ.js";import{a as p}from"./chunk-3OXZ5NJK.js";import{E as m,I as i,Na as b,Pb as w,Rb as k,T as f,Y as v,c as u,ja as C,o as h,rb as y,v as r,vb as g}from"./chunk-IMRADBSH.js";var I=(()=>{class e{constructor(){this.textToCopy=g.required(),this.webSocketService=i(s),this.element=i(v),this.element.nativeElement.classList.add("copy")}onClick(){this.copyToClipboard(this.textToCopy()),console.log("Element with copy button clicked!")}copyToClipboard(o){return u(this,null,function*(){if(navigator.clipboard)try{yield navigator.clipboard.writeText(o),this.webSocketService.showToast("Copied to clipboard!")}catch(t){this.webSocketService.showToast("Error copying text to clipboard.","Error"),console.error("Failed to copy: ",t)}else{let t=document.createElement("input");t.value=o,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.webSocketService.showToast("Copied to clipboard!")}})}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275dir=C({type:e,selectors:[["","appCopyToClipboard",""]],hostBindings:function(t,n){t&1&&b("click",function(){return n.onClick()})("keydown.enter",function(){return n.onClick()})},inputs:{textToCopy:[1,"textToCopy"]}})}}return e})();var l=(function(e){return e.Radarr="radarr",e.Sonarr="sonarr",e})(l||{}),d=(function(e){return e.Missing="missing",e.New="new",e.None="none",e.Sync="sync",e})(d||{});function c(){return e=>{let a="";if(e.error instanceof ErrorEvent)a=`Client Error: ${e.error.message}`;else{let o=e.error?.detail,t=e.error?.message,n=e.message||"Unknown error occurred";a=`Server Error (${e.status}): ${o||t||n}`}return h(()=>new Error(a))}}var V=(()=>{class e{constructor(){this.http=i(w),this.websocketService=i(s),this.connectionsUrl=p.apiUrl+p.connections,this.connectionsResource=k(()=>({url:this.connectionsUrl}),{defaultValue:[]}),this.newConnection={added_at:new Date().toISOString(),api_key:"",arr_type:l.Radarr,id:-1,monitor:d.New,name:"",path_mappings:[],url:"",external_url:""},this.connectionID=f(-1),this.selectedConnection=y(()=>{let o=this.connectionsResource.value().find(t=>t.id===this.connectionID());return o||this.newConnection})}addConnection(o){return this.http.post(this.connectionsUrl,o).pipe(r(c()))}connectionExists(o){return this.connectionsResource.value().some(n=>n.id===o)?!0:(o!=-1&&this.websocketService.showToast(`Connection with ID '${o}' does not exist.`,"error"),!1)}deleteConnection(o){var t=this.connectionsUrl+o;return this.http.delete(t).pipe(r(c()))}getRootFolders(o){var t=this.connectionsUrl+"rootfolders";return this.http.post(t,o).pipe(r(c()))}testConnection(o){var t=this.connectionsUrl+"test";return this.http.post(t,o).pipe(r(c()))}updateConnection(o,t){var n=this.connectionsUrl+o;return this.http.put(n,t).pipe(r(c()))}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{I as a,l as b,d as c,V as d};
