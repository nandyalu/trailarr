import{a as Me}from"./chunk-XFBVDPGE.js";import{a as Pe,b as lt}from"./chunk-QAVC4RSB.js";import{a as ri,b as st,c as Te,d as dt}from"./chunk-OYIZHJWC.js";import{a as at}from"./chunk-UJS2SZYV.js";import"./chunk-44HYGP5F.js";import{a as nt,b as de,c as it,h as _e,j as ot,l as Be,m as Hn,o as Bn,p as ni}from"./chunk-2CLW3XS4.js";import{a as ii,b as oi}from"./chunk-CVJK6CQE.js";import{A as U,a as Wn,b as X,c as Qn,d as Kn,e as ee,f as $n,g as zn,h as Yn,j as te,k as Jn,m as Xn,v as ei,w as rt,x as ti}from"./chunk-UWS3ETMB.js";import{a as G}from"./chunk-ZGO7C4B7.js";import{$a as ye,Aa as r,Ab as Un,Ba as a,Bb as et,Ca as f,Db as Gn,Eb as tt,G as Pt,Ga as Ot,Ha as E,I as S,Ia as m,K as Tt,Ka as _,L as g,La as Tn,M as h,Ma as On,N as x,Na as kn,O,Oa as Ce,P as Ze,Pa as be,Pb as jn,Qa as Dn,Qb as xe,Ra as N,Rb as Ee,Sb as Zn,T as M,Ta as z,U as B,Ua as d,V as R,Va as v,W as Je,Wa as Y,Xa as kt,Y as yn,Ya as I,Z as wn,Za as F,_ as Sn,_a as A,a as V,ab as we,b as he,ba as s,bb as fe,c as Et,cb as Vn,d as Mt,db as Nn,eb as Ln,fa as xn,fb as L,ga as ae,ha as T,hb as Rn,ib as J,ja as En,jb as ie,kb as In,lb as Xe,ma as ve,mb as y,nb as He,pa as Mn,pb as se,qa as W,qb as w,ra as ne,rb as oe,sa as Pn,sb as Se,ta as C,ua as b,ub as Fn,va as le,wa as Q,xa as k,xb as An,ya as D,yb as qn,za as u}from"./chunk-ZE3AX3HL.js";var Ti=["passwordUpdateDialog"],ai=t=>({$implicit:t});function Oi(t,n){t&1&&Ot(0)}function ki(t,n){t&1&&Ot(0)}function Di(t,n){if(t&1&&(r(0,"p",32),d(1),a()),t&2){let e=_(2);s(),v(e.updateError)}}function Vi(t,n){if(t&1&&(r(0,"p",33),d(1),a()),t&2){let e=_(2);s(),v(e.updateSuccess)}}function Ni(t,n){t&1&&f(0,"div",36)}function Li(t,n){if(t&1){let e=E();r(0,"form",20),m("click",function(i){return g(e),h(i.stopPropagation())}),r(1,"h2"),d(2,"Update Login Credentials"),a(),r(3,"div",21)(4,"div",22),f(5,"input",23,2),r(7,"label",24),d(8,"Current Username"),a()(),r(9,"div",22)(10,"input",25,3),A("ngModelChange",function(i){g(e);let l=_();return F(l.currentPassword,i)||(l.currentPassword=i),h(i)}),a(),r(12,"label",26),d(13,"Current Password"),a(),r(14,"i",18),m("click",function(){g(e);let i=_();return h(i.currentPasswordVisible=!i.currentPasswordVisible)}),ve(15,Oi,1,0,"ng-container",27),a()(),r(16,"h3"),d(17,"New Login"),a(),r(18,"div",22)(19,"input",28,4),A("ngModelChange",function(i){g(e);let l=_();return F(l.newUsername,i)||(l.newUsername=i),h(i)}),a(),r(21,"label",29),d(22,"New Username"),a()(),r(23,"div",22)(24,"input",30,5),A("ngModelChange",function(i){g(e);let l=_();return F(l.newPassword,i)||(l.newPassword=i),h(i)}),a(),r(26,"label",31),d(27,"New Password "),a(),r(28,"i",18),m("click",function(){g(e);let i=_();return h(i.newPasswordVisible=!i.newPasswordVisible)}),ve(29,ki,1,0,"ng-container",27),a()(),r(30,"span"),d(31,"For updating only username/password, leave the other blank"),a()(),C(32,Di,2,1,"p",32),C(33,Vi,2,1,"p",33),r(34,"button",34),m("click",function(){g(e);let i=_();return h(i.onConfirmUpdate())}),d(35,"Update"),a(),r(36,"button",35),m("click",function(){g(e);let i=_();return h(i.closePwUpdateDialog())}),d(37,"Cancel"),a(),C(38,Ni,1,0,"div",36),a()}if(t&2){let e=_(),o=Dn(115),i=fe(0);s(5),u("value",i==null?null:i.webui_username),s(5),u("type",e.currentPasswordVisible?"text":"password"),I("ngModel",e.currentPassword),s(5),u("ngTemplateOutlet",o)("ngTemplateOutletContext",L(14,ai,e.currentPasswordVisible)),s(4),I("ngModel",e.newUsername),s(5),u("type",e.newPasswordVisible?"text":"password"),I("ngModel",e.newPassword),s(5),u("ngTemplateOutlet",o)("ngTemplateOutletContext",L(16,ai,e.newPasswordVisible)),s(3),b(e.updateError?32:-1),s(),b(e.updateSuccess?33:-1),s(),u("disabled",e.getSubmitButtonState()),s(4),b(e.updateSuccess?38:-1)}}function Ri(t,n){t&1&&(x(),r(0,"svg",37),f(1,"path",38),a())}function Ii(t,n){t&1&&(x(),r(0,"svg",37),f(1,"path",39),a())}function Fi(t,n){if(t&1&&C(0,Ri,2,0,":svg:svg",37)(1,Ii,2,0,":svg:svg",37),t&2){let e=n.$implicit;b(e?0:1)}}var li=(()=>{class t{constructor(){this.settingsService=S(Me),this.settingsSignal=this.settingsService.settingsResource.value,this.currentPassword="",this.newUsername="",this.newPassword="",this.updateError="",this.updateSuccess="",this.currentPasswordVisible=!1,this.newPasswordVisible=!1,this.dialogOpen=!1}ngOnInit(){this.settingsService.getServerStats().subscribe(e=>this.serverStats=e)}clearPwUpdateFields(){this.currentPassword="",this.newPassword="",this.updateError="",this.updateSuccess=""}togglePasswordVisibility(e){e.type=e.type==="password"?"text":"password"}getSubmitButtonState(){if(!this.currentPassword)return!0;let e=!1;return this.newUsername.length>0&&(e=!0),this.newPassword.length>4&&(e=!0),!e}showPwUpdateDialog(){this.clearPwUpdateFields(),this.dialogOpen=!0,this.passwordUpdateDialog.nativeElement.showModal()}closePwUpdateDialog(){this.clearPwUpdateFields(),this.passwordUpdateDialog.nativeElement.close(),this.dialogOpen=!1}onConfirmUpdate(){console.log("Updating password"),this.updateError="",this.updateSuccess="",this.settingsService.updatePassword(this.currentPassword,this.newUsername,this.newPassword).subscribe(e=>{console.log(e),e.includes("Error")?this.updateError=e:(this.updateSuccess=e,setTimeout(()=>{this.closePwUpdateDialog()},3e3))})}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-about"]],viewQuery:function(o,i){if(o&1&&Tn(Ti,5),o&2){let l;On(l=kn())&&(i.passwordUpdateDialog=l.first)}},decls:116,vars:23,consts:[["passwordUpdateDialog",""],["passwordVisibilityIcon",""],["currentUsernameInput",""],["currentPasswordInput",""],["newUsernameInput",""],["newPasswordInput",""],[1,"about-container"],[1,"about-section"],[1,"about-content"],["href","https://hub.docker.com/r/nandyalu/trailarr","target","_blank",1,"update-available"],["href","https://pypi.org/project/yt-dlp/","target","_blank",1,"update-available"],["appCopyToClipboard","",3,"textToCopy"],[1,"update-login",3,"click"],["href","https://nandyalu.github.io/trailarr","target","_blank"],["href","https://discord.gg/KKPr5kQEzQ","target","_blank"],["href","https://github.com/nandyalu/trailarr","target","_blank"],["href","https://github.com/nandyalu/trailarr/issues","target","_blank"],["href","https://www.reddit.com/r/trailarr","target","_blank"],[3,"click"],[1,"dialog-content"],[1,"dialog-content",3,"click"],[1,"text-input"],[1,"password-input"],["id","trailarr_current_username","name","Current Username","type","text","autocomplete","current-username","disabled","true",3,"value"],["for","trailarr_current_username"],["id","trailarr_current_password","name","Current Password","autocomplete","current-password","required","","tabindex","1",3,"ngModelChange","type","ngModel"],["for","trailarr_current_password"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","trailarr_new_username","name","New Username","type","text","autocomplete","username","required","","tabindex","1",3,"ngModelChange","ngModel"],["for","trailarr_new_username"],["id","trailer_new_password","name","New Password","autocomplete","new-password","required","","minlength","5","tabindex","1",3,"ngModelChange","type","ngModel"],["for","trailer_new_password"],[1,"update-error"],[1,"update-success"],["tabindex","1","type","submit",1,"primary",3,"click","disabled"],["type","reset","tabindex","2",1,"secondary",3,"click"],[1,"close-progress"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","fill","#e8eaed"],["d","M480.12-330q70.88 0 120.38-49.62t49.5-120.5q0-70.88-49.62-120.38T479.88-670Q409-670 359.5-620.38T310-499.88q0 70.88 49.62 120.38t120.5 49.5Zm-.36-58q-46.76 0-79.26-32.74-32.5-32.73-32.5-79.5 0-46.76 32.74-79.26 32.73-32.5 79.5-32.5 46.76 0 79.26 32.74 32.5 32.73 32.5 79.5 0 46.76-32.74 79.26-32.73 32.5-79.5 32.5Zm.24 188q-146 0-264-83T40-500q58-134 176-217t264-83q146 0 264 83t176 217q-58 134-176 217t-264 83Zm0-300Zm-.17 240Q601-260 702.5-325.5 804-391 857-500q-53-109-154.33-174.5Q601.34-740 480.17-740T257.5-674.5Q156-609 102-500q54 109 155.33 174.5Q358.66-260 479.83-260Z"],["d","m629-419-44-44q26-71-27-118t-115-24l-44-44q17-11 38-16t43-5q71 0 120.5 49.5T650-500q0 22-5.5 43.5T629-419Zm129 129-40-40q49-36 85.5-80.5T857-500q-50-111-150-175.5T490-740q-42 0-86 8t-69 19l-46-47q35-16 89.5-28T485-800q143 0 261.5 81.5T920-500q-26 64-67 117t-95 93Zm58 226L648-229q-35 14-79 21.5t-89 7.5q-146 0-265-81.5T40-500q20-52 55.5-101.5T182-696L56-822l42-43 757 757-39 44ZM223-654q-37 27-71.5 71T102-500q51 111 153.5 175.5T488-260q33 0 65-4t48-12l-64-64q-11 5-27 7.5t-30 2.5q-70 0-120-49t-50-121q0-15 2.5-30t7.5-27l-97-97Zm305 142Zm-116 58Z"]],template:function(o,i){if(o&1){let l=E();ye(0),r(1,"div",6)(2,"section",7)(3,"h1"),d(4,"About Trailarr"),a(),f(5,"hr"),r(6,"div",8)(7,"span"),d(8,"Version"),a(),r(9,"code"),d(10),a(),r(11,"a",9),d(12),a()(),r(13,"div",8)(14,"span"),d(15,"Yt-dlp Version"),a(),r(16,"code"),d(17),a(),r(18,"a",10),d(19),a()(),r(20,"div",8)(21,"span"),d(22,"API Key"),a(),r(23,"code",11),d(24),a()(),r(25,"div",8)(26,"span"),d(27,"Appdata Folder"),a(),r(28,"code"),d(29),a()(),r(30,"div",8)(31,"span"),d(32,"Server Started"),a(),r(33,"code"),d(34),J(35,"timeago"),a()(),r(36,"div",8)(37,"span"),d(38,"Timezone"),a(),r(39,"code"),d(40),a()()(),r(41,"section",7)(42,"h1"),d(43,"Statistics"),a(),f(44,"hr"),r(45,"div",8)(46,"span"),d(47,"Movies"),a(),r(48,"code"),d(49),a()(),r(50,"div",8)(51,"span"),d(52,"Movies Monitored"),a(),r(53,"code"),d(54),a()(),r(55,"div",8)(56,"span"),d(57,"Series"),a(),r(58,"code"),d(59),a()(),r(60,"div",8)(61,"span"),d(62,"Series Monitored"),a(),r(63,"code"),d(64),a()(),r(65,"div",8)(66,"span"),d(67,"Trailers Downloaded"),a(),r(68,"code"),d(69),a()(),r(70,"div",8)(71,"span"),d(72,"Trailers Detected"),a(),r(73,"code"),d(74),a()()(),r(75,"section",7)(76,"h1"),d(77,"Login Credentials"),a(),f(78,"hr"),r(79,"div",8)(80,"button",12),m("click",function(){return g(l),h(i.showPwUpdateDialog())}),d(81,"Update Login"),a()()(),r(82,"section",7)(83,"h1"),d(84,"Getting Support"),a(),f(85,"hr"),r(86,"div",8)(87,"span"),d(88,"Documentation"),a(),r(89,"a",13),d(90,"https://nandyalu.github.io/trailarr"),a()(),r(91,"div",8)(92,"span"),d(93,"Discord"),a(),r(94,"a",14),d(95,"https://discord.gg/KKPr5kQEzQ"),a()(),r(96,"div",8)(97,"span"),d(98,"Github"),a(),r(99,"a",15),d(100,"https://github.com/nandyalu/trailarr"),a()(),r(101,"div",8)(102,"span"),d(103,"Issues"),a(),r(104,"a",16),d(105,"https://github.com/nandyalu/trailarr/issues"),a()(),r(106,"div",8)(107,"span"),d(108,"Reddit"),a(),r(109,"a",17),d(110,"https://www.reddit.com/r/trailarr"),a()()()(),r(111,"dialog",18,0),m("click",function(){return g(l),h(i.closePwUpdateDialog())}),C(113,Li,39,18,"form",19),a(),ve(114,Fi,2,1,"ng-template",null,1,Xe)}if(o&2){let l=we(i.settingsSignal());s(10),v(l==null?null:l.version),s(),N("latest",!(l!=null&&l.update_available)),s(),v(l!=null&&l.update_available?"Update Available":"Latest"),s(5),v(l==null?null:l.ytdlp_version),s(),N("latest",!(l!=null&&l.update_available_ytdlp)),s(),v(l!=null&&l.update_available_ytdlp?"Update Available":"Latest"),s(4),u("textToCopy",(l==null?null:l.api_key)||""),s(),v((l==null?null:l.api_key)||""),s(5),v(l==null?null:l.app_data_dir),s(5),v(l!=null&&l.server_start_time?ie(35,21,l==null?null:l.server_start_time):"Unknown"),s(6),v(l==null?null:l.timezone),s(9),v(i.serverStats==null?null:i.serverStats.movies_count),s(5),v(i.serverStats==null?null:i.serverStats.movies_monitored),s(5),v(i.serverStats==null?null:i.serverStats.series_count),s(5),v(i.serverStats==null?null:i.serverStats.series_monitored),s(5),v(i.serverStats==null?null:i.serverStats.trailers_downloaded),s(5),v(i.serverStats==null?null:i.serverStats.trailers_detected),s(39),b(i.dialogOpen?113:-1)}},dependencies:[ri,U,Jn,X,ee,$n,ei,rt,te,Yn,oi,qn,ii],styles:[".about-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.about-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin:1.5rem .5rem;gap:1rem}.about-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .about-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;text-align:left;width:40%}.about-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2){text-decoration:none;text-align:left;margin:0;padding:.25rem}.update-available[_ngcontent-%COMP%]{background-color:var(--color-primary);color:var(--color-on-primary);border-radius:5px;border-radius:1rem;padding:.25rem .5rem;font-style:italic;width:auto!important}.latest[_ngcontent-%COMP%]{background-color:var(--color-tertiary);color:var(--color-on-tertiary)}@media screen and (max-width:768px){.about-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem}.about-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;font-weight:unset;font-style:italic;font-size:small}}.dialog-content[_ngcontent-%COMP%]{min-width:25vw;padding:1rem;text-align:center}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:1rem}.dialog-content[_ngcontent-%COMP%]   .update-success[_ngcontent-%COMP%]{font-weight:bolder;color:var(--color-success)}.dialog-content[_ngcontent-%COMP%]   .update-error[_ngcontent-%COMP%]{font-weight:bolder;color:var(--color-warning)}.text-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;gap:.5rem;justify-content:space-between;margin:1rem;align-items:center}.password-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin:.25rem;align-items:center;position:relative}.password-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;transform:translateY(-50%);top:50%;left:1rem;font-size:1rem;pointer-events:none;color:var(--color-on-surface);padding:0 .5rem;transition:.5s}.password-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:15rem;height:3rem;padding:.25rem .5rem;font-family:inherit;font-size:1.25rem;background-color:var(--color-surface-container-high);color:var(--color-tertiary);border:1px solid var(--color-outline);border-radius:.5rem}input[_ngcontent-%COMP%]:disabled{background-color:var(--color-surface-container-low);cursor:not-allowed}.password-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .password-input[_ngcontent-%COMP%]   input.ng-touched[_ngcontent-%COMP%] ~ label[_ngcontent-%COMP%], .password-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ label[_ngcontent-%COMP%]{top:0;background:var(--color-surface-container-high);font-size:.8rem}i[_ngcontent-%COMP%]{position:absolute;right:.5rem;font-size:0}svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:var(--color-secondary)}.close-progress[_ngcontent-%COMP%]{width:100%;height:.25rem;background-color:var(--color-success-text);border-radius:.25rem;animation:_ngcontent-%COMP%_closeProgress 3s linear 0s}@keyframes _ngcontent-%COMP%_closeProgress{0%{width:100%}to{width:0%}}"]})}}return t})();var Vt=0;function Ai(){return Vt}function ce(t,n){return(...e)=>{try{return Vt=n,t(...e)}finally{Vt=0}}}function qi(t){return!t}function si(t){return t}function $(t){return Array.isArray(t)}function Oe(t){return(typeof t=="object"||typeof t=="function")&&t!=null}var pe=Symbol(),_t=Symbol(),Qe=class{predicates;fns=[];constructor(n){this.predicates=n}push(n){this.fns.push(di(this.predicates,n))}mergeIn(n){let e=this.predicates?n.fns.map(o=>di(this.predicates,o)):n.fns;this.fns.push(...e)}},ut=class extends Qe{get defaultValue(){return!1}compute(n){return this.fns.some(e=>{let o=e(n);return o&&o!==_t})}},ke=class t extends Qe{ignore;static ignoreNull(n){return new t(n,e=>e===null)}constructor(n,e){super(n),this.ignore=e}get defaultValue(){return[]}compute(n){return this.fns.reduce((e,o)=>{let i=o(n);return i===void 0||i===_t?e:$(i)?[...e,...this.ignore?i.filter(l=>!this.ignore(l)):i]:this.ignore&&this.ignore(i)?e:[...e,i]},[])}},Nt=class extends ke{constructor(n){super(n,void 0)}},Lt=class extends Qe{key;get defaultValue(){return this.key.reducer.getInitial()}constructor(n,e){super(n),this.key=e}compute(n){if(this.fns.length===0)return this.key.reducer.getInitial();let e=this.key.reducer.getInitial();for(let o=0;o<this.fns.length;o++){let i=this.fns[o](n);i!==_t&&(e=this.key.reducer.reduce(e,i))}return e}};function di(t,n){return t.length===0?n:e=>{for(let o of t){let i=e.stateOf(o.path),l=R(i.structure.pathKeys).length-o.depth;for(let c=0;c<l;c++)i=i.structure.parent;if(!o.fn(i.context))return _t}return n(e)}}var De=class{predicates;hidden;disabledReasons;readonly;syncErrors;syncTreeErrors;asyncErrors;metadata=new Map;constructor(n){this.predicates=n,this.hidden=new ut(n),this.disabledReasons=new Nt(n),this.readonly=new ut(n),this.syncErrors=ke.ignoreNull(n),this.syncTreeErrors=ke.ignoreNull(n),this.asyncErrors=ke.ignoreNull(n)}hasMetadata(n){return this.metadata.has(n)}getMetadataKeys(){return this.metadata.keys()}getMetadata(n){return this.metadata.has(n)||this.metadata.set(n,new Lt(this.predicates,n)),this.metadata.get(n)}mergeIn(n){this.hidden.mergeIn(n.hidden),this.disabledReasons.mergeIn(n.disabledReasons),this.readonly.mergeIn(n.readonly),this.syncErrors.mergeIn(n.syncErrors),this.syncTreeErrors.mergeIn(n.syncTreeErrors),this.asyncErrors.mergeIn(n.asyncErrors);for(let e of n.getMetadataKeys()){let o=n.metadata.get(e);this.getMetadata(e).mergeIn(o)}}},mt=class{depth;constructor(n){this.depth=n}build(){return new gt(this,[],0)}},Ve=class t extends mt{constructor(n){super(n)}current;all=[];addHiddenRule(n){this.getCurrent().addHiddenRule(n)}addDisabledReasonRule(n){this.getCurrent().addDisabledReasonRule(n)}addReadonlyRule(n){this.getCurrent().addReadonlyRule(n)}addSyncErrorRule(n){this.getCurrent().addSyncErrorRule(n)}addSyncTreeErrorRule(n){this.getCurrent().addSyncTreeErrorRule(n)}addAsyncErrorRule(n){this.getCurrent().addAsyncErrorRule(n)}addMetadataRule(n,e){this.getCurrent().addMetadataRule(n,e)}getChild(n){if(n===pe){let e=this.getCurrent().children;e.size>(e.has(pe)?1:0)&&(this.current=void 0)}return this.getCurrent().getChild(n)}hasLogic(n){return this===n?!0:this.all.some(({builder:e})=>e.hasLogic(n))}mergeIn(n,e){e?this.all.push({builder:n,predicate:{fn:ce(e.fn,this.depth),path:e.path}}):this.all.push({builder:n}),this.current=void 0}getCurrent(){return this.current===void 0&&(this.current=new Ke(this.depth),this.all.push({builder:this.current})),this.current}static newRoot(){return new t(0)}},Ke=class extends mt{logic=new De([]);children=new Map;constructor(n){super(n)}addHiddenRule(n){this.logic.hidden.push(ce(n,this.depth))}addDisabledReasonRule(n){this.logic.disabledReasons.push(ce(n,this.depth))}addReadonlyRule(n){this.logic.readonly.push(ce(n,this.depth))}addSyncErrorRule(n){this.logic.syncErrors.push(ce(n,this.depth))}addSyncTreeErrorRule(n){this.logic.syncTreeErrors.push(ce(n,this.depth))}addAsyncErrorRule(n){this.logic.asyncErrors.push(ce(n,this.depth))}addMetadataRule(n,e){this.logic.getMetadata(n).push(ce(e,this.depth))}getChild(n){return this.children.has(n)||this.children.set(n,new Ve(this.depth+1)),this.children.get(n)}hasLogic(n){return this===n}},gt=class t{builder;predicates;depth;logic;constructor(n,e,o){this.builder=n,this.predicates=e,this.depth=o,this.logic=n?Ui(n,e,o):new De([])}getChild(n){let e=this.builder?ci(this.builder,n):[];if(e.length===0)return new t(void 0,[],this.depth+1);if(e.length===1){let{builder:o,predicates:i}=e[0];return new t(o,[...this.predicates,...i.map(l=>It(l,this.depth))],this.depth+1)}else{let o=e.map(({builder:i,predicates:l})=>new t(i,[...this.predicates,...l.map(c=>It(c,this.depth))],this.depth+1));return new Rt(o)}}hasLogic(n){return this.builder?.hasLogic(n)??!1}},Rt=class t{all;logic;constructor(n){this.all=n,this.logic=new De([]);for(let e of n)this.logic.mergeIn(e.logic)}getChild(n){return new t(this.all.flatMap(e=>e.getChild(n)))}hasLogic(n){return this.all.some(e=>e.hasLogic(n))}};function ci(t,n){if(t instanceof Ve)return t.all.flatMap(({builder:e,predicate:o})=>{let i=ci(e,n);return o?i.map(({builder:l,predicates:c})=>({builder:l,predicates:[...c,o]})):i});if(t instanceof Ke)return[...n!==pe&&t.children.has(pe)?[{builder:t.getChild(pe),predicates:[]}]:[],...t.children.has(n)?[{builder:t.getChild(n),predicates:[]}]:[]];throw new Error("Unknown LogicNodeBuilder type")}function Ui(t,n,e){let o=new De(n);if(t instanceof Ve){let i=t.all.map(({builder:l,predicate:c})=>new gt(l,c?[...n,It(c,e)]:n,e));for(let l of i)o.mergeIn(l.logic)}else if(t instanceof Ke)o.mergeIn(t.logic);else throw new Error("Unknown LogicNodeBuilder type");return o}function It(t,n){return he(V({},t),{depth:n})}var pi=Symbol("PATH"),j=class t{keys;parent;keyInParent;root;children=new Map;fieldPathProxy=new Proxy(this,Gi);logicBuilder;constructor(n,e,o,i){this.keys=n,this.parent=o,this.keyInParent=i,this.root=e??this,o||(this.logicBuilder=Ve.newRoot())}get builder(){return this.logicBuilder?this.logicBuilder:this.parent.builder.getChild(this.keyInParent)}getChild(n){return this.children.has(n)||this.children.set(n,new t([...this.keys,n],this.root,this,n)),this.children.get(n)}mergeIn(n,e){let o=n.compile();this.builder.mergeIn(o.builder,e)}static unwrapFieldPath(n){return n[pi]}static newRoot(){return new t([],void 0,void 0,void 0)}},Gi={get(t,n){return n===pi?t:t.getChild(n).fieldPathProxy}},pt,We=new Map,Ne=class t{schemaFn;constructor(n){this.schemaFn=n}compile(){if(We.has(this))return We.get(this);let n=j.newRoot();We.set(this,n);let e=pt;try{pt=n,this.schemaFn(n.fieldPathProxy)}finally{pt=e}return n}static create(n){return n instanceof t?n:new t(n)}static rootCompile(n){try{return We.clear(),n===void 0?j.newRoot():n instanceof t?n.compile():new t(n).compile()}finally{We.clear()}}};function ji(t){return t instanceof Ne||typeof t=="function"}function Le(t){if(pt!==j.unwrapFieldPath(t).root)throw new Error("A FieldPath can only be used directly within the Schema that owns it, **not** outside of it or within a sub-schema.")}function re(t,n,e){return Le(t),j.unwrapFieldPath(t).builder.addMetadataRule(n,e),n}var ue={list(){return{reduce:(t,n)=>n===void 0?t:[...t,n],getInitial:()=>[]}},min(){return{reduce:(t,n)=>t===void 0||n===void 0?t??n:Math.min(t,n),getInitial:()=>{}}},max(){return{reduce:(t,n)=>t===void 0||n===void 0?t??n:Math.max(t,n),getInitial:()=>{}}},or(){return{reduce:(t,n)=>t||n,getInitial:()=>!1}},and(){return{reduce:(t,n)=>t&&n,getInitial:()=>!0}},override:Zi};function Zi(t){return{reduce:(n,e)=>e,getInitial:()=>t?.()}}var ht=class{reducer;create;brand;constructor(n,e){this.reducer=n,this.create=e}};function Z(t){return new ht(t??ue.override())}var Qt=Z(ue.or()),ui=Z(ue.max()),mi=Z(ue.min()),Kt=Z(ue.max()),$t=Z(ue.min()),zt=Z(ue.list());function Hi(t){return t.errors().length>0?"invalid":t.pending()?"unknown":"valid"}var Ft=class{node;constructor(n){this.node=n}rawSyncTreeErrors=y(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.syncTreeErrors.compute(this.node.context),...this.node.structure.parent?.validationState.rawSyncTreeErrors()??[]]);syncErrors=y(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.syncErrors.compute(this.node.context),...this.syncTreeErrors(),...Bi(this.node.submitState.serverErrors())]);syncValid=y(()=>this.shouldSkipValidation()?!0:this.node.structure.reduceChildren(this.syncErrors().length===0,(n,e)=>e&&n.validationState.syncValid(),qi));syncTreeErrors=y(()=>this.rawSyncTreeErrors().filter(n=>n.field===this.node.fieldProxy));rawAsyncErrors=y(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.asyncErrors.compute(this.node.context),...this.node.structure.parent?.validationState.rawAsyncErrors()??[]]);asyncErrors=y(()=>this.shouldSkipValidation()?[]:this.rawAsyncErrors().filter(n=>n==="pending"||n.field===this.node.fieldProxy));errors=y(()=>[...this.syncErrors(),...this.asyncErrors().filter(n=>n!=="pending")]);errorSummary=y(()=>this.node.structure.reduceChildren(this.errors(),(n,e)=>[...e,...n.errorSummary()]));pending=y(()=>this.node.structure.reduceChildren(this.asyncErrors().includes("pending"),(n,e)=>e||n.validationState.asyncErrors().includes("pending")));status=y(()=>{if(this.shouldSkipValidation())return"valid";let n=Hi(this);return this.node.structure.reduceChildren(n,(e,o)=>o==="invalid"||e.validationState.status()==="invalid"?"invalid":o==="unknown"||e.validationState.status()==="unknown"?"unknown":"valid",e=>e==="invalid")});valid=y(()=>this.status()==="valid");invalid=y(()=>this.status()==="invalid");shouldSkipValidation=y(()=>this.node.hidden()||this.node.disabled()||this.node.readonly())};function Bi(t){return t===void 0?[]:$(t)?t:[t]}function gi(t,n){if($(t))for(let e of t)e.field??=n;else t&&(t.field??=n);return t}var At=Z(),qt=class{node;cache=new WeakMap;constructor(n){this.node=n}resolve(n){if(!this.cache.has(n)){let e=y(()=>{let o=j.unwrapFieldPath(n),i=this.node,l=Ai();for(;l>0||!i.structure.logic.hasLogic(o.root.builder);)if(l--,i=i.structure.parent,i===void 0)throw new Error("Path is not part of this field tree.");for(let c of o.keys)if(i=i.structure.getChild(c),i===void 0)throw new Error(`Cannot resolve path .${o.keys.join(".")} relative to field ${["<root>",...this.node.structure.pathKeys()].join(".")}.`);return i.fieldProxy});this.cache.set(n,e)}return this.cache.get(n)()}get field(){return this.node.fieldProxy}get state(){return this.node}get value(){return this.node.structure.value}get key(){return this.node.structure.keyInParent}get pathKeys(){return this.node.structure.pathKeys}index=y(()=>{let n=this.key();if(!$(R(this.node.structure.parent.value)))throw new Error("RuntimeError: cannot access index, parent field is not an array");return Number(n)});fieldTreeOf=n=>this.resolve(n);stateOf=n=>this.resolve(n)();valueOf=n=>{let e=this.resolve(n)().value();if(e instanceof zn)throw new Error("Tried to read an 'AbstractControl' value form a 'form()'. Did you mean to use 'compatForm()' instead?");return e}},Ut=class{node;metadata=new Map;constructor(n){this.node=n;for(let e of this.node.logicNode.logic.getMetadataKeys())if(e.create){let o=this.node.logicNode.logic.getMetadata(e),i=R(()=>Tt(this.node.structure.injector,()=>e.create(y(()=>o.compute(this.node.context)))));this.metadata.set(e,i)}}get(n){if(this.has(n)&&!this.metadata.has(n)){if(n.create)throw Error("Managed metadata cannot be created lazily");let e=this.node.logicNode.logic.getMetadata(n);this.metadata.set(n,y(()=>e.compute(this.node.context)))}return this.metadata.get(n)}has(n){return this.node.logicNode.logic.hasMetadata(n)}},Wi={get(t,n,e){let o=t(),i=o.structure.getChild(n);if(i!==void 0)return i.fieldProxy;let l=R(o.value);if($(l)){if(n==="length")return o.value().length;if(n===Symbol.iterator)return()=>(o.value(),Array.prototype[Symbol.iterator].apply(o.fieldProxy))}if(Oe(l)&&n===Symbol.iterator)return function*(){for(let c in e)yield[c,e[c]]}},getOwnPropertyDescriptor(t,n){let e=R(t().value),o=Reflect.getOwnPropertyDescriptor(e,n);return o&&!o.configurable&&(o.configurable=!0),o},ownKeys(t){let n=R(t().value);return typeof n=="object"&&n!==null?Reflect.ownKeys(n):[]}};function Qi(t,n){let e=y(()=>t()[n()]);return e[Mt]=t[Mt],e.set=o=>{t.update(i=>Ki(i,o,n()))},e.update=o=>{e.set(o(R(e)))},e.asReadonly=()=>e,e}function Ki(t,n,e){if($(t)){let o=[...t];return o[e]=n,o}else return he(V({},t),{[e]:n})}var ft=class{logic;node;createChildNode;identitySymbol=Symbol();_injector=void 0;get injector(){return this._injector??=Ze.create({providers:[],parent:this.fieldManager.injector}),this._injector}constructor(n,e,o){this.logic=n,this.node=e,this.createChildNode=o}children(){let n=this.childrenMap();return n===void 0?[]:Array.from(n.byPropertyKey.values()).map(e=>R(e.reader))}getChild(n){let e=n.toString(),o=R(this.childrenMap)?.byPropertyKey.get(e)?.reader;return o||(o=this.createReader(e)),o()}reduceChildren(n,e,o){let i=this.childrenMap();if(!i)return n;let l=n;for(let c of i.byPropertyKey.values()){if(o?.(l))break;l=e(R(c.reader),l)}return l}destroy(){this.injector.destroy()}createKeyInParent(n,e,o){if(n.kind==="root")return hi;if(e===void 0){let i=o;return y(()=>{if(this.parent.structure.getChild(i)!==this.node)throw new Error(`RuntimeError: orphan field, looking for property '${i}' of ${Dt(this.parent)}`);return i})}else{let i=o;return y(()=>{let l=this.parent.structure.value();if(!$(l))throw new Error(`RuntimeError: orphan field, expected ${Dt(this.parent)} to be an array`);let c=l[i];if(Oe(c)&&c.hasOwnProperty(this.parent.structure.identitySymbol)&&c[this.parent.structure.identitySymbol]===e)return i;for(let p=0;p<l.length;p++){let P=l[p];if(Oe(P)&&P.hasOwnProperty(this.parent.structure.identitySymbol)&&P[this.parent.structure.identitySymbol]===e)return i=p.toString()}throw new Error(`RuntimeError: orphan field, can't find element in array ${Dt(this.parent)}`)})}}createChildrenMap(){return He({source:this.value,computation:(n,e)=>{if(!Oe(n))return;let o=e?.value??{byPropertyKey:new Map},i,l=$(n);o!==void 0&&(l?i=zi(o,n,this.identitySymbol):i=Yi(o,n));for(let c of Object.keys(n)){let p,P=n[c];if(P===void 0){o.byPropertyKey.has(c)&&(i??=V({},o),i.byPropertyKey.delete(c));continue}l&&Oe(P)&&!$(P)&&(p=P[this.identitySymbol]??=Symbol(""));let q;p&&(o.byTrackingKey?.has(p)||(i??=V({},o),i.byTrackingKey??=new Map,i.byTrackingKey.set(p,this.createChildNode(c,p,l))),q=(i??o).byTrackingKey.get(p));let H=o.byPropertyKey.get(c);H===void 0?(i??=V({},o),i.byPropertyKey.set(c,{reader:this.createReader(c),node:q??this.createChildNode(c,p,l)})):q&&q!==H.node&&(i??=V({},o),H.node=q)}return i??o}})}createReader(n){return y(()=>this.childrenMap()?.byPropertyKey.get(n)?.node)}},Gt=class extends ft{fieldManager;value;get parent(){}get root(){return this.node}get pathKeys(){return $i}get keyInParent(){return hi}childrenMap;constructor(n,e,o,i,l){super(e,n,l),this.fieldManager=o,this.value=i,this.childrenMap=this.createChildrenMap()}},jt=class extends ft{logic;parent;root;pathKeys;keyInParent;value;childrenMap;get fieldManager(){return this.root.structure.fieldManager}constructor(n,e,o,i,l,c){super(e,n,c),this.logic=e,this.parent=o,this.root=this.parent.structure.root,this.keyInParent=this.createKeyInParent({kind:"child",parent:o,pathNode:void 0,logic:e,initialKeyInParent:l,identityInParent:i,fieldAdapter:void 0},i,l),this.pathKeys=y(()=>[...o.structure.pathKeys(),this.keyInParent()]),this.value=Qi(this.parent.structure.value,this.keyInParent),this.childrenMap=this.createChildrenMap(),this.fieldManager.structures.add(this)}};var $i=y(()=>[]),hi=y(()=>{throw new Error("RuntimeError: the top-level field in the form has no parent")});function Dt(t){return`<root>.${t.structure.pathKeys().join(".")}`}function zi(t,n,e){let o,i=new Set(t.byPropertyKey.keys()),l=new Set(t.byTrackingKey?.keys());for(let c=0;c<n.length;c++){let p=n[c];i.delete(c.toString()),Oe(p)&&p.hasOwnProperty(e)&&l.delete(p[e])}if(i.size>0){o??=V({},t);for(let c of i)o.byPropertyKey.delete(c)}if(l.size>0){o??=V({},t);for(let c of l)o.byTrackingKey?.delete(c)}return o}function Yi(t,n){let e;for(let o of t.byPropertyKey.keys())n.hasOwnProperty(o)||(e??=V({},t),e.byPropertyKey.delete(o));return e}var Zt=class{node;selfSubmitting=M(!1);serverErrors;constructor(n){this.node=n,this.serverErrors=He({source:this.node.structure.value,computation:()=>[]})}submitting=y(()=>this.selfSubmitting()||(this.node.structure.parent?.submitting()??!1))},$e=class{structure;validationState;metadataState;nodeState;submitState;fieldAdapter;_context=void 0;get context(){return this._context??=new qt(this)}fieldProxy=new Proxy(()=>this,Wi);pathNode;constructor(n){this.pathNode=n.pathNode,this.fieldAdapter=n.fieldAdapter,this.structure=this.fieldAdapter.createStructure(this,n),this.validationState=this.fieldAdapter.createValidationState(this,n),this.nodeState=this.fieldAdapter.createNodeState(this,n),this.metadataState=new Ut(this),this.submitState=new Zt(this)}pendingSync=He({source:()=>this.value(),computation:(n,e)=>{e?.value?.abort()}});get logicNode(){return this.structure.logic}get value(){return this.structure.value}_controlValue=He(()=>this.value());get controlValue(){return this._controlValue.asReadonly()}get keyInParent(){return this.structure.keyInParent}get errors(){return this.validationState.errors}get errorSummary(){return this.validationState.errorSummary}get pending(){return this.validationState.pending}get valid(){return this.validationState.valid}get invalid(){return this.validationState.invalid}get dirty(){return this.nodeState.dirty}get touched(){return this.nodeState.touched}get disabled(){return this.nodeState.disabled}get disabledReasons(){return this.nodeState.disabledReasons}get hidden(){return this.nodeState.hidden}get readonly(){return this.nodeState.readonly}get fieldBindings(){return this.nodeState.fieldBindings}get submitting(){return this.submitState.submitting}get name(){return this.nodeState.name}get max(){return this.metadata(mi)}get maxLength(){return this.metadata($t)}get min(){return this.metadata(ui)}get minLength(){return this.metadata(Kt)}get pattern(){return this.metadata(zt)??Ji}get required(){return this.metadata(Qt)??Xi}metadata(n){return this.metadataState.get(n)}hasMetadata(n){return this.metadataState.has(n)}markAsTouched(){this.nodeState.markAsTouched(),this.pendingSync()?.abort(),this.sync()}markAsDirty(){this.nodeState.markAsDirty()}reset(n){R(()=>this._reset(n))}_reset(n){n!==void 0&&this.value.set(n),this.nodeState.markAsUntouched(),this.nodeState.markAsPristine();for(let e of this.structure.children())e._reset()}setControlValue(n){this._controlValue.set(n),this.markAsDirty(),this.debounceSync()}sync(){this.value.set(this.controlValue())}debounceSync(){return Et(this,null,function*(){this.pendingSync()?.abort();let n=this.nodeState.debouncer();if(n){let e=new AbortController,o=n(e.signal);if(o&&(this.pendingSync.set(e),yield o,e.signal.aborted))return}this.sync()})}static newRoot(n,e,o,i){return i.newRoot(n,e,o,i)}createStructure(n){return n.kind==="root"?new Gt(this,n.logic,n.fieldManager,n.value,this.newChild.bind(this)):new jt(this,n.logic,n.parent,n.identityInParent,n.initialKeyInParent,this.newChild.bind(this))}newChild(n,e,o){let i,l;return o?(i=this.pathNode.getChild(pe),l=this.structure.logic.getChild(pe)):(i=this.pathNode.getChild(n),l=this.structure.logic.getChild(n)),this.fieldAdapter.newChild({kind:"child",parent:this,pathNode:i,logic:l,initialKeyInParent:n,identityInParent:e,fieldAdapter:this.fieldAdapter})}},Ji=y(()=>[]),Xi=y(()=>!1),Ht=class{node;selfTouched=M(!1);selfDirty=M(!1);markAsTouched(){this.selfTouched.set(!0)}markAsDirty(){this.selfDirty.set(!0)}markAsPristine(){this.selfDirty.set(!1)}markAsUntouched(){this.selfTouched.set(!1)}fieldBindings=M([]);constructor(n){this.node=n}dirty=y(()=>{let n=this.selfDirty()&&!this.isNonInteractive();return this.node.structure.reduceChildren(n,(e,o)=>o||e.nodeState.dirty(),si)});touched=y(()=>{let n=this.selfTouched()&&!this.isNonInteractive();return this.node.structure.reduceChildren(n,(e,o)=>o||e.nodeState.touched(),si)});disabledReasons=y(()=>[...this.node.structure.parent?.nodeState.disabledReasons()??[],...this.node.logicNode.logic.disabledReasons.compute(this.node.context)]);disabled=y(()=>!!this.disabledReasons().length);readonly=y(()=>(this.node.structure.parent?.nodeState.readonly()||this.node.logicNode.logic.readonly.compute(this.node.context))??!1);hidden=y(()=>(this.node.structure.parent?.nodeState.hidden()||this.node.logicNode.logic.hidden.compute(this.node.context))??!1);name=y(()=>{let n=this.node.structure.parent;return n?`${n.name()}.${this.node.structure.keyInParent()}`:this.node.structure.fieldManager.rootName});debouncer=y(()=>{if(this.node.logicNode.logic.hasMetadata(At)){let e=this.node.logicNode.logic.getMetadata(At).compute(this.node.context);if(e)return o=>e(this.node.context,o)}return this.node.structure.parent?.nodeState.debouncer?.()});isNonInteractive=y(()=>this.hidden()||this.disabled()||this.readonly())},Bt=class{newRoot(n,e,o,i){return new $e({kind:"root",fieldManager:n,value:e,pathNode:o,logic:o.builder.build(),fieldAdapter:i})}newChild(n){return new $e(n)}createNodeState(n){return new Ht(n)}createValidationState(n){return new Ft(n)}createStructure(n,e){return n.createStructure(e)}},Wt=class{injector;rootName;constructor(n,e){this.injector=n,this.rootName=e??`${this.injector.get(wn)}.form${eo++}`}structures=new Set;createFieldManagementEffect(n){B(()=>{let e=new Set;this.markStructuresLive(n,e);for(let o of this.structures)e.has(o)||(this.structures.delete(o),R(()=>o.destroy()))},{injector:this.injector})}markStructuresLive(n,e){e.add(n);for(let o of n.children())this.markStructuresLive(o.structure,e)}},eo=0;function to(t){let n,e,o;return t.length===3?[n,e,o]=t:t.length===2?ji(t[1])?[n,e]=t:[n,o]=t:[n]=t,[n,e,o]}function Yt(...t){let[n,e,o]=to(t),i=o?.injector??S(Ze),l=Tt(i,()=>Ne.rootCompile(e)),c=new Wt(i,o?.name),p=o?.adapter??new Bt,P=$e.newRoot(c,n,l,p);return c.createFieldManagementEffect(P.structure),P.fieldProxy}function Jt(t,n){Le(t);let e=j.unwrapFieldPath(t).getChild(pe).fieldPathProxy;fi(e,n)}function fi(t,n){Le(t),j.unwrapFieldPath(t).mergeIn(Ne.create(n))}function Xt(t){return Ne.create(t)}var no=new Pt("");var en=class{field;constructor(n){this.field=n}control=this;get value(){return this.field().value()}get valid(){return this.field().valid()}get invalid(){return this.field().invalid()}get pending(){return this.field().pending()}get disabled(){return this.field().disabled()}get enabled(){return!this.field().disabled()}get errors(){let n=this.field().errors();if(n.length===0)return null;let e={};for(let o of n)e[o.kind]=o;return e}get pristine(){return!this.field().dirty()}get dirty(){return this.field().dirty()}get touched(){return this.field().touched()}get untouched(){return!this.field().touched()}get status(){if(this.field().disabled())return"DISABLED";if(this.field().valid())return"VALID";if(this.field().invalid())return"INVALID";if(this.field().pending())return"PENDING";throw Error("AssertionError: unknown form control status")}valueAccessor=null;hasValidator(n){return n===Qn.required?this.field().required():!1}updateValueAndValidity(){}},io=new Pt(""),oo={create:W,update:Pn},vi=(()=>{class t{element=S(yn).nativeElement;injector=S(Ze);field=w.required();state=y(()=>this.field()());[xn]=oo;config=S(no,{optional:!0});classes=Object.entries(this.config?.classes??{}).map(([e,o])=>[e,y(()=>o(this.state()))]);controlValueAccessors=S(Wn,{optional:!0,self:!0});interopNgControl;get \u0275interopControl(){return this.controlValueAccessors?.[0]??this.interopNgControl?.valueAccessor??void 0}getOrCreateNgControl(){return this.interopNgControl??=new en(this.state)}\u0275register(){B(e=>{let o=this.state();o.nodeState.fieldBindings.update(i=>[...i,this]),e(()=>{o.nodeState.fieldBindings.update(i=>i.filter(l=>l!==this))})},{injector:this.injector})}static \u0275fac=function(o){return new(o||t)};static \u0275dir=En({type:t,selectors:[["","field",""]],inputs:{field:[1,"field"]},features:[Ln([{provide:io,useExisting:t},{provide:Kn,useFactory:()=>S(t).getOrCreateNgControl()}])]})}return t})();function Ci(t,n=()=>!0){Le(t),j.unwrapFieldPath(t).builder.addReadonlyRule(n)}function ro(t){return new nn(t)}function ao(t,n){return new on(t,n)}function lo(t,n){return new rn(t,n)}function so(t,n){return new an(t,n)}function co(t){return new tn(t)}var tn=class{__brand=void 0;kind="";field;message;constructor(n){n&&Object.assign(this,n)}},Re=class{__brand=void 0;kind="";field;message;constructor(n){n&&Object.assign(this,n)}},nn=class extends Re{kind="required"};var on=class extends Re{minLength;kind="minLength";constructor(n,e){super(e),this.minLength=n}},rn=class extends Re{maxLength;kind="maxLength";constructor(n,e){super(e),this.maxLength=n}},an=class extends Re{pattern;kind="pattern";constructor(n,e){super(e),this.pattern=n}};function bi(t){let n=t;return typeof n.length=="number"?n.length:n.size}function me(t,n){return t instanceof Function?t(n):t}function vt(t){return typeof t=="number"?isNaN(t):t===""||t===!1||t==null}function po(t){return typeof t=="object"&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function _i(t){return po(t)?co(t):t}function uo(t){return t==null?t:$(t)?t.map(_i):_i(t)}function Ct(t,n){Le(t),j.unwrapFieldPath(t).builder.addSyncErrorRule(o=>uo(gi(n(o),o.field)))}function yi(t,n,e){let o=re(t,Z(),i=>typeof n=="number"?n:n(i));re(t,$t,({state:i})=>i.metadata(o)()),Ct(t,i=>{if(vt(i.value()))return;let l=i.state.metadata(o)();if(l!==void 0&&bi(i.value())>l)return e?.error?me(e.error,i):lo(l,{message:me(e?.message,i)})})}function bt(t,n,e){let o=re(t,Z(),i=>typeof n=="number"?n:n(i));re(t,Kt,({state:i})=>i.metadata(o)()),Ct(t,i=>{if(vt(i.value()))return;let l=i.state.metadata(o)();if(l!==void 0&&bi(i.value())<l)return e?.error?me(e.error,i):ao(l,{message:me(e?.message,i)})})}function yt(t,n,e){let o=re(t,Z(),i=>n instanceof RegExp?n:n(i));re(t,zt,({state:i})=>i.metadata(o)()),Ct(t,i=>{if(vt(i.value()))return;let l=i.state.metadata(o)();if(l!==void 0&&!l.test(i.value()))return e?.error?me(e.error,i):so(l,{message:me(e?.message,i)})})}function ge(t,n){let e=re(t,Z(),o=>n?.when?n.when(o):!0);re(t,Qt,({state:o})=>o.metadata(e)()),Ct(t,o=>{if(o.state.metadata(e)()&&vt(o.value()))return n?.error?me(n.error,o):ro({message:me(n?.message,o)})})}var mo=["pathSelectDialog"];function go(t,n){t&1&&f(0,"app-load-indicator",3)}function ho(t,n){if(t&1){let e=E();r(0,"p",2),m("click",function(){let i=g(e).$implicit,l=_(2);return h(l.setPath(i.path,i.type))}),d(1),a()}if(t&2){let e=n.$implicit,o=_(2);N("selected",e.path===o.path()),s(),v(e.name)}}function fo(t,n){if(t&1&&k(0,ho,2,3,"p",8,Q),t&2){let e=_();D(e.folders())}}function _o(t,n){t&1&&(r(0,"span",6),x(),r(1,"svg",9),f(2,"path",10),a()())}var wt=(()=>{class t{constructor(){this.settingsService=S(Me),this.name=w.required(),this.path=Se.required(),this.pathShouldEndWith=w.required(),this.isSubmitted=M(!1),this.isLoading=this.settingsService.filesResource.isLoading,this.folders=this.settingsService.filesResource.value,this.oldPath=M(""),this.onSubmit=se(),this.pathSelectDialog=oe.required("pathSelectDialog"),this.showDialog=()=>this.pathSelectDialog().nativeElement.showModal(),this.closeDialog=()=>this.pathSelectDialog().nativeElement.close(),B(()=>{let e=this.path();e||this.settingsService.filesPath.set("/"),e.endsWith("/")&&this.settingsService.filesPath.set(e)})}ngOnChanges(){this.oldPath.set(this.path())}ngAfterViewInit(){this.showDialog()}setPath(e,o="folder"){!e.endsWith("/")&&o==="folder"&&(e+="/"),this.path.set(e)}goUpOneLevel(){let e=this.path();e.endsWith("/")&&(e=e.slice(0,-1)),e=e.replace(/\/[^\/]*$/,""),this.setPath(e)}resetValue(){this.path.set(this.oldPath())}cancelDialog(){this.path.set(this.oldPath()),this.onSubmit.emit(""),this.closeDialog()}submitValue(){this.isSubmitted.set(!0);let e=this.path();e=e.toString().trim(),this.onSubmit.emit(e),this.oldPath.set(e)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-path-select-dialog"]],viewQuery:function(o,i){o&1&&Ce(i.pathSelectDialog,mo,5),o&2&&be()},inputs:{name:[1,"name"],path:[1,"path"],pathShouldEndWith:[1,"pathShouldEndWith"]},outputs:{path:"pathChange",onSubmit:"onSubmit"},features:[Je],decls:18,vars:5,consts:[["pathSelectDialog",""],["type","text","placeholder","Enter path here",3,"ngModelChange","ngModel"],[3,"click"],[1,"center"],[1,"buttons-row"],[3,"click","disabled"],[1,"loading-icon"],[1,"danger",3,"click"],[3,"selected"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"loading"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"]],template:function(o,i){if(o&1){let l=E();r(0,"dialog",null,0)(2,"h2"),d(3),a(),f(4,"hr"),r(5,"input",1),A("ngModelChange",function(p){return g(l),F(i.path,p)||(i.path=p),h(p)}),a(),r(6,"section")(7,"p",2),m("click",function(){return g(l),h(i.goUpOneLevel())}),d(8,"(Up one level)"),a(),C(9,go,1,0,"app-load-indicator",3)(10,fo,2,0),a(),r(11,"div",4)(12,"button",5),m("click",function(){return g(l),h(i.submitValue())}),r(13,"span"),d(14," Confirm "),a(),C(15,_o,3,0,"span",6),a(),r(16,"button",7),m("click",function(){return g(l),h(i.cancelDialog())}),d(17,"Cancel"),a()()()}o&2&&(s(3),Y("Select a Path for '",i.name(),"'"),s(2),I("ngModel",i.path),s(4),b(i.isLoading()?9:10),s(3),u("disabled",!i.path().endsWith(i.pathShouldEndWith())||i.isSubmitted()),s(3),b(i.isSubmitted()?15:-1))},dependencies:[U,X,ee,te,G],styles:["dialog[_ngcontent-%COMP%]{padding:1rem;height:65vh;display:flex;flex-direction:column}input[_ngcontent-%COMP%]{padding:.5rem;font-size:1rem;font-weight:700;color:var(--color-tertiary);margin:1rem;border:1px solid var(--color-outline);border-radius:.5rem}section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;width:60vw;overflow:auto;text-align:left;padding:1rem;overscroll-behavior:contain;border:1px solid var(--color-outline);border-radius:.5rem}@media(width<765px){section[_ngcontent-%COMP%]{width:80vw}}p[_ngcontent-%COMP%]{padding:.5rem;margin:0;cursor:pointer;border-bottom:1px solid var(--color-outline)}p[_ngcontent-%COMP%]:hover{opacity:.8}.selected[_ngcontent-%COMP%], p[_ngcontent-%COMP%]:hover{background-color:var(--color-on-tertiary);color:var(--color-tertiary)}.buttons-row[_ngcontent-%COMP%]{padding:1rem}.loading-icon[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center}.loading-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}.loading[_ngcontent-%COMP%]{animation:spin-animation 2s linear infinite}"]})}}return t})();var vo=["cancelDialog"],Co=["deleteConnectionDialog"];function bo(t,n){return this.connectionCreate().path_mappings[t].path_from}function yo(t,n){t&1&&(r(0,"h2"),d(1,"Create Connection"),a())}function wo(t,n){if(t&1){let e=E();r(0,"h2"),d(1,"Edit Connection"),a(),r(2,"button",9),m("click",function(){g(e);let i=_();return h(i.showDeleteDialog())}),x(),r(3,"svg",10),f(4,"path",11),a(),O(),r(5,"span",12),d(6,"Delete"),a()()}}function So(t,n){t&1&&f(0,"app-load-indicator")}function xo(t,n){if(t&1&&(r(0,"p",36),d(1),a()),t&2){let e=n.$implicit;s(),v(e.message)}}function Eo(t,n){if(t&1&&k(0,xo,2,1,"p",36,Q),t&2){let e=_(2);D(e.connectionForm.name().errors())}}function Mo(t,n){if(t&1&&(r(0,"label",37),f(1,"input",38),W(),r(2,"span",39),d(3),J(4,"uppercase"),a()()),t&2){let e=n.$implicit,o=_(2);N("option__selected",e===o.connectionCreate().arr_type),s(),u("id","arrtype_"+e+"_option")("value",e),ne(o.connectionForm.arr_type),s(2),v(ie(4,7,e))}}function Po(t,n){if(t&1&&(r(0,"label",37),f(1,"input",38),W(),r(2,"span",39),d(3),J(4,"uppercase"),a()()),t&2){let e=n.$implicit,o=_(2);N("option__selected",e===o.connectionCreate().monitor),s(),u("id","monitorType_"+e+"_option")("value",e),ne(o.connectionForm.monitor),s(2),v(ie(4,7,e))}}function To(t,n){if(t&1&&(r(0,"p",36),d(1),a()),t&2){let e=n.$implicit;s(),v(e.message)}}function Oo(t,n){if(t&1&&k(0,To,2,1,"p",36,Q),t&2){let e=_(2);D(e.connectionForm.url().errors())}}function ko(t,n){if(t&1&&(r(0,"p",36),d(1),a()),t&2){let e=n.$implicit;s(),v(e.message)}}function Do(t,n){if(t&1&&k(0,ko,2,1,"p",36,Q),t&2){let e=_(2);D(e.connectionForm.external_url().errors())}}function Vo(t,n){if(t&1&&(r(0,"p",36),d(1),a()),t&2){let e=n.$implicit;s(),v(e.message)}}function No(t,n){if(t&1&&k(0,Vo,2,1,"p",36,Q),t&2){let e=_(2);D(e.connectionForm.api_key().errors())}}function Lo(t,n){if(t&1){let e=E();r(0,"div",42)(1,"div",13)(2,"label",43),d(3,"Path From"),a(),f(4,"input",44),W(),a(),r(5,"div",13)(6,"label",43),d(7,"Path To"),a(),r(8,"div",45),f(9,"input",46),W(),r(10,"button",47),m("click",function(){let i=g(e).$index,l=_(3);return h(l.openPathSelectDialog(i))}),x(),r(11,"svg",10),f(12,"path",48),a()()()(),O(),r(13,"button",49),m("click",function(){let i=g(e).$index,l=_(3);return h(l.removePathMapping(i))}),x(),r(14,"svg",10),f(15,"path",50),a()()()}if(t&2){let e=n.$implicit,o=n.$index;s(2),u("for","path_from"+o),s(2),u("id","path_from"+o),ne(e.path_from),u("readOnly",!0),s(2),u("for","path_to"+o),s(3),u("id","path_to"+o),ne(e.path_to),s(4),u("id","remove"+o)}}function Ro(t,n){if(t&1&&(r(0,"div",40)(1,"h3"),d(2,"Path Mappings"),a(),f(3,"help-link-icon",23),a(),f(4,"hr"),r(5,"div",41),k(6,Lo,16,10,"div",42,bo,!0),a()),t&2){let e=_(2);s(3),u("link","https://nandyalu.github.io/trailarr/getting-started/03-setup/connections/#2-path-mappings"),s(3),D(e.connectionForm.path_mappings)}}function Io(t,n){if(t&1&&(r(0,"p",30),d(1),a()),t&2){_();let e=fe(36);s(),v(e)}}function Fo(t,n){if(t&1){let e=E();r(0,"button",51),m("click",function(i){g(e);let l=_(2);return h(l.onSubmit(i))}),x(),r(1,"svg",10),f(2,"path",52),a(),O(),r(3,"span",12),d(4,"Submit"),a()()}if(t&2){let e=_(2);u("disabled",!e.connectionForm().dirty()||!e.connectionForm().valid())}}function Ao(t,n){if(t&1){let e=E();r(0,"button",53),m("click",function(i){g(e);let l=_(2);return h(l.onSubmit(i))}),x(),r(1,"svg",10),f(2,"path",54),a(),O(),r(3,"span",12),d(4,"Test"),a()()}if(t&2){let e=_(2);u("disabled",!e.connectionForm().dirty()||e.connectionForm().invalid())}}function qo(t,n){t&1&&f(0,"div",35)}function Uo(t,n){if(t&1){let e=E();r(0,"form",2)(1,"div",13)(2,"label",14),d(3,"Name"),a(),f(4,"input",15),W(),C(5,Eo,2,0),a(),r(6,"div",16)(7,"div",17)(8,"legend",18),d(9,"Arr Type:"),a(),r(10,"div",19),k(11,Mo,5,9,"label",20,Q),a()(),r(13,"div",17)(14,"legend",21),d(15,"Monitor Type:"),a(),r(16,"div",22),k(17,Po,5,9,"label",20,Q),a(),f(19,"help-link-icon",23),a()(),r(20,"div",13)(21,"label",24),d(22,"Server URL"),a(),f(23,"input",25),W(),C(24,Oo,2,0),a(),r(25,"div",13)(26,"label",26),d(27,"External URL"),a(),f(28,"input",27),W(),C(29,Do,2,0),a(),r(30,"div",13)(31,"label",28),d(32,"API Key"),a(),f(33,"input",29),W(),C(34,No,2,0),a(),C(35,Ro,8,1),ye(36),C(37,Io,2,1,"p",30),r(38,"div",5),C(39,Fo,5,1,"button",31)(40,Ao,5,1,"button",32),r(41,"button",33),m("click",function(){g(e);let i=_();return h(i.onCancel())}),x(),r(42,"svg",10),f(43,"path",34),a(),O(),r(44,"span",12),d(45,"Cancel"),a()()(),C(46,qo,1,0,"div",35),a()}if(t&2){let e=_();u("id","connectionForm"+e.connectionId()),s(4),ne(e.connectionForm.name),s(),b(e.connectionForm.name().touched()&&e.connectionForm.name().invalid()?5:-1),s(6),D(e.arrOptions),s(6),D(e.monitorOptions),s(2),u("link","https://nandyalu.github.io/trailarr/user-guide/settings/connections/#monitor-types"),s(4),ne(e.connectionForm.url),s(),b(e.connectionForm.url().touched()&&e.connectionForm.url().invalid()?24:-1),s(4),ne(e.connectionForm.external_url),s(),b(e.connectionForm.external_url().touched()&&e.connectionForm.external_url().invalid()?29:-1),s(4),ne(e.connectionForm.api_key),s(),b(e.connectionForm.api_key().touched()&&e.connectionForm.api_key().invalid()?34:-1),s(),b(e.arePathMappingsAdded()?35:-1),s();let o=we(e.submitResult());s(),b(o?37:-1),s(2),b(e.isReadyToSubmit()?39:40),s(7),b(o.toLowerCase().includes("ated success")?46:-1)}}var Go=Xt(t=>{Ci(t.path_from),ge(t.path_from,{message:"Path From is required."}),ge(t.path_to,{message:"Path To is required."})}),ln=(()=>{class t{constructor(){this.changeDetectorRef=S(Fn),this.router=S(xe),this.viewContainerRef=S(ae),this.connectionService=S(dt),this.connectionId=w(0,{transform:e=>{let o=Number(e);return isNaN(o)?-1:o}}),this.arrOptions=[st.Radarr,st.Sonarr],this.monitorOptions=[Te.Missing,Te.New,Te.None,Te.Sync],this.connectionCreate=M({api_key:"",arr_type:st.Radarr,monitor:Te.New,name:"",path_mappings:[],url:"",external_url:""}),this.arePathMappingsAdded=M(!1),this.isCreate=M(!1),this.isConnectionTested=M(!1),this.isReadyToSubmit=M(!1),this.isSubmitting=M(!1),this.submitResult=M(""),this.connectionForm=Yt(this.connectionCreate,e=>{ge(e.api_key,{message:"API Key is required."}),yt(e.api_key,/^[a-zA-Z0-9]*$/,{message:"API Key must be alphanumeric."}),bt(e.api_key,32,{message:"API Key must be at least 32 characters long."}),yi(e.api_key,50,{message:"API Key cannot be longer than 50 characters."}),ge(e.arr_type,{message:"ARR Type is required."}),ge(e.monitor,{message:"Monitor Type is required."}),ge(e.name,{message:"Connection Name is required."}),bt(e.name,3,{message:"Connection Name must be at least 3 characters long."}),ge(e.url,{message:"URL is required."}),bt(e.url,5,{message:"URL must be at least 5 characters long."}),yt(e.url,/^https?:\/\/.*/,{message:"URL must start with http:// or https://."}),yt(e.external_url,/^https?:\/\/.*/,{message:"External URL must start with http:// or https://."}),Jt(e.path_mappings,Go)}),this.connection=this.connectionService.selectedConnection,this.isLoading=this.connectionService.connectionsResource.isLoading,this.connectionIDeffect=B(()=>{let e=this.connectionId();if(this.isLoading()){console.log("Connection data is still loading. Waiting for it to complete.");return}if(e==-1)this.isCreate.set(!0);else if(!this.connectionService.connectionExists(e)){console.warn(`Connection with ID '${e}' does not exist. Redirecting to connections list.`),this.router.navigate(["/settings/connections"]);return}this.connectionService.connectionID.set(e)}),this.connectionEffect=B(()=>{if(this.isSubmitting())return;let e=this.connection();e&&!this.isSubmitting()&&(this.connectionCreate.set(e),this.isCreate.set(e.id===-1),this.isConnectionTested.set(!1),this.isReadyToSubmit.set(!1),this.arePathMappingsAdded.set(e.path_mappings.length>0),this.submitResult.set(""),this.changeDetectorRef.markForCheck())}),this.cancelDialog=oe("cancelDialog"),this.deleteDialog=oe("deleteConnectionDialog"),this.closeDeleteDialog=()=>this.deleteDialog()?.nativeElement.close(),this.showDeleteDialog=()=>this.deleteDialog()?.nativeElement.showModal(),this.closeCancelDialog=()=>this.cancelDialog()?.nativeElement.close(),this.showCancelDialog=()=>this.cancelDialog()?.nativeElement.showModal()}formatPathFrom(e){return e.endsWith("/")||e.endsWith("\\")?e:e.includes("/")?e+"/":e.includes("\\")?e+"\\":e}addPathMappings(e){let o=!1,i=0,l=this.connectionCreate().path_mappings,c=[];if(e.forEach(p=>{let P=this.formatPathFrom(p);l.some(H=>H.path_from===P)||(c.push({id:null,connection_id:null,path_from:P,path_to:""}),o=!0,i++)}),this.connectionCreate.update(p=>(p.path_mappings=[...p.path_mappings,...c],V({},p))),o){this.arePathMappingsAdded.set(!0);let p=`Retrieved ${e.length} root folders.`;p+=`
Added ${i} new root folders to Path Mappings.`,p+=`
Please update and test the connection to submit!`,e.length===1&&(p=p.replace("root folders.","root folder.")),i===1&&(p=p.replace("new root folders","new root folder")),this.submitResult.update(P=>`${P}
${p}`)}else this.isConnectionTested.set(!0),this.arePathMappingsAdded.set(!0),this.isReadyToSubmit.set(!0),this.submitResult.update(p=>{let P=p+`
Retrieved ${e.length} root folders that were already in Path Mappings.
You can now submit the connection.`;return e.length===1&&(P=P.replace("root folders that were ","root folder that was ")),P});console.log("Path Mappings after adding root folders:",this.connectionCreate())}removePathMapping(e){let i=this.connectionCreate().path_mappings.filter((l,c)=>c!==e);this.connectionCreate.update(l=>(l.path_mappings=i,V({},l)))}openPathSelectDialog(e){let o=this.connectionCreate().path_mappings[e].path_from,i=this.viewContainerRef.createComponent(wt);i.setInput("name",o),i.setInput("path",o),i.setInput("pathShouldEndWith","/"),i.instance.onSubmit.subscribe(l=>{l&&this.connectionForm.path_mappings[e].path_to().setControlValue(l),setTimeout(()=>{i.destroy()},500)})}checkConnectionValidity(){return this.connectionForm().valid()?!0:(this.submitResult.set("Form is invalid, please correct the errors and try again."),!1)}onCancel(){this.connectionForm().dirty()?this.showCancelDialog():this.router.navigate(["/settings/connections"])}onConfirmCancel(){this.closeCancelDialog(),this.router.navigate(["/settings/connections"])}onConfirmDelete(){this.closeDeleteDialog(),this.deleteConnection()}onSubmit(e){if(e.preventDefault(),!!this.checkConnectionValidity()){if(!this.isConnectionTested()||!this.isReadyToSubmit()){this.testConnection();return}if(!this.isReadyToSubmit()){this.submitResult.set("Please test the connection before submitting.");return}if(this.isCreate()){this.createConnection();return}this.updateConnection()}}createConnection(){if(!this.checkConnectionValidity()||!this.isReadyToSubmit()||this.isSubmitting())return;this.isSubmitting.set(!0),this.submitResult.set("Creating connection, please wait...");let e=this.connectionCreate();this.connectionService.addConnection(e).subscribe({next:o=>{this.submitResult.set(o),setTimeout(()=>{this.router.navigate(["/settings/connections"]).then(()=>{this.connectionService.connectionsResource.reload()})},3e3)},error:o=>{console.error("Error creating connection:",o),this.submitResult.set(`Error creating connection: ${o.message||o}. Try again in some time`)}})}deleteConnection(){this.connectionService.connectionExists(this.connectionId())&&this.connectionService.deleteConnection(this.connectionId()).subscribe({next:e=>{this.submitResult.set(`Connection deleted successfully: ${e}`),this.connectionService.connectionsResource.reload(),setTimeout(()=>{this.router.navigate(["/settings/connections"]).then(()=>{this.connectionService.connectionsResource.reload()})},3e3)},error:e=>{console.error("Error deleting connection:",e),this.submitResult.set(`Error deleting connection: ${e.message||e}. Try again in some time`)}})}getRootFolders(){if(!this.checkConnectionValidity()||this.isReadyToSubmit())return;let e=this.connectionCreate();this.connectionService.getRootFolders(e).subscribe({next:o=>{Array.isArray(o)?(this.arePathMappingsAdded.set(!0),this.addPathMappings(o)):(this.arePathMappingsAdded.set(!1),this.submitResult.update(i=>`${i}
Error getting root folders: ${o}`))},error:o=>{console.error("Error fetching root folders:",o),this.submitResult.update(i=>`${i}
Error fetching root folders: ${o.message||o}. Try again in some time`)}})}testConnection(){if(!this.checkConnectionValidity())return;let e=this.connectionCreate();this.connectionService.testConnection(e).subscribe({next:o=>{this.submitResult.set(o),o.toLowerCase().includes("success")&&(this.isConnectionTested()?(this.isReadyToSubmit.set(!0),this.submitResult.update(i=>`${i}
Connection tested successfully. You can now submit the connection.`)):(this.isConnectionTested.set(!0),this.getRootFolders()))},error:o=>{console.error("Error testing connection:",o),this.submitResult.set(`Error testing connection: ${o.message||o}. Try again in some time`)}})}updateConnection(){if(!this.checkConnectionValidity()||!this.isReadyToSubmit()||this.isSubmitting())return;this.isSubmitting.set(!0),this.submitResult.set("Updating connection, please wait...");let e=this.connectionCreate();this.connectionService.updateConnection(this.connectionId(),e).subscribe({next:o=>{this.submitResult.set(o),setTimeout(()=>{this.router.navigate(["/settings/connections"]).then(()=>{this.connectionService.connectionsResource.reload()})},3e3)},error:o=>{console.error("Error updating connection:",o),this.submitResult.set(`Error updating connection: ${o.message||o}. Try again in some time`)}})}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-edit-connection2"]],viewQuery:function(o,i){o&1&&Ce(i.cancelDialog,vo,5)(i.deleteDialog,Co,5),o&2&&be(2)},inputs:{connectionId:[1,"connectionId"]},decls:31,vars:2,consts:[["cancelDialog",""],["deleteConnectionDialog",""],[3,"id"],[3,"click"],[1,"dialog-content",3,"click"],[1,"buttons-row"],[1,"danger",3,"click"],[1,"primary",3,"click"],[1,"secondary",3,"click"],[1,"icon-button","danger","top-right-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M259.09-114.02q-28.45 0-48.41-19.89-19.96-19.89-19.96-48.24v-565.94h-45.07v-68.13h198.28v-34.3h271.9v34.3h198.52v68.13h-45.07v565.94q0 27.6-20.33 47.86-20.34 20.27-48.04 20.27H259.09Zm441.82-634.07H259.09v565.94h441.82v-565.94ZM363.89-266.24h64.07v-399h-64.07v399Zm168.15 0h64.31v-399h-64.31v399ZM259.09-748.09v565.94-565.94Z"],[1,"text"],[1,"input-group"],["for","name"],["id","name","autocapitalize","words","autocomplete","off","placeholder","Connection Name","type","text",3,"field"],[1,"d-row"],[1,"option-container"],["id","arrtype_label"],["role","radiogroup","aria-labelledby","arrtype_label",1,"options-bar"],[1,"option-label",3,"option__selected"],["id","monitorType_label"],["role","radiogroup","aria-labelledby","monitorType_label",1,"options-bar"],[3,"link"],["for","url"],["id","url","autocomplete","off","placeholder","Server URL Ex: http://192.168.0.15:6969","type","url",3,"field"],["for","externalUrl"],["id","externalUrl","autocomplete","off","placeholder","External URL Ex: http://radarr.mydomain.com","type","url",3,"field"],["for","apiKey"],["id","apiKey","autocomplete","off","placeholder","API Key","type","text",3,"field"],[1,"result-text"],["id","submit","type","submit",1,"animated-button","primary",3,"disabled"],["id","test","type","test",1,"animated-button","primary",3,"disabled"],["id","cancel","type","button",1,"animated-button","secondary",3,"click"],["d","m247-195-51-52 233-233-233-234 51-52 234 234 232-234 51 52-232 234 232 233-51 52-232-234-234 234Z"],[1,"close-progress"],[1,"invalid-text"],[1,"option-label"],["type","radio",3,"id","value","field"],[1,"option-name"],[1,"d-row",2,"justify-content","flex-start"],[1,"mappings-wrapper"],[1,"d-row","mappings"],[3,"for"],["type","text","placeholder","Arr Internal Path","autocomplete","off",3,"id","field","readOnly"],[1,"input-wrapper"],["type","text","placeholder","Trailarr Internal Path","autocomplete","off",3,"id","field"],["type","button","title","Select Path",1,"tertiary","folder-icon",3,"click"],["d","M137-144q-28.72 0-50.86-22.32T64-217v-526q0-28.36 22.14-50.68T137-816h271l73 73h342q28.36 0 50.68 22.32T896-670v453q0 28.36-22.32 50.68T823-144H137Zm0-73h686v-453H451l-73-73H137v526Zm0 0v-526 526Z"],["type","button","name","Remove Path Mapping",1,"icononly-button","tertiary",3,"click","id"],["d","m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"],["id","submit","type","submit",1,"animated-button","primary",3,"click","disabled"],["d","M856-690v513q0 28.73-22.14 50.86Q811.72-104 783-104H177q-28.73 0-50.86-22.14Q104-148.27 104-177v-606q0-28.72 22.14-50.86Q148.27-856 177-856h513l166 166Zm-73 32.22L657.78-783H177v606h606v-480.78ZM479.82-238q46.18 0 78.68-32.32 32.5-32.33 32.5-78.5 0-46.18-32.32-78.68-32.33-32.5-78.5-32.5-46.18 0-78.68 32.32-32.5 32.33-32.5 78.5 0 46.18 32.32 78.68 32.33 32.5 78.5 32.5ZM226-577h374v-157H226v157Zm-49-80.78V-177v-606 125.22Z"],["id","test","type","test",1,"animated-button","primary",3,"click","disabled"],["d","M766-113q-43 0-76-26t-41-63H443q-67.76 0-111.38-43.67Q288-289.34 288-357.17T331.62-469q43.62-44 111.38-44h77q40.17 0 65.59-25.17 25.41-25.17 25.41-65t-25.35-65.33Q560.3-694 520.21-694H312q-10 37-42.5 63T194-605q-50.92 0-85.96-35.06Q73-675.12 73-726.06t35.04-86.44Q143.08-848 194-848q43 0 75.5 26.5t42.91 62.5H520q68.17 0 112.09 43.88 43.91 43.87 43.91 112 0 68.12-43.91 111.62Q588.17-448 520-448h-77q-39.76 0-64.88 25.38Q353-397.25 353-357.12 353-317 378.12-292q25.12 25 64.88 25h206q9.3-35.81 41.65-62.41Q723-356 766-356q51.33 0 86.67 35.26Q888-285.47 888-234.24 888-183 852.67-148q-35.34 35-86.67 35ZM193.68-678q20.32 0 34.82-13.68 14.5-13.69 14.5-34 0-20.32-14.27-34.82T194.14-775q-20.32 0-34.23 14.27Q146-746.46 146-726.14q0 20.32 13.68 34.23 13.69 13.91 34 13.91Z"]],template:function(o,i){if(o&1){let l=E();C(0,yo,2,0,"h2")(1,wo,7,0),f(2,"hr"),C(3,So,1,0,"app-load-indicator")(4,Uo,47,19,"form",2),r(5,"dialog",3,0),m("click",function(){return g(l),h(i.closeCancelDialog())}),r(7,"div",4),m("click",function(p){return g(l),h(p.stopPropagation())}),r(8,"h2"),d(9,"Unsaved Changes"),a(),r(10,"p"),d(11,"Changes will be lost. Are you sure you want to cancel?"),a(),r(12,"div",5)(13,"button",6),m("click",function(){return g(l),h(i.onConfirmCancel())}),d(14,"Yes"),a(),r(15,"button",7),m("click",function(){return g(l),h(i.closeCancelDialog())}),d(16,"No"),a()()()(),r(17,"dialog",3,1),m("click",function(){return g(l),h(i.closeDeleteDialog())}),r(19,"div",4),m("click",function(p){return g(l),h(p.stopPropagation())}),r(20,"h2"),d(21,"Delete Connection"),a(),r(22,"p"),d(23,"This will Delete the connection and no longer monitor its Media"),a(),r(24,"p"),d(25,"Delete the connection?"),a(),r(26,"div",5)(27,"button",6),m("click",function(){return g(l),h(i.onConfirmDelete())}),d(28,"Delete"),a(),r(29,"button",8),m("click",function(){return g(l),h(i.closeDeleteDialog())}),d(30,"Cancel"),a()()()()}o&2&&(b(i.isCreate()?0:1),s(3),b(i.isLoading()||!i.connectionForm?3:4))},dependencies:[vi,Pe,G,et],styles:["[_nghost-%COMP%]{width:100%;border:2px solid var(--color-outline);padding:1.5rem;display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-radius:1rem;background-color:var(--color-surface-container);transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.top-right-button[_ngcontent-%COMP%]{position:absolute;top:2rem;right:2rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:0;border:var(--color-outline);border-radius:.5rem;container-type:inline-size}.input-group[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:2px}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin:0 0 0 .5rem;font-size:smaller}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto;height:3rem;padding:.75rem;font-family:inherit;font-size:1rem;letter-spacing:1px;background-color:var(--color-surface-container-high);color:var(--color-tertiary);border:2px solid var(--color-outline);border-radius:.5rem}input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid var(--color-error);opacity:.6;background-color:var(--color-error-container);color:var(--color-on-error-container)}.input-group[_ngcontent-%COMP%]   .invalid-text[_ngcontent-%COMP%]{color:var(--color-error)}.d-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;justify-content:space-around;align-items:center}@container (width < 40rem){.d-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}.option-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}@container (width < 40rem){.option-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}.options-bar[_ngcontent-%COMP%]{padding:.25rem;display:flex;background-color:var(--color-surface-container-high);border-radius:10px;border:.5px solid var(--color-outline)}.option-label[_ngcontent-%COMP%]{padding:10px;cursor:pointer;border-radius:10px;transition:.3s ease;flex:1 1 auto;text-align:center}.option-label[_ngcontent-%COMP%]:has(input:focus-visible){outline:-webkit-focus-ring-color auto 1px}.option-name[_ngcontent-%COMP%]{border-radius:10px;border:none;transition:all .15s ease-in-out}.option__selected[_ngcontent-%COMP%]{background-color:var(--color-tertiary-container);font-weight:600;color:var(--color-on-tertiary-container);transition:.3s ease}input[type=radio][_ngcontent-%COMP%]{clip:rect(0 0 0 0);clip-path:inset(100%);width:1px;height:1px;overflow:hidden;position:absolute;white-space:nowrap}.mappings-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.d-row.mappings[_ngcontent-%COMP%]{align-items:flex-end}input[_ngcontent-%COMP%]:read-only{opacity:.8;cursor:not-allowed}.input-wrapper[_ngcontent-%COMP%]{display:inline-block;width:auto;height:3rem;position:relative}.folder-icon[_ngcontent-%COMP%]{position:absolute;inset:0 0 0 auto;cursor:pointer;height:auto;width:auto;padding:.5rem;border-radius:.5rem;border-top-left-radius:0;border-bottom-left-radius:0}.folder-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:2rem;width:2rem}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;padding:.75rem 3rem .75rem .75rem}.result-text[_ngcontent-%COMP%]{white-space:pre-wrap;color:var(--color-info);font-weight:600;line-height:1.5rem}.close-progress[_ngcontent-%COMP%]{width:100%;height:.25rem;background-color:var(--color-success-text);border-radius:.25rem;animation:_ngcontent-%COMP%_closeProgress 3s linear 0s}@keyframes _ngcontent-%COMP%_closeProgress{0%{width:100%}to{width:0%}}.dialog-content[_ngcontent-%COMP%]{background-color:var(--color-on-error-container);color:var(--color-on-error);padding:1rem;text-align:center}dialog[_ngcontent-%COMP%]::backdrop{background-image:linear-gradient(0deg,gray,#690005)}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0})}}return t})();var Zo=t=>[t],Ho=(t,n,e)=>["/",t,n,e];function Bo(t,n){t&1&&f(0,"app-load-indicator",1)}function Wo(t,n){if(t&1&&(r(0,"p"),d(1),a()),t&2){let e=_(2);z(Nn("result-",e.resultType())),s(),v(e.resultMessage())}}function Qo(t,n){t&1&&f(0,"img",18)}function Ko(t,n){t&1&&f(0,"img",19)}function $o(t,n){if(t&1&&(r(0,"div",12),f(1,"a",13),r(2,"h3",14),d(3),a(),r(4,"div",15)(5,"p"),d(6),a(),r(7,"p"),d(8),J(9,"uppercase"),a(),r(10,"p"),d(11),J(12,"date"),a()(),r(13,"div",16)(14,"a",17),C(15,Qo,1,0,"img",18)(16,Ko,1,0,"img",19),a()()()),t&2){let e,o=n.$implicit;s(),u("routerLink",L(13,Zo,o.id)),s(2),v(o.name),s(3),Y("URL: ",o.url),s(2),Y("Monitor: ",ie(9,8,o.monitor)),s(3),Y("Added: ",In(12,10,o.added_at,"mediumDate"));let i=o.external_url.length>0?o.external_url:o.url;s(3),u("href",Vn(i),Sn),s(),b((e=o.arr_type)==="radarr"?15:e==="sonarr"?16:-1)}}function zo(t,n){if(t&1&&(r(0,"div",11),k(1,$o,17,15,"div",12,le),a()),t&2){_(2);let e=fe(0);s(),D(e)}}function Yo(t,n){if(t&1&&(r(0,"div",1)(1,"div",20),d(2,"Add New!"),a(),r(3,"p",21),d(4,`I'm all alone here!. Click the "ADD" button to add some Radarr/Sonarr instances to let the magic happen!`),a()()),t&2){let e=_(2);s(),u("routerLink",Rn(1,Ho,e.RouteSettings,e.RouteConnections,e.RouteAdd))}}function Jo(t,n){if(t&1){let e=E();r(0,"div",2)(1,"h2"),d(2,"Connections"),a(),r(3,"i",3),m("click",function(){g(e);let i=_();return h(i.connectionsResource.reload())}),x(),r(4,"svg",4),f(5,"path",5),a()()(),O(),r(6,"button",6),x(),r(7,"svg",7),f(8,"path",8),a(),O(),r(9,"span",9),d(10,"Add New"),a()(),f(11,"hr"),C(12,Wo,2,4,"p",10),C(13,zo,3,0,"div",11)(14,Yo,5,5,"div",1)}if(t&2){let e=_(),o=fe(0);s(3),N("loading",e.connectionsResource.isLoading()),s(3),u("routerLink",e.RouteAdd),s(6),b(e.resultMessage()?12:-1),s(),b(o&&o.length>0?13:14)}}var wi=(()=>{class t{constructor(){this.connectionService=S(dt),this.connectionsResource=this.connectionService.connectionsResource,this.isLoading=this.connectionsResource.isLoading,this.resultMessage=M(""),this.resultType=M(""),this.selectedId=0,this.RouteAdd="add",this.RouteConnections=de,this.RouteEdit=it,this.RouteSettings=ot}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-show-connections"]],decls:4,vars:2,consts:[[1,"sett-conn-container"],[1,"center"],[1,"title-block"],["title","Refresh",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"refresh-icon"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],[1,"animated-button","top-right-button",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"],[1,"text"],[3,"class"],[1,"connection-container"],[1,"connection-card"],[1,"card-link",3,"routerLink"],[1,"title"],[1,"content"],[1,"link-image"],["target","_blank",3,"href"],["src","assets/radarr_128.png"],["src","assets/sonarr_128.png"],[1,"all-empty-card","center",3,"routerLink"],[1,"text-primary"]],template:function(o,i){o&1&&(ye(0),r(1,"div",0),C(2,Bo,1,0,"app-load-indicator",1)(3,Jo,15,5),a()),o&2&&(we(i.connectionsResource.value()),s(2),b(i.isLoading()?2:3))},dependencies:[tt,G,Ee,et,Gn],styles:[".sett-conn-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;position:relative;gap:12px}.title-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.refresh-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.loading[_ngcontent-%COMP%]{cursor:progress;animation:spin-animation 2s linear infinite}.top-right-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:10px}.center[_ngcontent-%COMP%]{margin:auto}.result-success[_ngcontent-%COMP%]{padding:10px;display:block;border-radius:4px;color:var(--color-success-text);background-color:var(--color-success)}.result-error[_ngcontent-%COMP%]{padding:10px;display:block;border-radius:4px;color:var(--color-error-text);background-color:var(--color-error)}.connection-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:1rem}.connection-card[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr auto;grid-template-columns:1fr auto;gap:10px;max-width:500px;padding:12px;border:2px solid var(--color-outline);border-radius:8px;background-color:var(--color-surface-container);color:var(--color-on-surface);position:relative}@media(max-width:765px){.connection-card[_ngcontent-%COMP%]{margin:auto;width:100%}}.card-link[_ngcontent-%COMP%]{position:absolute;inset:0}.connection-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{grid-row:1;grid-column:1/span 2;color:var(--color-primary);text-align:center}.connection-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{grid-row:2;grid-column:1}.connection-card[_ngcontent-%COMP%]   .link-image[_ngcontent-%COMP%]{grid-row:2;grid-column:2;width:auto;margin:auto;position:relative;pointer-events:none;z-index:1}.connection-card[_ngcontent-%COMP%]   .link-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem;pointer-events:all}.connection-card[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{grid-row:3;grid-column:1/span 2;display:flex;justify-content:space-between}.dialog-content[_ngcontent-%COMP%]{background-color:var(--color-on-error-container);color:var(--color-on-error);padding:1rem;text-align:center}dialog[_ngcontent-%COMP%]::backdrop{background-image:linear-gradient(0deg,gray,#690005)}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0})}}return t})();var Xo=t=>["content-label",t],er=t=>["options-bar",t];function tr(t,n){if(t&1&&(r(0,"small"),d(1),a()),t&2){let e=_();s(),v(e.descriptionExtra())}}function nr(t,n){t&1&&(r(0,"span",4),d(1,"best"),a())}function ir(t,n){if(t&1&&(r(0,"span",4),d(1),a()),t&2){let e=_().$implicit;s(),v(e)}}function or(t,n){if(t&1){let e=E();r(0,"label",2)(1,"input",3),m("change",function(){let i=g(e).$implicit,l=_();return h(l.onOptionClick(i))}),a(),C(2,nr,2,0,"span",4)(3,ir,2,1,"span",4),a()}if(t&2){let e=n.$implicit,o=_();u("ngClass",o.getOptionClasses(e)),s(),u("id",o.inputId+"_"+e)("name",o.inputId)("value",e)("checked",e===o.selectedOption())("disabled",o.disabledOptions().includes(e)),s(),b(e==="0"?2:3)}}var St=(()=>{class t{constructor(){this.inputId="options-setting-"+Math.random().toString(36).substring(2,10),this.name=w.required(),this.description=w(""),this.descriptionExtra=w(""),this.options=w.required(),this.disabledOptions=w([]),this.selectedOption=w("",{transform:String}),this.colorType=w("default"),this.colorTypeOption=w(""),this.optionChange=se()}getOptionClasses(e){let o=e.toLowerCase(),i=this.colorTypeOption().toLowerCase(),l=this.selectedOption().toLowerCase(),c=["option-label"];if(o===l&&c.push("option__selected"),this.disabledOptions().includes(e)&&c.push("option__disabled"),this.colorTypeOption()!==""&&o===i){let p="option__"+this.colorType().toLowerCase();c.push(p)}return c}onOptionClick(e){this.optionChange.emit(e)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-options-setting"]],inputs:{name:[1,"name"],description:[1,"description"],descriptionExtra:[1,"descriptionExtra"],options:[1,"options"],disabledOptions:[1,"disabledOptions"],selectedOption:[1,"selectedOption"],colorType:[1,"colorType"],colorTypeOption:[1,"colorTypeOption"]},outputs:{optionChange:"optionChange"},decls:9,vars:13,consts:[[3,"id"],["role","radiogroup"],[3,"ngClass"],["type","radio",3,"change","id","name","value","checked","disabled"],[1,"option-name"]],template:function(o,i){o&1&&(r(0,"div",0)(1,"span"),d(2),a(),r(3,"small"),d(4),a(),C(5,tr,2,1,"small"),a(),r(6,"div",1),k(7,or,4,7,"label",2,Q),a()),o&2&&(z(L(9,Xo,"text-"+i.colorType())),u("id",i.inputId+"_label"),s(2),v(i.name()),s(2),v(i.description()),s(),b(i.descriptionExtra()?5:-1),s(),z(L(11,er,"border-"+i.colorType())),Mn("aria-labelledby",i.inputId+"_label"),s(),D(i.options()))},dependencies:[tt,An],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:3fr 2fr;justify-items:start;align-items:center;margin:1.5rem .5rem;gap:1rem}@container (width < 40rem){[_nghost-%COMP%]{grid-template-columns:1fr}}.content-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;gap:.5rem;width:100%}label[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-weight:700;text-wrap:nowrap}svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;cursor:pointer}.options-bar[_ngcontent-%COMP%]{padding:.25rem;display:flex;background-color:var(--color-surface-container-high);border-radius:10px}.option-label[_ngcontent-%COMP%]{padding:10px;cursor:pointer;border-radius:10px;transition:.3s ease;flex:1 1 auto;text-align:center}.option-label[_ngcontent-%COMP%]:has(input:focus-visible){outline:-webkit-focus-ring-color auto 1px}.option-name[_ngcontent-%COMP%]{border-radius:10px;border:none;transition:all .15s ease-in-out}.option__selected[_ngcontent-%COMP%]{background-color:var(--color-tertiary-container);font-weight:600;color:var(--color-on-tertiary-container);transition:.3s ease}.option__disabled[_ngcontent-%COMP%]{opacity:.8;cursor:not-allowed;text-decoration:line-through 2px var(--color-danger)}.option__warning[_ngcontent-%COMP%]{color:var(--color-warning)}.option__selected.option__warning[_ngcontent-%COMP%]{background-color:var(--color-warning);color:var(--color-warning-text)}.option__danger[_ngcontent-%COMP%]{color:var(--color-error-container)}.option__selected.option__danger[_ngcontent-%COMP%]{background-color:var(--color-error-container);color:var(--color-on-error-container)}input[_ngcontent-%COMP%]{clip:rect(0 0 0 0);clip-path:inset(100%);width:1px;height:1px;overflow:hidden;position:absolute;white-space:nowrap}"],changeDetection:0})}}return t})();var rr=t=>["content-label",t];function ar(t,n){if(t&1&&(r(0,"small"),d(1),a()),t&2){let e=_();s(),v(e.descriptionExtra())}}function lr(t,n){if(t&1){let e=E();r(0,"button",6),m("click",function(){g(e);let i=_();return h(i.openPathSelectDialog())}),x(),r(1,"svg",7),f(2,"path",8),a()()}}function sr(t,n){if(t&1){let e=E();r(0,"button",9),m("click",function(){g(e);let i=_();return h(i.resetValue())}),x(),r(1,"svg",7),f(2,"path",10),a()(),O(),r(3,"button",11),m("click",function(){g(e);let i=_();return h(i.onSubmitValue())}),x(),r(4,"svg",7),f(5,"path",12),a()()}if(t&2){let e=_();u("id",e.inputId+"reset")("title","Reset "+e.name()),s(3),u("id",e.inputId+"update")("title","Update "+e.name())}}var xt=(()=>{class t{constructor(){this.inputId="text-setting-"+Math.random().toString(36).substring(2,10),this.viewContainerRef=S(ae),this.name=w.required(),this.description=w(""),this.descriptionExtra=w(""),this.isNumberType=w.required(),this.isLongInput=w.required(),this.showFolderButton=w(!1),this.pathShouldEndWith=w(""),this.placeholder=w(""),this.value=Se.required(),this.minLength=w(0),this.maxLength=w(150),this.autocomplete=w("off"),this.disabled=w(!1),this.colorType=w("default"),this.oldValue=M(""),this.onSubmit=se()}ngOnChanges(){this.oldValue.set(this.value())}openPathSelectDialog(){let e=this.viewContainerRef.createComponent(wt);e.setInput("name",this.name()),e.setInput("path",this.value()),e.setInput("pathShouldEndWith",this.pathShouldEndWith()),e.instance.onSubmit.subscribe(o=>{o&&(this.value.set(o),this.onSubmitValue()),setTimeout(()=>{e.destroy()},2e3)})}resetValue(){this.value.set(this.oldValue())}onSubmitValue(){let e=this.value();e=e.toString().trim(),this.onSubmit.emit(e),this.oldValue.set(e)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-text-setting"]],inputs:{name:[1,"name"],description:[1,"description"],descriptionExtra:[1,"descriptionExtra"],isNumberType:[1,"isNumberType"],isLongInput:[1,"isLongInput"],showFolderButton:[1,"showFolderButton"],pathShouldEndWith:[1,"pathShouldEndWith"],placeholder:[1,"placeholder"],value:[1,"value"],minLength:[1,"minLength"],maxLength:[1,"maxLength"],autocomplete:[1,"autocomplete"],disabled:[1,"disabled"],colorType:[1,"colorType"]},outputs:{value:"valueChange",onSubmit:"onSubmit"},features:[Je],decls:12,vars:28,consts:[[1,"content"],[3,"for"],[1,"content-input"],[1,"wrapper"],[3,"ngModelChange","id","type","disabled","ngModel","minlength","maxlength","placeholder","autocomplete"],[1,"tertiary","folder-icon"],[1,"tertiary","folder-icon",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M137-144q-28.72 0-50.86-22.32T64-217v-526q0-28.36 22.14-50.68T137-816h271l73 73h342q28.36 0 50.68 22.32T896-670v453q0 28.36-22.32 50.68T823-144H137Zm0-73h686v-453H451l-73-73H137v526Zm0 0v-526 526Z"],[1,"secondary","icononly-button",3,"click","id","title"],["d","M263-179.67v-84h317.67q65 0 110.83-45.5t45.83-110.5q0-64.33-45.83-110.16-45.83-45.84-110.83-45.84H297.33l104 104-58.66 57.34-204-203 204-204 58.66 57.66-104 104H580q99.67 0 170.5 70.17t70.83 169.83q0 100.34-70.83 170.17-70.83 69.83-170.5 69.83H263Z"],[1,"primary","icononly-button",3,"click","id","title"],["d","M378-235 142-471l52-52 184 184 388-388 52 52-440 440Z"]],template:function(o,i){o&1&&(r(0,"div",0)(1,"div")(2,"label",1),d(3),a(),r(4,"small"),d(5),a(),C(6,ar,2,1,"small"),a(),r(7,"div",2)(8,"div",3)(9,"input",4),A("ngModelChange",function(c){return F(i.value,c)||(i.value=c),c}),a(),C(10,lr,3,0,"button",5),a(),C(11,sr,6,4),a()()),o&2&&(s(),z(L(26,rr,"text-"+i.colorType())),s(),u("for",i.inputId),s(),v(i.name()),s(2),v(i.description()),s(),b(i.descriptionExtra()?6:-1),s(2),N("wrapper__long",i.isLongInput()),s(),z("border-"+i.colorType()),N("input__long",i.isLongInput())("input__folder",i.showFolderButton())("input__disabled",i.disabled()),u("id",i.inputId)("type",i.isNumberType()?"number":"text")("disabled",i.disabled()),I("ngModel",i.value),u("minlength",i.minLength())("maxlength",i.maxLength())("placeholder",i.placeholder())("autocomplete",i.autocomplete()),s(),b(i.showFolderButton()?10:-1),s(),b(i.value()!=i.oldValue()&&!i.disabled()?11:-1))},dependencies:[U,X,ee,rt,ti,te],styles:["[_nghost-%COMP%]{display:contents}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 2fr;justify-items:start;align-items:center;margin:1.5rem .5rem;gap:1rem}@container (width < 40rem){.content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.content-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;gap:.5rem;width:100%}label[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-weight:700;text-wrap:nowrap}svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;cursor:pointer}button[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}@container (width < 40rem){button[_ngcontent-%COMP%]{width:2rem;height:2rem}}.content-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem;width:100%;max-width:100%;overflow:hidden}.wrapper[_ngcontent-%COMP%]{display:inline-block;width:5rem;height:3rem;position:relative}.folder-icon[_ngcontent-%COMP%]{position:absolute;inset:0 0 0 auto;cursor:pointer;height:auto;width:auto;padding:.5rem;border-radius:.5rem;border-top-left-radius:0;border-bottom-left-radius:0}.folder-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:2rem;width:2rem}input[_ngcontent-%COMP%]{width:100%;height:100%;padding:.25rem;text-align:center;font-family:inherit;background-color:var(--color-surface-container-high);color:var(--color-on-surface);border-radius:.5rem}.wrapper__long[_ngcontent-%COMP%]{width:auto;flex:1;max-width:calc(100% - 6rem)}@container (width < 40rem){.wrapper__long[_ngcontent-%COMP%]{width:auto;max-width:none}}.input__long[_ngcontent-%COMP%]{field-sizing:content;font-size:larger}.input__folder[_ngcontent-%COMP%]{padding:.25rem 3rem .25rem .25rem}.input__disabled[_ngcontent-%COMP%]{background-color:var(--color-surface-container-low);cursor:not-allowed;text-decoration:line-through 2px var(--color-danger)}"],changeDetection:0})}}return t})();function dr(t,n){t&1&&f(0,"app-load-indicator",0)}function cr(t,n){if(t&1&&(r(0,"li"),d(1),a()),t&2){let e=n.$implicit;s(),v(e)}}function pr(t,n){if(t&1&&(r(0,"div",1)(1,"ul"),k(2,cr,2,1,"li",null,le),a()()),t&2){let e=_();s(2),D(e.warningMessages())}}function ur(t,n){if(t&1){let e=E();r(0,"app-options-setting",18),m("optionChange",function(i){g(e);let l=_();return h(l.updateSetting("delete_trailer_media",i))}),a()}if(t&2){let e,o=_();u("options",o.trueFalseOptions)("colorType","danger")("colorTypeOption","true")("selectedOption",(e=o.settings())==null?null:e.delete_trailer_media)}}function mr(t,n){if(t&1){let e=E();r(0,"app-options-setting",19),m("optionChange",function(i){g(e);let l=_();return h(l.updateSetting("gpu_enabled_nvidia",i))}),a()}if(t&2){let e,o=_();u("options",o.trueFalseOptions)("selectedOption",(e=o.settings())==null?null:e.gpu_enabled_nvidia)("colorType","warning")("colorTypeOption","true")}}function gr(t,n){if(t&1){let e=E();r(0,"app-options-setting",20),m("optionChange",function(i){g(e);let l=_();return h(l.updateSetting("gpu_enabled_intel",i))}),a()}if(t&2){let e,o=_();u("options",o.trueFalseOptions)("selectedOption",(e=o.settings())==null?null:e.gpu_enabled_intel)("colorType","warning")("colorTypeOption","true")}}function hr(t,n){if(t&1){let e=E();r(0,"app-options-setting",21),m("optionChange",function(i){g(e);let l=_();return h(l.updateSetting("gpu_enabled_amd",i))}),a()}if(t&2){let e,o=_();u("options",o.trueFalseOptions)("selectedOption",(e=o.settings())==null?null:e.gpu_enabled_amd)("colorType","warning")("colorTypeOption","true")}}var Si=(()=>{class t{constructor(){this.settingsService=S(Me),this.webSocketService=S(ni),this.isLoading=this.settingsService.settingsResource.isLoading,this.settings=this.settingsService.settingsResource.value,this.loggingOptions=["Debug","Info","Warning","Error"],this.trueFalseOptions=["true","false"],this.themeOptions=["Auto","Dark","Light"],this.helpLinks={general:"https://nandyalu.github.io/trailarr/user-guide/settings/general-settings/",files:"https://nandyalu.github.io/trailarr/user-guide/settings/general-settings/#file-settings",advanced:"https://nandyalu.github.io/trailarr/user-guide/settings/general-settings/#advanced-settings",deleteTrailers:"https://nandyalu.github.io/trailarr/user-guide/settings/general-settings/#delete-trailer-settings",experimental:"https://nandyalu.github.io/trailarr/user-guide/settings/general-settings/#experimental-settings"},this.warningMessages=y(()=>{let e=[];return this.settings()?.log_level==="DEBUG"&&e.push("Log Level set to 'Debug', this will generate too many logs in the console, change it if not needed!"),this.settings()?.monitor_enabled===!1&&e.push("Monitor is disabled, trailers will not be downloaded automatically."),e})}toTitleCase(e){return e.split("_").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" ")}updateSetting(e,o){this.settingsService.updateSetting(e,o).subscribe(i=>{let l=i.toLowerCase().includes("error")?"Error":"Success";this.webSocketService.showToast(i,l),this.settingsService.settingsResource.reload()})}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-trailer"]],decls:61,vars:47,consts:[[1,"center"],[1,"border-warning","sticky-warning"],["open",""],[3,"link"],[1,"setting-group"],["name","Monitor Enabled","description","Monitor media from Radarr/Sonarr to download trailers.",3,"optionChange","options","selectedOption"],["name","Monitor Interval","description","Frequency (in minutes) to get new media data from Radarr/Sonarr.","descriptionExtra","Default is 60. Minuimum is 10. Container restart required to apply new interval.","placeholder","Monitor Interval","autocomplete","off",3,"onSubmit","isNumberType","isLongInput","minLength","maxLength","value","disabled"],["name","Theme","description","Select application theme.",3,"optionChange","options","selectedOption"],["name","Wait for Media","description","Wait for media to be imported into Radarr/Sonarr before downloading trailers.",3,"optionChange","options","selectedOption"],["name","Log Level","description","Set logging level for the app.",3,"optionChange","options","selectedOption"],["name","Yt-dlp Cookies Path","description","Path to yt-dlp cookies file to use for downloading trailers.","pathShouldEndWith",".txt","placeholder","/config/cookies.txt","autocomplete","off",3,"onSubmit","isNumberType","isLongInput","showFolderButton","minLength","maxLength","value"],["name","On Deleting from Connection","description","Delete trailers when media is removed from the connected Radarr/Sonarr instance.",3,"optionChange","options","colorType","colorTypeOption","selectedOption"],["name","Only if Media Files Deleted","description","Delete trailers for media removed from Arr only when media files doesn't exist on disk.",3,"options","colorType","colorTypeOption","selectedOption"],["name","NVIDIA GPU Acceleration","description","Use NVIDIA GPU for hardware acceleration.",3,"options","selectedOption","colorType","colorTypeOption"],["name","Intel GPU Acceleration","description","Use Intel GPU for hardware acceleration (VAAPI).",3,"options","selectedOption","colorType","colorTypeOption"],["name","AMD GPU Acceleration","description","Use AMD GPU for hardware acceleration (AMF).",3,"options","selectedOption","colorType","colorTypeOption"],["name","Update Yt-dlp","description","Update yt-dlp to latest version during container startup.","descriptionExtra","You need to restart the container to apply updates.",3,"optionChange","options","selectedOption","colorType","colorTypeOption"],["name","URL Base","description","URL Base for use with reverse proxy configuration","descriptionExtra","Restart required to take effect!","placeholder","trailarr","autocomplete","off",3,"onSubmit","isNumberType","isLongInput","minLength","maxLength","value","colorType"],["name","Only if Media Files Deleted","description","Delete trailers for media removed from Arr only when media files doesn't exist on disk.",3,"optionChange","options","colorType","colorTypeOption","selectedOption"],["name","NVIDIA GPU Acceleration","description","Use NVIDIA GPU for hardware acceleration.",3,"optionChange","options","selectedOption","colorType","colorTypeOption"],["name","Intel GPU Acceleration","description","Use Intel GPU for hardware acceleration (VAAPI).",3,"optionChange","options","selectedOption","colorType","colorTypeOption"],["name","AMD GPU Acceleration","description","Use AMD GPU for hardware acceleration (AMF).",3,"optionChange","options","selectedOption","colorType","colorTypeOption"]],template:function(o,i){if(o&1&&(r(0,"h2"),d(1,"General Settings"),a(),f(2,"hr"),C(3,dr,1,0,"app-load-indicator",0),C(4,pr,4,0,"div",1),r(5,"section")(6,"details",2)(7,"summary")(8,"span"),d(9,"General"),a(),f(10,"help-link-icon",3),a(),f(11,"hr"),r(12,"div",4)(13,"app-options-setting",5),m("optionChange",function(c){return i.updateSetting("monitor_enabled",c)}),a(),r(14,"app-text-setting",6),m("onSubmit",function(c){return i.updateSetting("monitor_interval",c)}),a(),r(15,"app-options-setting",7),J(16,"titlecase"),m("optionChange",function(c){return i.updateSetting("app_theme",c)}),a()()()(),r(17,"section")(18,"details",2)(19,"summary")(20,"span"),d(21,"Files"),a(),f(22,"help-link-icon",3),a(),f(23,"hr"),r(24,"div",4)(25,"app-options-setting",8),m("optionChange",function(c){return i.updateSetting("wait_for_media",c)}),a()()()(),r(26,"section")(27,"details",2)(28,"summary")(29,"span"),d(30,"Advanced Options"),a(),f(31,"help-link-icon",3),a(),f(32,"hr"),r(33,"div",4)(34,"app-options-setting",9),m("optionChange",function(c){return i.updateSetting("log_level",c)}),a(),r(35,"app-text-setting",10),m("onSubmit",function(c){return i.updateSetting("yt_cookies_path",c)}),a()()()(),r(36,"section")(37,"details",2)(38,"summary")(39,"span"),d(40,"Delete Trailers"),a(),f(41,"help-link-icon",3),a(),f(42,"hr"),r(43,"div",4)(44,"app-options-setting",11),m("optionChange",function(c){return i.updateSetting("delete_trailer_connection",c)}),a(),C(45,ur,1,4,"app-options-setting",12),a()()(),r(46,"section")(47,"details",2)(48,"summary")(49,"span"),d(50,"Experimental Options"),a(),f(51,"help-link-icon",3),a(),f(52,"hr"),r(53,"div",4)(54,"p"),d(55,"These are experimental options, might not work as expected!"),a(),C(56,mr,1,4,"app-options-setting",13),C(57,gr,1,4,"app-options-setting",14),C(58,hr,1,4,"app-options-setting",15),r(59,"app-options-setting",16),m("optionChange",function(c){return i.updateSetting("update_ytdlp",c)}),a(),r(60,"app-text-setting",17),m("onSubmit",function(c){return i.updateSetting("url_base",c)}),a()()()()),o&2){let l,c,p,P,q,H,Ie,Fe,Ae,qe,Ue,Ge,je;s(3),b(i.isLoading()?3:-1),s(),b(i.warningMessages().length>0?4:-1),s(6),u("link",i.helpLinks.general),s(3),u("options",i.trueFalseOptions)("selectedOption",(l=i.settings())==null?null:l.monitor_enabled),s(),u("isNumberType",!0)("isLongInput",!1)("minLength",1)("maxLength",6)("value",((c=i.settings())==null?null:c.monitor_interval)??60)("disabled",!1),s(),u("options",i.themeOptions)("selectedOption",ie(16,45,(p=i.settings())==null?null:p.app_theme)),s(7),u("link",i.helpLinks.files),s(3),u("options",i.trueFalseOptions)("selectedOption",(P=i.settings())==null?null:P.wait_for_media),s(6),u("link",i.helpLinks.advanced),s(3),u("options",i.loggingOptions)("selectedOption",i.toTitleCase(((q=i.settings())==null?null:q.log_level)??"INFO")),s(),u("isNumberType",!1)("isLongInput",!0)("showFolderButton",!0)("minLength",0)("maxLength",255)("value",((H=i.settings())==null?null:H.yt_cookies_path)??""),s(6),u("link",i.helpLinks.deleteTrailers),s(3),u("options",i.trueFalseOptions)("colorType","danger")("colorTypeOption","true")("selectedOption",(Ie=i.settings())==null?null:Ie.delete_trailer_connection),s(),b((Fe=i.settings())!=null&&Fe.delete_trailer_connection?45:-1),s(6),u("link",i.helpLinks.experimental),s(5),b((Ae=i.settings())!=null&&Ae.gpu_available_nvidia?56:-1),s(),b((qe=i.settings())!=null&&qe.gpu_available_intel?57:-1),s(),b((Ue=i.settings())!=null&&Ue.gpu_available_amd?58:-1),s(),u("options",i.trueFalseOptions)("selectedOption",(Ge=i.settings())==null?null:Ge.update_ytdlp)("colorType","warning")("colorTypeOption","true"),s(),u("isNumberType",!1)("isLongInput",!0)("minLength",0)("maxLength",255)("value",((je=i.settings())==null?null:je.url_base)??"")("colorType","danger")}},dependencies:[U,Pe,G,St,xt,Un],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:12px}.center[_ngcontent-%COMP%]{position:fixed;inset:50vh 50vw;transform:translate(-50%,-50%);align-self:center;justify-self:center;margin:auto}.sticky-warning[_ngcontent-%COMP%]{position:sticky;top:122px;z-index:10;padding:0 1rem;margin:.5rem 0;border-radius:.5rem;font-size:larger;font-weight:600;color:var(--color-warning);background-color:var(--color-surface-container)}details[_ngcontent-%COMP%]{margin:.5rem 0;border:1px solid var(--color-outline);border-radius:.5rem;background-color:var(--color-surface-container)}summary[_ngcontent-%COMP%]{padding:1rem;font-weight:700;cursor:pointer;color:var(--color-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:calc(100vw - 260px);display:flex;align-items:center;justify-content:space-between}@media(width<1100px){summary[_ngcontent-%COMP%]{max-width:calc(100vw - 100px)}}@media(width<765px){summary[_ngcontent-%COMP%]{max-width:calc(100vw - 50px)}}.setting-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 .5rem;container-type:inline-size}"],changeDetection:0})}}return t})();var fr=t=>["content-label",t];function _r(t,n){if(t&1&&(r(0,"small"),d(1),a()),t&2){let e=_();s(),v(e.descriptionExtra())}}function vr(t,n){if(t&1){let e=E();r(0,"button",4),m("click",function(){g(e);let i=_();return h(i.resetValue())}),x(),r(1,"svg",5),f(2,"path",6),a()(),O(),r(3,"button",7),m("click",function(){g(e);let i=_();return h(i.onSubmitValue())}),x(),r(4,"svg",5),f(5,"path",8),a()()}if(t&2){let e=_();u("id",e.inputId+"reset")("title","Reset "+e.name()),s(3),u("id",e.inputId+"update")("title","Update "+e.name())}}var xi=(()=>{class t{constructor(){this.inputId="range-setting-"+Math.random().toString(36).substring(2,10),this.name=w.required(),this.description=w(""),this.descriptionExtra=w(""),this.value=Se.required(),this.minValue=w(0),this.maxValue=w(150),this.stepValue=w(5),this.disabled=w(!1),this.colorType=w("default"),this.oldValue=M(""),this.onSubmit=se()}ngOnInit(){this.oldValue.set(this.value())}resetValue(){this.value.set(this.oldValue())}onSubmitValue(){let e=this.value();e=e.toString().trim(),this.onSubmit.emit(e),this.oldValue.set(e)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-range-setting"]],inputs:{name:[1,"name"],description:[1,"description"],descriptionExtra:[1,"descriptionExtra"],value:[1,"value"],minValue:[1,"minValue"],maxValue:[1,"maxValue"],stepValue:[1,"stepValue"],disabled:[1,"disabled"],colorType:[1,"colorType"]},outputs:{value:"valueChange",onSubmit:"onSubmit"},decls:11,vars:18,consts:[[3,"for"],[1,"content-input"],["type","range",3,"ngModelChange","id","disabled","ngModel","min","max","step"],[1,"content-input__value"],[1,"secondary","icononly-button",3,"click","id","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M263-179.67v-84h317.67q65 0 110.83-45.5t45.83-110.5q0-64.33-45.83-110.16-45.83-45.84-110.83-45.84H297.33l104 104-58.66 57.34-204-203 204-204 58.66 57.66-104 104H580q99.67 0 170.5 70.17t70.83 169.83q0 100.34-70.83 170.17-70.83 69.83-170.5 69.83H263Z"],[1,"primary","icononly-button",3,"click","id","title"],["d","M378-235 142-471l52-52 184 184 388-388 52 52-440 440Z"]],template:function(o,i){o&1&&(r(0,"div")(1,"label",0),d(2),a(),r(3,"small"),d(4),a(),C(5,_r,2,1,"small"),a(),r(6,"div",1)(7,"input",2),A("ngModelChange",function(c){return F(i.value,c)||(i.value=c),c}),a(),r(8,"span",3),d(9),a(),C(10,vr,6,4),a()),o&2&&(z(L(16,fr,"text-"+i.colorType())),s(),u("for",i.inputId),s(),v(i.name()),s(2),v(i.description()),s(),b(i.descriptionExtra()?5:-1),s(2),N("input__disabled",i.disabled()),u("id",i.inputId)("disabled",i.disabled()),I("ngModel",i.value),u("min",i.minValue())("max",i.maxValue())("step",i.stepValue()),s(2),v(i.value()),s(),b(i.value()!=i.oldValue()&&!i.disabled()?10:-1))},dependencies:[U,X,Xn,ee,te],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:3fr 2fr;justify-items:start;align-items:center;margin:1.5rem .5rem;gap:1rem}@container (width < 40rem){[_nghost-%COMP%]{grid-template-columns:1fr}}.content-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;gap:.5rem;width:100%}label[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-weight:700;text-wrap:nowrap}svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;cursor:pointer}button[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}@container (width < 40rem){button[_ngcontent-%COMP%]{width:2rem;height:2rem}}.content-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem;width:100%;max-width:100%;overflow:hidden}input[_ngcontent-%COMP%]{width:15vw;max-width:25rem;height:3rem;padding:.25rem;text-align:center;font-family:inherit;background-color:var(--color-surface-container-high);color:var(--color-on-surface);border:1px solid var(--color-outline);border-radius:.5rem}@container (width < 40rem){input[_ngcontent-%COMP%]{flex:1;width:auto;max-width:50vw;height:2rem}}.content-input__value[_ngcontent-%COMP%]{text-align:center;align-self:center;width:3ch}.input__disabled[_ngcontent-%COMP%]{background-color:var(--color-surface-container-low);cursor:not-allowed;text-decoration:line-through 2px var(--color-danger)}"],changeDetection:0})}}return t})();var Cr=["deleteProfileDialog"],br=["copyProfileDialog"],yr=["jsonEditDialog"],wr=(t,n)=>n.id;function Sr(t,n){t&1&&f(0,"app-load-indicator",5)}function xr(t,n){if(t&1&&(r(0,"li"),d(1),a()),t&2){let e=n.$implicit;s(),v(e)}}function Er(t,n){if(t&1&&(r(0,"div",14)(1,"ul"),k(2,xr,2,1,"li",null,le),a()()),t&2){let e=_();s(2),D(e.invalidFormatsWarning())}}function Mr(t,n){if(t&1){let e=E();r(0,"app-text-setting",59),m("onSubmit",function(i){g(e);let l=_();return h(l.profileService.updateSetting("folder_name",i))}),a()}if(t&2){let e,o,i=_();u("isNumberType",!1)("isLongInput",!0)("placeholder","Folder Name")("autocomplete","off")("minLength",1)("maxLength",50)("value",((e=i.profile())==null?null:e.folder_name)??"")("disabled",!((o=i.profile())!=null&&o.folder_enabled))}}function Pr(t,n){if(t&1&&(r(0,"tr")(1,"td"),d(2),a(),r(3,"td"),d(4),a(),r(5,"td"),d(6),a()()),t&2){let e=n.$implicit;s(2),v(e.filter_by),s(2),v(e.filter_condition),s(2),v(e.filter_value)}}function Tr(t,n){if(t&1&&(r(0,"table",42)(1,"thead")(2,"tr")(3,"th"),d(4,"Column"),a(),r(5,"th"),d(6,"Condition"),a(),r(7,"th"),d(8,"Value"),a()()(),r(9,"tbody"),k(10,Pr,7,3,"tr",null,wr),a()()),t&2){let e,o=_();s(10),D((e=o.profile())==null||e.customfilter==null?null:e.customfilter.filters)}}function Or(t,n){t&1&&(r(0,"p"),d(1,"No filters defined for this profile."),a())}function kr(t,n){t&1&&ve(0,Or,2,0,"ng-template",null,4,Xe)}var Ei=(()=>{class t{constructor(){this.profileService=S(at),this.router=S(xe),this.viewContainerRef=S(ae),this.profileId=w(0,{transform:e=>{let o=Number(e);return isNaN(o)?0:o}}),this.profile=this.profileService.selectedProfile,this.newProfileName=M(""),this.profileJSON=M("{}"),this.minLimitMax=y(()=>{let e=this.profile();return e&&e.max_duration?e.max_duration-60:540}),this.maxLimitMin=y(()=>{let e=this.profile();return e&&e.min_duration?e.min_duration+60:90}),this.trueFalseOptions=["true","false"],this.fileFormatOptions=["mkv","mp4","webm"],this.audioFormatOptions=["aac","ac3","eac3","flac","opus","copy"],this.videoFormatOptions=["h264","h265","vp8","vp9","av1","copy"],this.videoResolutionOptions=["480","720","1080","1440","2160","0"],this.subtitleFormatOptions=["srt","vtt"],this.helpLinks={general:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/settings/general/",file:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/settings/file/",audio:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/settings/audio/",video:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/settings/video/",subtitle:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/settings/subtitle/",search:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/settings/search/",filters:"https://nandyalu.github.io/trailarr/user-guide/settings/profiles/filters/"},this.fileFormatsDisabled=y(()=>{let e=this.profile(),o=[];if(!e)return o;switch(e.video_resolution===0&&(o.push("mp4"),o.push("webm")),e.video_format){case"copy":o.push("mp4"),o.push("webm");break;case"h264":case"h265":o.push("webm");break;case"vp8":case"vp9":o.push("mp4");break}switch(e.audio_format){case"copy":o.push("mp4"),o.push("webm");break;case"aac":case"ac3":case"eac3":case"flac":o.push("webm");break}return o}),this.videoFormatsDisabled=y(()=>{let e=this.profile(),o=[];if(!e)return o;switch(e.video_resolution===0&&(o.push("h264"),o.push("h265"),o.push("vp8"),o.push("vp9"),o.push("av1")),e.file_format){case"mp4":o.push("vp8"),o.push("vp9");break;case"webm":o.push("h264"),o.push("h265");break}return o}),this.audioFormatsDisabled=y(()=>{let e=this.profile(),o=[];if(!e)return o;switch(e.video_resolution===0&&(o.push("aac"),o.push("ac3"),o.push("eac3"),o.push("flac"),o.push("opus")),e.file_format){case"webm":o.push("aac"),o.push("ac3"),o.push("eac3"),o.push("flac");break}return o}),this.invalidFormatsWarning=y(()=>{let e=this.profile();if(!e)return[];let o=[];switch(e.video_resolution===0&&(e.file_format!=="mkv"&&o.push('Video resolution "best" requires file format "mkv".'),e.video_format!=="copy"&&o.push('Video resolution "best" requires video format "copy".'),e.audio_format!=="copy"&&o.push('Video resolution "best" requires audio format "copy".')),e.video_format){case"copy":e.file_format!=="mkv"&&o.push('Video format "copy" requires file format "mkv".');break;case"h264":case"h265":e.file_format==="webm"&&o.push(`Video format "${e.video_format}" is not compatible with file format "webm".`);break;case"vp8":case"vp9":e.file_format==="mp4"&&o.push(`Video format "${e.video_format}" is not compatible with file format "mp4".`);break}switch(e.audio_format){case"copy":e.file_format!=="mkv"&&o.push('Audio format "copy" requires file format "mkv".');break;case"aac":case"ac3":case"eac3":case"flac":e.file_format==="webm"&&o.push(`Audio format "${e.audio_format}" is not compatible with file format "webm".`);break}return o}),this.isLoading=!1,this.emptyCustomFilter={id:null,filter_name:"",filter_type:"TRAILER",filters:[]},this.customFilter=y(()=>{let e=this.profile();return e&&e.customfilter?e.customfilter:this.emptyCustomFilter}),this.setProfileIDeffect=B(()=>{let e=this.profileId();if(this.profileService.allProfiles.isLoading()){console.log("Profile data is still loading. Waiting for it to complete.");return}if(!this.profileService.profileExists(e)){console.warn(`Profile with ID '${e}' does not exist. Redirecting to profiles list.`),this.router.navigate(["/settings/profiles"]);return}this.profileService.selectedProfileId.set(e),e<=0&&this.openFilterDialog()}),this.deleteDialog=oe.required("deleteProfileDialog"),this.copyProfileDialog=oe.required("copyProfileDialog"),this.jsonEditDialog=oe.required("jsonEditDialog"),this.closeDeleteDialog=()=>this.deleteDialog().nativeElement.close(),this.showDeleteDialog=()=>this.deleteDialog().nativeElement.showModal(),this.closeCopyProfileDialog=()=>this.copyProfileDialog().nativeElement.close(),this.showCopyProfileDialog=()=>{let e=this.profile().customfilter.filter_name+" - Copy";this.newProfileName.set(e),this.copyProfileDialog().nativeElement.showModal()},this.closeJsonEditDialog=()=>this.jsonEditDialog().nativeElement.close(),this.showJsonEditDialog=()=>{this.profileJSON.set(JSON.stringify(this.profile(),null,2)),this.jsonEditDialog().nativeElement.showModal()}}openFilterDialog(){let e=this.viewContainerRef.createComponent(lt);e.setInput("customFilter",this.customFilter()),e.setInput("filterType","TRAILER"),e.instance.dialogClosed.subscribe(o=>{o!==-1&&this.profileService.allProfiles.reload(),setTimeout(()=>{e.destroy()},3e3)})}onConfirmCopy(){let e=he(V({},this.profile()),{id:null,customfilter:he(V({},this.customFilter()),{filters:this.customFilter().filters.map(o=>he(V({},o),{id:null})),filter_name:this.newProfileName(),id:null})});console.log("Profile copied:",e),this.profileService.createProfile(e).subscribe(o=>{o?(this.closeCopyProfileDialog(),this.router.navigate(["/settings/profiles",o])):console.error("Failed to create new profile. Please try again.")})}onJsonEditSave(){try{let e=JSON.parse(this.profileJSON());console.log("Profile updated:",e),this.profileService.updateProfile(e).subscribe(o=>{o&&this.closeJsonEditDialog()})}catch(e){console.error("Invalid JSON format:",e)}}onConfirmDelete(){this.closeDeleteDialog(),this.profileService.deleteProfile(this.profileId()),this.router.navigate(["/settings/profiles"])}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-edit-profile"]],viewQuery:function(o,i){o&1&&Ce(i.deleteDialog,Cr,5)(i.copyProfileDialog,br,5)(i.jsonEditDialog,yr,5),o&2&&be(3)},inputs:{profileId:[1,"profileId"]},decls:160,vars:121,consts:[["deleteProfileDialog",""],["copyProfileDialog",""],["jsonEditDialog",""],["jsonEditor",""],["noFilters",""],[1,"center"],[1,"title-block"],["title","Edit Profile Name",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"edit-icon"],["d","M177-177h44l462-460.6-44-44.4-462 460.6v44.4Zm-73 73v-146l590-590q8-7 18-11t21.5-4q10.5 0 20 3.5T772-841l69 69q8 9 11.5 19t3.5 20q0 11-4 21.5t-10.67 17.17L250-104H104Zm672-630-41-41 41 41Zm-114 74-23-22 44 44-21-22Z"],[1,"icon-button","danger","top-right-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M259.09-114.02q-28.45 0-48.41-19.89-19.96-19.89-19.96-48.24v-565.94h-45.07v-68.13h198.28v-34.3h271.9v34.3h198.52v68.13h-45.07v565.94q0 27.6-20.33 47.86-20.34 20.27-48.04 20.27H259.09Zm441.82-634.07H259.09v565.94h441.82v-565.94ZM363.89-266.24h64.07v-399h-64.07v399Zm168.15 0h64.31v-399h-64.31v399ZM259.09-748.09v565.94-565.94Z"],[1,"text"],[1,"border-warning","sticky-warning"],["open",""],[3,"link"],[1,"setting-group"],["name","Profile Enabled","description","Enable or disable this profile",3,"optionChange","options","selectedOption"],["name","Priority","description","Priority level for this profile. Default is 0. Minimum is 0. Maximum is 1000.","descriptionExtra","When multiple profiles match, the one with the highest priority will be used first.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Stop Monitoring","description","Stop monitoring media that use this profile after successful download and save YouTube ID.","descriptionExtra","Set this to 'false' for non-trailer Profiles and 'true' for trailer Profiles.",3,"optionChange","options","selectedOption"],["name","File Format","description","Final file format(extension) of the trailer file.",3,"optionChange","options","selectedOption","disabledOptions"],["name","File Name","description","File name to use for downloaded trailers.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Folder Enabled","description","Save trailer file in a seperate folder inside Media folder.",3,"optionChange","options","selectedOption"],["name","Folder Name","description","Name of the folder to save trailer file.",3,"isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Custom Save Folder Path","description","Custom path to save trailer file.","descriptionExtra","Default is '{media_folder}'. Use this to save downloaded trailers to a different location.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value"],["name","Embed Metadata","description","Embed info from YouTube video in the trailer file.",3,"optionChange","options","selectedOption"],["name","Remove Silence","description","Detect and remove silence (3s+, 30dB) from the end of the trailer file.",3,"optionChange","options","selectedOption"],["name","Audio Format","description","Final audio format(codec) of the trailer file.",3,"optionChange","options","disabledOptions","selectedOption"],["name","Audio Volume Level","description","Volume level of the audio in the trailer file. Value less than 100 will reduce the loudness and viceversa!","descriptionExtra","Default is 100 (Full Volume). Minimum is 1. Maximum is 200.",3,"onSubmit","minValue","maxValue","stepValue","value","disabled","colorType"],["name","Video Format","description","Final video format(codec) of the trailer file.",3,"optionChange","options","disabledOptions","selectedOption"],["name","Video Resolution","description","Resolution of the trailer video file.",3,"optionChange","options","selectedOption"],["name","Subtitles Enabled","description","Enable or disable subtitle download for this profile.",3,"optionChange","options","selectedOption"],["name","Subtitles Format","description","Final subtitle format of the trailer file.",3,"optionChange","options","selectedOption"],["name","Subtitles Language","description","Language of the subtitle to download. Use 2-letter ISO language code.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Search Query","description","Query to use when searching for trailers on YouTube.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Min Duration","description","Minimum video duration (in seconds) to consider while searching.","descriptionExtra","Default is 30. Minimum is 30. Should be atmost `Maximum Duration - 60`.",3,"onSubmit","minValue","maxValue","value","disabled"],["name","Max Duration","description","Maximum video duration (in seconds) to consider while searching.","descriptionExtra","Default is 600. Maximum is 600. Should be atleast `Minimum Duration + 60`.",3,"onSubmit","minValue","maxValue","value","disabled"],["name","Always Search","description","Enable this to always search for trailers, ignoring the youtube id received from Radarr.",3,"optionChange","options","selectedOption"],["name","Include Words in Title","description","Download a video only if certain words exist in video title. Comma-separated list.","descriptionExtra","Eg: 'trailer, official'",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Exclude Words in Title","description","Exclude downloading a video if certain words exist in video title. Comma-separated list.","descriptionExtra","Eg: 'teaser, behind the scenes, review, comment'",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"],["name","Yt-dlp Extra Options","description","Additional options to pass to yt-dlp when downloading trailers.","descriptionExtra","Advanced use cases only. Use with caution!",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled","colorType"],[1,"filter-details"],[1,"primary","filters-button",3,"click"],[1,"buttons-row"],[1,"icon-button","secondary",3,"click"],["d","M524-407v-117H407v-73h117v-116h73v116h116v73H597v117h-73ZM137-64q-28.72 0-50.86-22.14T64-137v-512q0-28.72 22.14-50.86T137-722h106v-101q0-28.72 22.14-50.86Q287.27-896 316-896h507q28.72 0 50.86 22.14T896-823v507q0 28.73-22.14 50.86Q851.72-243 823-243H722v106q0 28.72-22.14 50.86T649-64H137Zm179-252h507v-507H316v507Z"],["d","M590-144v-73h97q24 0 40.5-15.88Q744-248.75 744-273v-91q0-40 23.5-71.5T830-479v-7q-39-7-62.5-38.5T744-596v-91q0-24.25-16.37-40.63Q711.25-744 687-744h-97v-72h108q49 0 83.5 34.58Q816-746.83 816-697v91q0 24.25 15.88 40.12Q847.75-550 871-550h25v139h-25q-23.25 0-39.12 16.37Q816-378.25 816-354v91q0 49.83-34.58 84.42Q746.83-144 698-144H590Zm-327 0q-50 0-84.5-34.58Q144-213.17 144-263v-91q0-24.25-16.37-40.63Q111.25-411 87-411H64v-139h23q24.25 0 40.63-15.88Q144-581.75 144-606v-91q0-49.83 34.58-84.42Q213.17-816 263-816h108v72h-98q-24 0-40 16.37-16 16.38-16 40.63v91q0 40-24 71.5T131-486v7q38 12 62 43.5t24 71.5v91q0 24.25 15.88 40.12Q248.75-217 273-217h98v73H263Z"],[1,"error",3,"click"],[1,"dialog-content",3,"click"],[1,"danger",3,"click"],[1,"secondary",3,"click"],[3,"click"],[1,"input-wrapper"],["for","new-profile-name"],["type","text","id","new-profile-name","placeholder","New Profile Name",1,"new-profile-name",3,"ngModelChange","ngModel"],[1,"primary",3,"click","disabled"],["for","profile-json"],["id","profile-json",1,"json-editor",3,"ngModelChange","ngModel"],["name","Folder Name","description","Name of the folder to save trailer file.",3,"onSubmit","isNumberType","isLongInput","placeholder","autocomplete","minLength","maxLength","value","disabled"]],template:function(o,i){if(o&1){let l=E();C(0,Sr,1,0,"app-load-indicator",5),r(1,"div",6)(2,"h2"),d(3),a(),r(4,"i",7),m("click",function(){return g(l),h(i.openFilterDialog())}),x(),r(5,"svg",8),f(6,"path",9),a()()(),O(),r(7,"button",10),m("click",function(){return g(l),h(i.showDeleteDialog())}),x(),r(8,"svg",11),f(9,"path",12),a(),O(),r(10,"span",13),d(11,"Delete"),a()(),f(12,"hr"),C(13,Er,4,0,"div",14),r(14,"section")(15,"details",15)(16,"summary")(17,"span"),d(18,"General"),a(),f(19,"help-link-icon",16),a(),f(20,"hr"),r(21,"div",17)(22,"app-options-setting",18),m("optionChange",function(p){return g(l),h(i.profileService.updateSetting("enabled",p))}),a(),r(23,"app-text-setting",19),m("onSubmit",function(p){return g(l),h(i.profileService.updateSetting("priority",p))}),a(),r(24,"app-options-setting",20),m("optionChange",function(p){return g(l),h(i.profileService.updateSetting("stop_monitoring",p))}),a()()()(),r(25,"section")(26,"details",15)(27,"summary")(28,"span"),d(29,"File"),a(),f(30,"help-link-icon",16),a(),f(31,"hr"),r(32,"div",17)(33,"app-options-setting",21),m("optionChange",function(p){return g(l),h(i.profileService.updateSetting("file_format",p))}),a(),r(34,"app-text-setting",22),m("onSubmit",function(p){return g(l),h(i.profileService.updateSetting("file_name",p))}),a(),r(35,"app-options-setting",23),m("optionChange",function(p){return g(l),h(i.profileService.updateSetting("folder_enabled",p))}),a(),C(36,Mr,1,8,"app-text-setting",24),r(37,"app-text-setting",25),m("onSubmit",function(p){return g(l),h(i.profileService.updateSetting("custom_folder",p))}),a(),r(38,"app-options-setting",26),m("optionChange",function(p){return g(l),h(i.profileService.updateSetting("embed_metadata",p))}),a(),r(39,"app-options-setting",27),m("optionChange",function(p){return g(l),h(i.profileService.updateSetting("remove_silence",p))}),a()()()(),r(40,"section")(41,"details",15)(42,"summary")(43,"span"),d(44,"Audio"),a(),f(45,"help-link-icon",16),a(),f(46,"hr"),r(47,"div",17)(48,"app-options-setting",28),m("optionChange",function(p){return g(l),h(i.profileService.updateSetting("audio_format",p))}),a(),r(49,"app-range-setting",29),m("onSubmit",function(p){return g(l),h(i.profileService.updateSetting("audio_volume_level",p))}),a()()()(),r(50,"section")(51,"details",15)(52,"summary")(53,"span"),d(54,"Video"),a(),f(55,"help-link-icon",16),a(),f(56,"hr"),r(57,"div",17)(58,"app-options-setting",30),m("optionChange",function(p){return g(l),h(i.profileService.updateSetting("video_format",p))}),a(),r(59,"app-options-setting",31),m("optionChange",function(p){return g(l),h(i.profileService.updateSetting("video_resolution",p))}),a()()()(),r(60,"section")(61,"details",15)(62,"summary")(63,"span"),d(64,"Subtitle"),a(),f(65,"help-link-icon",16),a(),f(66,"hr"),r(67,"div",17)(68,"app-options-setting",32),m("optionChange",function(p){return g(l),h(i.profileService.updateSetting("subtitles_enabled",p))}),a(),r(69,"app-options-setting",33),m("optionChange",function(p){return g(l),h(i.profileService.updateSetting("subtitles_format",p))}),a(),r(70,"app-text-setting",34),m("onSubmit",function(p){return g(l),h(i.profileService.updateSetting("subtitles_language",p))}),a()()()(),r(71,"section")(72,"details",15)(73,"summary")(74,"span"),d(75,"Search"),a(),f(76,"help-link-icon",16),a(),f(77,"hr"),r(78,"div",17)(79,"app-text-setting",35),m("onSubmit",function(p){return g(l),h(i.profileService.updateSetting("search_query",p))}),a(),r(80,"app-range-setting",36),m("onSubmit",function(p){return g(l),h(i.profileService.updateSetting("min_duration",p))}),a(),r(81,"app-range-setting",37),m("onSubmit",function(p){return g(l),h(i.profileService.updateSetting("max_duration",p))}),a(),r(82,"app-options-setting",38),m("optionChange",function(p){return g(l),h(i.profileService.updateSetting("always_search",p))}),a(),r(83,"app-text-setting",39),m("onSubmit",function(p){return g(l),h(i.profileService.updateSetting("include_words",p))}),a(),r(84,"app-text-setting",40),m("onSubmit",function(p){return g(l),h(i.profileService.updateSetting("exclude_words",p))}),a(),r(85,"app-text-setting",41),m("onSubmit",function(p){return g(l),h(i.profileService.updateSetting("ytdlp_extra_options",p))}),a()()()(),r(86,"section")(87,"details",15)(88,"summary")(89,"span"),d(90,"Filters"),a(),f(91,"help-link-icon",16),a(),f(92,"hr"),r(93,"div",17)(94,"p"),d(95,"Filters are conditions that media must meet. This profile is used only when all conditions match."),a(),r(96,"small"),d(97,"Think of filters as rules; if a movie or show matches all the rules, this profile will be used."),a(),C(98,Tr,12,0,"table",42)(99,kr,2,0),r(100,"button",43),m("click",function(){return g(l),h(i.openFilterDialog())}),d(101,"Add/Edit Filters"),a()()()(),r(102,"div",44)(103,"button",45),m("click",function(){return g(l),h(i.showCopyProfileDialog())}),x(),r(104,"svg",11),f(105,"path",46),a(),O(),r(106,"span",13),d(107,"Duplicate Profile"),a()(),r(108,"button",45),m("click",function(){return g(l),h(i.showJsonEditDialog())}),x(),r(109,"svg",11),f(110,"path",47),a(),O(),r(111,"span",13),d(112,"Advanced Editor"),a()()(),r(113,"dialog",48,0),m("click",function(){return g(l),h(i.closeDeleteDialog())}),r(115,"div",49),m("click",function(p){return g(l),h(p.stopPropagation())}),r(116,"h2"),d(117,"Delete Profile"),a(),r(118,"p"),d(119,"This will Delete the profile and no longer use it for downloads"),a(),r(120,"p"),d(121,"Delete the profile?"),a(),r(122,"div",44)(123,"button",50),m("click",function(){return g(l),h(i.onConfirmDelete())}),d(124,"Delete"),a(),r(125,"button",51),m("click",function(){return g(l),h(i.closeDeleteDialog())}),d(126,"Cancel"),a()()()(),r(127,"dialog",52,1),m("click",function(){return g(l),h(i.closeCopyProfileDialog())}),r(129,"div",49),m("click",function(p){return g(l),h(p.stopPropagation())}),r(130,"h2"),d(131,"Duplicate Profile"),a(),r(132,"p"),d(133,"This will create a copy of the current profile."),a(),r(134,"div",53)(135,"label",54),d(136,"New Profile Name"),a(),r(137,"input",55),A("ngModelChange",function(p){return g(l),F(i.newProfileName,p)||(i.newProfileName=p),h(p)}),a()(),r(138,"div",44)(139,"button",56),m("click",function(){return g(l),h(i.onConfirmCopy())}),d(140,"Duplicate"),a(),r(141,"button",51),m("click",function(){return g(l),h(i.closeCopyProfileDialog())}),d(142,"Cancel"),a()()()(),r(143,"dialog",52,2),m("click",function(){return g(l),h(i.closeJsonEditDialog())}),r(145,"div",49),m("click",function(p){return g(l),h(p.stopPropagation())}),r(146,"h2"),d(147,"Edit Profile JSON"),a(),r(148,"p"),d(149,"This will allow you to edit the profile JSON directly."),a(),r(150,"div",53)(151,"label",57),d(152,"Profile JSON"),a(),r(153,"textarea",58,3),A("ngModelChange",function(p){return g(l),F(i.profileJSON,p)||(i.profileJSON=p),h(p)}),a()(),r(155,"div",44)(156,"button",56),m("click",function(){return g(l),h(i.onJsonEditSave())}),d(157,"Save"),a(),r(158,"button",51),m("click",function(){return g(l),h(i.closeJsonEditDialog())}),d(159,"Cancel"),a()()()()}if(o&2){let l,c,p,P,q,H,Ie,Fe,Ae,qe,Ue,Ge,je,sn,dn,cn,pn,un,mn,gn,hn,fn,_n,vn,Cn,bn,Ye;b(i.profileService.allProfiles.isLoading()?0:-1),s(3),Y("Profile: ",(l=i.profile())==null||l.customfilter==null?null:l.customfilter.filter_name),s(10),b(i.invalidFormatsWarning().length>0?13:-1),s(6),u("link",i.helpLinks.general),s(3),u("options",i.trueFalseOptions)("selectedOption",(c=i.profile())==null?null:c.enabled),s(),u("isNumberType",!0)("isLongInput",!1)("placeholder","Priority")("autocomplete","off")("minLength",1)("maxLength",3)("value",((p=i.profile())==null?null:p.priority)??0)("disabled",!1),s(),u("options",i.trueFalseOptions)("selectedOption",(P=i.profile())==null?null:P.stop_monitoring),s(6),u("link",i.helpLinks.file),s(3),u("options",i.fileFormatOptions)("selectedOption",(q=i.profile())==null?null:q.file_format)("disabledOptions",i.fileFormatsDisabled()),s(),u("isNumberType",!1)("isLongInput",!0)("placeholder","File Name")("autocomplete","off")("minLength",1)("maxLength",150)("value",((H=i.profile())==null?null:H.file_name)??"")("disabled",!1),s(),u("options",i.trueFalseOptions)("selectedOption",(Ie=i.profile())==null?null:Ie.folder_enabled),s(),b((Fe=i.profile())!=null&&Fe.folder_enabled?36:-1),s(),u("isNumberType",!1)("isLongInput",!0)("placeholder","Custom Save Folder Path")("autocomplete","off")("minLength",1)("maxLength",100)("value",((Ae=i.profile())==null?null:Ae.custom_folder)??""),s(),u("options",i.trueFalseOptions)("selectedOption",(qe=i.profile())==null?null:qe.embed_metadata),s(),u("options",i.trueFalseOptions)("selectedOption",(Ue=i.profile())==null?null:Ue.remove_silence),s(6),u("link",i.helpLinks.audio),s(3),u("options",i.audioFormatOptions)("disabledOptions",i.audioFormatsDisabled())("selectedOption",(Ge=i.profile())==null?null:Ge.audio_format),s(),u("minValue",1)("maxValue",200)("stepValue",1)("value",((je=i.profile())==null?null:je.audio_volume_level)??100)("disabled",!1)("colorType","warning"),s(6),u("link",i.helpLinks.video),s(3),u("options",i.videoFormatOptions)("disabledOptions",i.videoFormatsDisabled())("selectedOption",(sn=i.profile())==null?null:sn.video_format),s(),u("options",i.videoResolutionOptions)("selectedOption",(dn=i.profile())==null?null:dn.video_resolution),s(6),u("link",i.helpLinks.subtitle),s(3),u("options",i.trueFalseOptions)("selectedOption",(cn=i.profile())==null?null:cn.subtitles_enabled),s(),u("options",i.subtitleFormatOptions)("selectedOption",(pn=i.profile())==null?null:pn.subtitles_format),s(),u("isNumberType",!1)("isLongInput",!1)("placeholder","Subtitles Language")("autocomplete","off")("minLength",2)("maxLength",20)("value",((un=i.profile())==null?null:un.subtitles_language)??"en")("disabled",!((mn=i.profile())!=null&&mn.subtitles_enabled)),s(6),u("link",i.helpLinks.search),s(3),u("isNumberType",!1)("isLongInput",!0)("placeholder","Search Query")("autocomplete","off")("minLength",10)("maxLength",150)("value",((gn=i.profile())==null?null:gn.search_query)??"")("disabled",!1),s(),u("minValue",30)("maxValue",i.minLimitMax())("value",((hn=i.profile())==null?null:hn.min_duration)??30)("disabled",!1),s(),u("minValue",i.maxLimitMin())("maxValue",600)("value",((fn=i.profile())==null?null:fn.max_duration)??600)("disabled",!1),s(),u("options",i.trueFalseOptions)("selectedOption",(_n=i.profile())==null?null:_n.always_search),s(),u("isNumberType",!1)("isLongInput",!0)("placeholder","Include Words")("autocomplete","off")("minLength",0)("maxLength",200)("value",((vn=i.profile())==null?null:vn.include_words)??"")("disabled",!1),s(),u("isNumberType",!1)("isLongInput",!0)("placeholder","Exclude Words List")("autocomplete","off")("minLength",0)("maxLength",200)("value",((Cn=i.profile())==null?null:Cn.exclude_words)??"")("disabled",!1),s(),u("isNumberType",!1)("isLongInput",!0)("placeholder","Yt-dlp Extra Options")("autocomplete","off")("minLength",0)("maxLength",500)("value",((bn=i.profile())==null?null:bn.ytdlp_extra_options)??"")("disabled",!1)("colorType","warning"),s(6),u("link",i.helpLinks.filters),s(7),b(!((Ye=i.profile())==null||Ye.customfilter==null||Ye.customfilter.filters==null)&&Ye.customfilter.filters.length?98:99),s(39),I("ngModel",i.newProfileName),s(2),u("disabled",!i.newProfileName()),s(14),I("ngModel",i.profileJSON),s(3),u("disabled",!i.profileJSON())}},dependencies:[U,X,ee,te,Pe,G,St,xi,xt],styles:["[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column}.center[_ngcontent-%COMP%]{position:fixed;top:50vh;left:50%;transform:translate(-50%,-50%)}.title-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;max-width:calc(100% - 7rem);color:var(--color-primary)}.edit-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.top-right-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:10px}details[_ngcontent-%COMP%]{margin:.5rem 0;border:1px solid var(--color-outline);border-radius:.5rem;background-color:var(--color-surface-container)}summary[_ngcontent-%COMP%]{padding:1rem;font-weight:700;cursor:pointer;color:var(--color-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:calc(100vw - 260px);display:flex;align-items:center;justify-content:space-between}@media(width<1100px){summary[_ngcontent-%COMP%]{max-width:calc(100vw - 100px)}}@media(width<765px){summary[_ngcontent-%COMP%]{max-width:calc(100vw - 50px)}}.sticky-warning[_ngcontent-%COMP%]{position:sticky;top:122px;z-index:10;padding:0 1rem;margin:.5rem 0;border-radius:.5rem;font-size:larger;font-weight:600;color:var(--color-warning);background-color:var(--color-surface-container)}.setting-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 .5rem;container-type:inline-size}table[_ngcontent-%COMP%]{text-align:center;margin:1.5rem auto 1rem;padding:1rem;width:clamp(300px,50vw,800px);border-collapse:collapse;border:2px solid var(--color-outline);font-family:sans-serif;font-size:.8rem;letter-spacing:1px}thead[_ngcontent-%COMP%], tfoot[_ngcontent-%COMP%]{background-color:var(--color-secondary-container)}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid var(--color-outline);padding:8px 10px}td[_ngcontent-%COMP%]:last-of-type{text-align:center}tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(2n){background-color:var(--color-surface-container-high)}.filters-button[_ngcontent-%COMP%]{width:auto;margin:1rem auto}.dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem;text-align:center}.input-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem}.input-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:0;left:1rem;transform:translateY(-50%);transform-origin:left top;transition:all .2s ease-in-out;color:var(--color-secondary);background:var(--color-surface-container-highest);padding:0 .25rem;font-size:small;pointer-events:none}.new-profile-name[_ngcontent-%COMP%]{height:3rem;min-width:25vw;width:100%;border:1px solid var(--color-outline);border-radius:.5rem;padding:.25rem;font-size:large;color:var(--color-tertiary)}.json-editor[_ngcontent-%COMP%]{max-width:85vw;min-width:50vw;min-height:40vh;max-height:75vh;width:100%;padding:1rem;border:1px solid var(--color-outline);border-radius:.5rem;color:var(--color-tertiary);overscroll-behavior:contain}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0})}}return t})();var Dr=t=>[t];function Vr(t,n){t&1&&f(0,"app-load-indicator",8)}function Nr(t,n){if(t&1&&(r(0,"p"),d(1),a()),t&2){let e=_().$implicit;s(),kt("Subtitle: ",e.subtitles_language," | ",e.subtitles_format)}}function Lr(t,n){t&1&&(r(0,"p"),d(1,"Subtitles: No"),a())}function Rr(t,n){t&1&&(x(),r(0,"svg",14),f(1,"path",16),a())}function Ir(t,n){t&1&&(x(),r(0,"svg",15),f(1,"path",17),a())}function Fr(t,n){if(t&1&&(r(0,"a",10)(1,"h3",11),d(2),a(),r(3,"div",12)(4,"p"),d(5),a(),r(6,"p"),d(7),a(),C(8,Nr,2,2,"p")(9,Lr,2,0,"p"),a(),r(10,"div",13),C(11,Rr,2,0,":svg:svg",14)(12,Ir,2,0,":svg:svg",15),a()()),t&2){let e=n.$implicit;u("routerLink",L(7,Dr,e.id)),s(2),v(e.customfilter.filter_name);let o=e.video_resolution?`${e.video_resolution}p`:"best";s(3),kt("Video: ",o," | ",e.video_format),s(2),Y("Audio: ",e.audio_format),s(),b(e.subtitles_enabled?8:9),s(3),b(e.enabled?11:12)}}function Ar(t,n){if(t&1&&(r(0,"div",9),k(1,Fr,13,9,"a",10,le),a()),t&2){let e=_(2);s(),D(e.profileService.allProfiles.value())}}function qr(t,n){t&1&&(r(0,"div",8)(1,"p"),d(2,"No profiles found."),a()())}function Ur(t,n){if(t&1&&C(0,Ar,3,0,"div",9)(1,qr,3,0,"div",8),t&2){let e=_();b(e.profileService.allProfiles.value()&&e.profileService.allProfiles.value().length>0?0:1)}}var Mi=(()=>{class t{constructor(){this.profileService=S(at),this.router=S(xe),this.viewContainerRef=S(ae),this.isLoading=M(!0),this.RouteAdd="add",this.RouteProfiles=_e,this.RouteEdit=it,this.RouteSettings=ot}openFilterDialog(){let e=this.viewContainerRef.createComponent(lt);e.setInput("customFilter",null),e.setInput("filterType","TRAILER"),e.instance.dialogClosed.subscribe(o=>{o>=0&&(this.profileService.allProfiles.reload(),this.router.navigate(["/settings/profiles",o])),setTimeout(()=>{e.destroy()},3e3)})}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-show-profiles"]],decls:14,vars:3,consts:[[1,"title-block"],["title","Refresh",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"refresh-icon"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],[1,"animated-button","top-right-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"],[1,"text"],[1,"center"],[1,"profile-container"],[1,"profile-card",3,"routerLink"],[1,"profile-card-title"],[1,"profile-card-content"],[1,"profile-card-checkbox"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","title","Profile Enabled",1,"profile-card-icon","success"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","title","Profile Disabled",1,"profile-card-icon","danger"],["d","m421-288 294-294-55-54-239 239-121-121-54 54 175 176Zm58.54 224q-85.18 0-161.02-33.02t-132.16-89.34q-56.32-56.32-89.34-132.29T64-480q0-86.27 33.08-162.15 33.08-75.88 89.68-132.47 56.61-56.59 132.22-88.99Q394.59-896 479.56-896q86.33 0 162.51 32.39 76.18 32.4 132.56 89Q831-718 863.5-641.96q32.5 76.04 32.5 162.5 0 85.46-32.39 160.8-32.4 75.34-88.99 131.92Q718.03-130.16 642-97.08 565.98-64 479.54-64Zm.46-73q142.51 0 242.76-100.74Q823-338.49 823-480q0-142.51-100.24-242.76Q622.51-823 480-823q-141.51 0-242.26 100.24Q137-622.51 137-480q0 141.51 100.74 242.26Q338.49-137 480-137Zm0-343Z"],["d","M836-29 724-141q-52 37-113.57 57Q548.87-64 480-64q-87.64 0-163.98-32.02-76.34-32.02-132.16-87.84-55.82-55.82-87.84-132.16T64-480q0-68.87 20-130.43Q104-672 141-724L15-850l52-52L888-81l-52 52ZM480-137q54.5 0 102.25-14.5T671-193L498-366l-77 78-175-176 49-49 122 120 27-27-251-251q-27 41-41.5 88.75T137-480q0 146 98.5 244.5T480-137Zm339-99-52-52q26-41 41-89.5T823-480q0-146-98.5-244.5T480-823q-54 0-102.5 15T288-767l-52-52q50.84-36.43 112.62-56.72Q410.4-896 480-896q87.89 0 163.94 32Q720-832 776-776t88 132.06q32 76.05 32 163.94 0 69.6-20.28 131.38Q855.43-286.84 819-236ZM594-461l-55-54 121-121 55 54-121 121Zm-67-66Zm-95 95Z"]],template:function(o,i){o&1&&(r(0,"div",0)(1,"h2"),d(2,"Profiles"),a(),r(3,"i",1),m("click",function(){return i.profileService.allProfiles.reload()}),x(),r(4,"svg",2),f(5,"path",3),a()()(),O(),r(6,"button",4),m("click",function(){return i.openFilterDialog()}),x(),r(7,"svg",5),f(8,"path",6),a(),O(),r(9,"span",7),d(10,"Add New"),a()(),f(11,"hr"),C(12,Vr,1,0,"app-load-indicator",8)(13,Ur,2,1)),o&2&&(s(3),N("loading",i.profileService.allProfiles.isLoading()),s(9),b(i.profileService.allProfiles.isLoading()?12:13))},dependencies:[G,Ee],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;position:relative;gap:12px}.title-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.refresh-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.loading[_ngcontent-%COMP%]{cursor:progress;animation:spin-animation 2s linear infinite}.top-right-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:10px}.center[_ngcontent-%COMP%]{position:fixed;top:50vh;left:50%;transform:translate(-50%,-50%)}.profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:1rem}.profile-card[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr auto;grid-template-columns:1fr auto;gap:10px;max-width:500px;padding:12px;border:2px solid var(--color-outline);border-radius:8px;background-color:var(--color-surface-container);color:var(--color-on-surface);cursor:pointer;text-decoration:none}@media(max-width:765px){.profile-card[_ngcontent-%COMP%]{margin:auto;width:100%}}.profile-card-title[_ngcontent-%COMP%]{grid-row:1;grid-column:1/span 2;color:var(--color-primary);text-align:center}.profile-card-content[_ngcontent-%COMP%]{grid-row:2;grid-column:1;padding:0 1rem}.profile-card-checkbox[_ngcontent-%COMP%]{grid-row:2;grid-column:2;width:auto;padding:.5rem;margin:auto}.profile-card-icon[_ngcontent-%COMP%]{width:3rem;height:3rem}.success[_ngcontent-%COMP%]{fill:var(--color-success)}.error[_ngcontent-%COMP%]{fill:var(--color-error)}"],changeDetection:0})}}return t})();var Pi=(()=>{class t{constructor(){this.RouteAbout=nt,this.RouteConnections=de,this.RouteProfiles=_e,this.RouteGeneral=Be}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-settings"]],decls:12,vars:4,consts:[[1,"settingsnav"],["routerLinkActive","active",1,"setnav-btn",3,"routerLink"],[1,"settings-container"],[1,"settings-content"]],template:function(o,i){o&1&&(r(0,"div",0)(1,"a",1),d(2,"General"),a(),r(3,"a",1),d(4,"Connections"),a(),r(5,"a",1),d(6,"Profiles"),a(),r(7,"a",1),d(8,"About"),a()(),r(9,"div",2)(10,"div",3),f(11,"router-outlet"),a()()),o&2&&(s(),u("routerLink",i.RouteGeneral),s(2),u("routerLink",i.RouteConnections),s(2),u("routerLink",i.RouteProfiles),s(2),u("routerLink",i.RouteAbout))},dependencies:[Ee,Zn,jn],styles:[".settings-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:1rem}@media(width<765px){.settings-container[_ngcontent-%COMP%]{margin:.5rem}}.settingsnav[_ngcontent-%COMP%]{position:sticky;top:76px;left:0;right:0;z-index:99;margin:0;padding:0;display:flex;flex-direction:row;background-color:var(--color-surface-container-low);color:var(--color-on-surface)}@media(width<765px){.settingsnav[_ngcontent-%COMP%]{order:2;justify-content:space-around;position:fixed;top:auto;bottom:76px}}.settingsnav[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1}.settings-content[_ngcontent-%COMP%]{order:2;padding:.5rem}@media(width<765px){.settings-content[_ngcontent-%COMP%]{margin-bottom:80px;order:1}}.setnav-btn[_ngcontent-%COMP%]{margin:0;padding:.8rem;box-sizing:border-box;text-decoration:none;color:inherit;text-align:center;font-weight:400;transition:.3s;cursor:pointer;border-radius:0;border-bottom:2px solid transparent}.setnav-btn.active[_ngcontent-%COMP%]{background-color:var(--color-secondary-container);opacity:1;font-weight:600;color:var(--color-on-secondary-container);border-bottom:2px solid var(--color-primary)}.setnav-btn[_ngcontent-%COMP%]:not(.active):hover{background-color:var(--color-secondary-container);opacity:.6;font-weight:500;color:var(--color-on-secondary-container);border-bottom:2px solid var(--color-primary)}"]})}}return t})();var Yl=[{path:"",loadComponent:()=>Pi,children:[{path:de,component:wi},{path:`${de}/${"add"}`,component:ln},{path:`${de}/:${Hn}`,component:ln},{path:_e,component:Mi},{path:`${_e}/:${Bn}`,component:Ei},{path:Be,component:Si},{path:nt,component:li},{path:"**",redirectTo:Be,pathMatch:"prefix"}]}];export{Yl as default};
