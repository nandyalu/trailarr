import{p as s}from"./chunk-TBPGMFNI.js";import{D as l,F as d}from"./chunk-CGZER6MH.js";import{Ba as y,Cb as g,D as u,Eb as T,H as i,Qb as a,R as f,W as C,c as h,fa as v,fb as b,ib as w,n as m,u as n}from"./chunk-2I2MBWCP.js";var I=(()=>{class o{constructor(){this.textToCopy=w.required(),this.webSocketService=i(s),this.element=i(C),this.element.nativeElement.classList.add("copy")}onClick(){this.copyToClipboard(this.textToCopy()),console.log("Element with copy button clicked!")}copyToClipboard(t){return h(this,null,function*(){if(navigator.clipboard)try{yield navigator.clipboard.writeText(t),this.webSocketService.showToast("Copied to clipboard!")}catch(e){this.webSocketService.showToast("Error copying text to clipboard.","Error"),console.error("Failed to copy: ",e)}else{let e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.webSocketService.showToast("Copied to clipboard!")}})}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275dir=v({type:o,selectors:[["","appCopyToClipboard",""]],hostBindings:function(e,r){e&1&&y("click",function(){return r.onClick()})("keydown.enter",function(){return r.onClick()})},inputs:{textToCopy:[1,"textToCopy"]}})}}return o})();function c(){return o=>{let p="";if(o.error instanceof ErrorEvent)p=`Client Error: ${o.error.message}`;else{let t=o.error?.detail,e=o.error?.message,r=o.message||"Unknown error occurred";p=`Server Error (${o.status}): ${t||e||r}`}return m(()=>new Error(p))}}var Z=(()=>{class o{constructor(){this.http=i(g),this.websocketService=i(s),this.connectionsUrl=a.apiUrl+a.connections,this.connectionsResource=T(()=>({url:this.connectionsUrl}),{defaultValue:[]}),this.newConnection={added_at:new Date().toISOString(),api_key:"",arr_type:l.Radarr,id:-1,monitor:d.New,name:"",path_mappings:[],url:""},this.connectionID=f(-1),this.selectedConnection=b(()=>{let t=this.connectionsResource.value().find(e=>e.id===this.connectionID());return t||this.newConnection})}addConnection(t){return this.http.post(this.connectionsUrl,t).pipe(n(c()))}connectionExists(t){return this.connectionsResource.value().some(r=>r.id===t)?!0:(t!=-1&&this.websocketService.showToast(`Connection with ID '${t}' does not exist.`,"error"),!1)}deleteConnection(t){var e=this.connectionsUrl+t;return this.http.delete(e).pipe(n(c()))}getRootFolders(t){var e=this.connectionsUrl+"rootfolders";return this.http.post(e,t).pipe(n(c()))}testConnection(t){var e=this.connectionsUrl+"test";return this.http.post(e,t).pipe(n(c()))}updateConnection(t,e){var r=this.connectionsUrl+t;return this.http.put(r,e).pipe(n(c()))}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{I as a,Z as b};
