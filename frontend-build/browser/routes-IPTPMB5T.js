import{a as Fe}from"./chunk-BFNVVHSC.js";import{a as Pe,c as ke,d as $}from"./chunk-DBPEGEMS.js";import{a as Oe}from"./chunk-QD2V5FY5.js";import{a as Ve,b as Ie}from"./chunk-LMOE46A3.js";import"./chunk-G2XXIS5G.js";import{d as ye,e as De,r as K}from"./chunk-GJS7FWDK.js";import{a as N}from"./chunk-LTSMKAU7.js";import{N as te,P as Ee,f as Se,h as Te,k as Y,l as be,q as X,s as J,w as ee}from"./chunk-NGFLMJKA.js";import{a as G}from"./chunk-FSXPERLQ.js";import{$b as U,Ab as j,Bb as L,Da as F,Db as d,Eb as x,Fb as y,G as ne,Ga as pe,Gb as le,Ha as l,Hb as fe,Ib as xe,Jb as ve,Kb as A,Lb as B,Mb as M,Na as _e,Nb as re,Ob as q,Qa as R,Qb as de,Rb as ce,Ta as ge,Tb as V,Ub as H,Va as W,Vb as he,Wb as we,_b as D,ac as Me,c as me,ca as b,db as p,dc as z,eb as _,fb as ue,gb as Ce,hb as Q,ia as C,ib as Z,ja as f,jb as h,ka as w,kb as i,la as I,lb as o,mb as g,nb as oe,ob as S,r as ie,ra as P,rb as u,sb as m,ub as k,vb as O,wb as E,zb as ae}from"./chunk-IZTUW6FH.js";var Le=(()=>{let a=class a{transform(t){return Pe(t)}};a.\u0275fac=function(r){return new(r||a)},a.\u0275pipe=ge({name:"durationConvert",type:a,pure:!0});let e=a;return e})();function qe(e){let a=["Bytes","KB","MB","GB","TB"];if(e===0)return"0 Byte";let n=parseInt(String(Math.floor(Math.log(e)/Math.log(1024))));return Math.round(e/Math.pow(1024,n))+" "+a[n]}function Re(e){let a=Math.floor(e/3600),n=Math.floor(e%3600/60),t=e%60,r="";return a>0&&(r+=a+":"),r+=(n<10?"0":"")+n+":",r+=(t<10?"0":"")+t,r}var Ne=(e,a)=>a.id;function $e(e,a){e&1&&g(0,"app-load-indicator")}function Ge(e,a){if(e&1&&(i(0,"div",5)(1,"div",6)(2,"a",7),d(3),o(),i(4,"span"),d(5),o(),i(6,"span"),d(7),V(8,"date"),o(),i(9,"span"),d(10),o(),i(11,"span"),d(12),o(),i(13,"span"),d(14),o()(),i(15,"div",8)(16,"span",9),d(17,"info"),o()()()),e&2){let n=a.$implicit,t=m(2);l(2),h("href",q("https://www.youtube.com/watch?v=",n.youtube_id),F),l(),y(" ",n.youtube_id," "),l(2),x(n.profile_id),l(2),x(he(8,9,n.added_at,"short")),l(3),x(t.durationToTime(n.duration)),l(2),x(t.bytesToSize(n.size)),l(2),x(n.resolution),l(2),h("title",t.getTooltip(n))}}function je(e,a){e&1&&(i(0,"p"),d(1,"No downloads found for this media."),o())}function Ae(e,a){if(e&1&&(i(0,"div",4),Q(1,Ge,18,12,"div",5,Ne,!1,je,2,0,"p"),o()),e&2){let n,t=m();l(),Z((n=t.selectedMedia())==null?null:n.downloads)}}var Qe=(()=>{let a=class a{constructor(){this.mediaService=b($),this.webSocketService=b(N),this.mediaId=z.required(),this.selectedMedia=this.mediaService.selectedMedia,this.isLoading=D(()=>this.mediaService.mediaResource.isLoading()),this.bytesToSize=qe,this.durationToTime=Re}refreshDownloads(){this.webSocketService.showToast("Refreshing downloads..."),this.mediaService.scanMediaDownloads(this.mediaId()).subscribe(t=>{console.log(t),this.webSocketService.showToast(t,"success")})}getTooltip(t){return`
      Path: ${t.path}
      File Name: ${t.file_name}
      Size: ${this.bytesToSize(t.size)}
      Updated At: ${t.updated_at}
      Resolution: ${t.resolution}
      Video Format: ${t.video_format}
      Audio Format: ${t.audio_format}
      Audio Channels: ${t.audio_channels}
      File Format: ${t.file_format}
      Duration: ${this.durationToTime(t.duration)}
      Subtitles: ${t.subtitles}
      Added At: ${t.added_at}
      Profile ID: ${t.profile_id}
      File Exists: ${t.file_exists}
    `}};a.\u0275fac=function(r){return new(r||a)},a.\u0275cmp=R({type:a,selectors:[["app-media-downloads"]],inputs:{mediaId:[1,"mediaId"]},decls:9,vars:1,consts:[[1,"downloads-container"],[1,"header"],["title","Refresh Downloads",1,"icon-button",3,"click"],[1,"material-icons"],[1,"downloads-list"],[1,"download-item"],[1,"download-info"],["target","_blank","title","Watch on YouTube",3,"href"],[1,"download-details"],[1,"material-icons",3,"title"]],template:function(r,c){r&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),d(3,"Downloads"),o(),i(4,"button",2),u("click",function(){return c.refreshDownloads()}),i(5,"span",3),d(6,"refresh"),o()()(),p(7,$e,1,0,"app-load-indicator")(8,Ae,4,1,"div",4),o()),r&2&&(l(7),_(c.isLoading()?7:8))},dependencies:[be,Y,G],styles:[".downloads-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1rem;border:1px solid #ccc;border-radius:8px}.downloads-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.downloads-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.downloads-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer}.downloads-container[_ngcontent-%COMP%]   .downloads-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.downloads-container[_ngcontent-%COMP%]   .downloads-list[_ngcontent-%COMP%]   .download-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem;border:1px solid #eee;border-radius:4px}.downloads-container[_ngcontent-%COMP%]   .downloads-list[_ngcontent-%COMP%]   .download-item[_ngcontent-%COMP%]   .download-info[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.downloads-container[_ngcontent-%COMP%]   .downloads-list[_ngcontent-%COMP%]   .download-item[_ngcontent-%COMP%]   .download-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.downloads-container[_ngcontent-%COMP%]   .downloads-list[_ngcontent-%COMP%]   .download-item[_ngcontent-%COMP%]   .download-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.downloads-container[_ngcontent-%COMP%]   .downloads-list[_ngcontent-%COMP%]   .download-item[_ngcontent-%COMP%]   .download-details[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{cursor:pointer}"]});let e=a;return e})();var We=["optionsDialog"],Ye=["textDialog"],Ke=["videoDialog"],Xe=["videoDialogContent"],Je=["videoInfoDialog"],et=["renameDialog"],tt=["deleteFileDialog"],Ze=e=>({folderUntyped:e}),it=(e,a)=>a.index;function nt(e,a){if(e&1){let n=S();i(0,"i",35),u("click",function(){C(n);let r=m();return f(r.filesResource.reload())}),w(),i(1,"svg",36),g(2,"path",37),o()()}if(e&2){let n=m();j("loading",n.filesResource.isLoading())}}function ot(e,a){if(e&1){let n=S();i(0,"small",38),u("click",function(){C(n);let r=m();return f(r.filesOpened.set(!0))}),d(1,"Click to open files"),o()}}function at(e,a){e&1&&g(0,"app-load-indicator",24)}function lt(e,a){if(e&1&&(i(0,"p",40),d(1),o()),e&2){let n=m(3);l(),y("Error: ",n.filesError())}}function rt(e,a){e&1&&oe(0)}function dt(e,a){if(e&1&&(i(0,"div",41),g(1,"div"),i(2,"div"),d(3,"Name"),o(),i(4,"div"),d(5,"Size"),o(),i(6,"div"),d(7,"Modified"),o()(),W(8,rt,1,0,"ng-container",42)),e&2){let n=m(3),t=ae(8);l(8),h("ngTemplateOutlet",t)("ngTemplateOutletContext",de(2,Ze,n.filesResource.value()))}}function ct(e,a){if(e&1&&(i(0,"div",39),p(1,lt,2,1,"p",40)(2,dt,9,4),o()),e&2){let n=m(2);l(),_(n.filesResource.error()?1:2)}}function st(e,a){if(e&1&&(g(0,"hr"),p(1,at,1,0,"app-load-indicator",24)(2,ct,3,1,"div",39)),e&2){let n=m();l(),_(n.filesResource.isLoading()?1:2)}}function mt(e,a){e&1&&(w(),i(0,"svg",17),g(1,"path",50),o())}function pt(e,a){e&1&&(w(),i(0,"svg",17),g(1,"path",51),o())}function _t(e,a){if(e&1&&p(0,mt,2,0,":svg:svg",17)(1,pt,2,0,":svg:svg",17),e&2){m();let n=M(0);_(n.isExpanded?0:1)}}function gt(e,a){e&1&&(w(),i(0,"svg",17),g(1,"path",52),o())}function ut(e,a){e&1&&oe(0)}function Ct(e,a){if(e&1&&W(0,ut,1,0,"ng-container",42),e&2){let n=a.$implicit;m(4);let t=ae(8);h("ngTemplateOutlet",t)("ngTemplateOutletContext",de(2,Ze,n))}}function ft(e,a){if(e&1&&Q(0,Ct,1,4,"ng-container",null,Ce),e&2){m(2);let n=M(0);Z(n.files)}}function xt(e,a){if(e&1&&(i(0,"div",49),p(1,ft,2,0),o()),e&2){m();let n=M(0);l(),_(n.isExpanded?1:-1)}}function vt(e,a){if(e&1){let n=S();A(0),i(1,"div",43)(2,"div",44),u("click",function(){C(n);let r=M(0),c=m();return f(c.openFolderOrOptions(r))}),i(3,"div",45),p(4,_t,2,1)(5,gt,2,0,":svg:svg",17),o(),i(6,"div",46),d(7),o(),i(8,"div",47),d(9),o(),i(10,"div",48),d(11),V(12,"date"),o()(),p(13,xt,2,1,"div",49),o()}if(e&2){let n=a.folderUntyped,t=B(m().asFolderInfo(n));l(2),j("parent",t.type=="folder"),l(2),_(t.type==="folder"?4:5),l(3),x(t.name),l(2),x(t.size),l(2),x(H(12,8,t.modified)),l(2),_(t.type==="folder"?13:-1)}}function ht(e,a){if(e&1){let n=S();i(0,"div",53),u("click",function(){C(n);let r=m();return r.closeOptionsDialog(),f(r.openVideoDialog())}),i(1,"span"),w(),i(2,"svg",17),g(3,"path",54),o()(),I(),i(4,"span"),d(5,"Play Video"),o()(),i(6,"div",55),u("click",function(){C(n);let r=m();return r.closeOptionsDialog(),f(r.openVideoInfoDialog())}),i(7,"span"),w(),i(8,"svg",17),g(9,"path",56),o()(),I(),i(10,"span"),d(11,"Video Info"),o()()}}function wt(e,a){if(e&1){let n=S();i(0,"div",58),u("click",function(){C(n);let r=m(2);return r.closeOptionsDialog(),f(r.openTextDialog())}),i(1,"span"),w(),i(2,"svg",17),g(3,"path",59),o()(),I(),i(4,"span"),d(5,"View Text"),o()()}}function Mt(e,a){if(e&1&&p(0,wt,6,0,"div",57),e&2){let n=m();_(n.isTextFile()?0:-1)}}function St(e,a){e&1&&g(0,"app-load-indicator",24)}function Tt(e,a){if(e&1&&(d(0,`
          `),d(1,`
          `),i(2,"code"),d(3),o(),d(4,`
        `)),e&2){let n=a.$implicit;l(3),x(n)}}function bt(e,a){if(e&1){let n=S();i(0,"div",60),u("click",function(r){return C(n),f(r.stopPropagation())}),i(1,"h2"),d(2),o(),i(3,"div",61)(4,"pre"),d(5,"        "),Q(6,Tt,5,1,null,null,ue),o()(),i(8,"div",29)(9,"button",31),u("click",function(){C(n);let r=m();return f(r.closeTextDialog())}),d(10,"Close"),o()()()}if(e&2){let n=m();l(2),x(n.selectedFileName()),l(4),Z(n.selectedFileText())}}function yt(e,a){e&1&&g(0,"app-load-indicator",24)}function Dt(e,a){if(e&1&&(i(0,"div",64)(1,"span"),d(2,"Audio Tracks"),o(),i(3,"code"),d(4),o()()),e&2){let n=m(3);l(4),x(n.audioTracks())}}function Pt(e,a){if(e&1&&(i(0,"div",64)(1,"span"),d(2,"Subtitles"),o(),i(3,"code"),d(4),o()()),e&2){let n=m(3);l(4),x(n.subtitleTracks())}}function kt(e,a){if(e&1&&(i(0,"div",64)(1,"span"),d(2,"Codec"),o(),i(3,"code"),d(4),o()()),e&2){let n=m().$implicit;l(4),x(n.codec_name)}}function Ot(e,a){if(e&1&&(i(0,"div",64)(1,"span"),d(2,"Language"),o(),i(3,"code"),d(4),o()()),e&2){let n=m().$implicit;l(4),x(n.language)}}function Et(e,a){if(e&1&&(i(0,"div",64)(1,"span"),d(2,"Display Dimensions"),o(),i(3,"code"),d(4),o()()),e&2){let n=m().$implicit;l(4),le("",n.coded_width,"x",n.coded_height)}}function Ft(e,a){if(e&1&&(i(0,"div",64)(1,"span"),d(2,"Audio Channels"),o(),i(3,"code"),d(4),o()()),e&2){let n=m().$implicit;l(4),x(n.audio_channels)}}function Vt(e,a){if(e&1&&(i(0,"div",64)(1,"span"),d(2,"Audio Frequency"),o(),i(3,"code"),d(4),o()()),e&2){let n=m().$implicit;l(4),x(n.sample_rate)}}function It(e,a){if(e&1&&(i(0,"section")(1,"h2"),d(2),o(),g(3,"hr"),p(4,kt,5,1,"div",64),p(5,Ot,5,1,"div",64),p(6,Et,5,2,"div",64),p(7,Ft,5,1,"div",64),p(8,Vt,5,1,"div",64),o()),e&2){let n=a.$implicit;l(2),le("Track ",n.index,": ",n.codec_type),l(2),_(n.codec_name?4:-1),l(),_(n.language?5:-1),l(),_(n.coded_height&&n.coded_width?6:-1),l(),_(n.audio_channels?7:-1),l(),_(n.sample_rate?8:-1)}}function Lt(e,a){if(e&1&&(i(0,"section",63)(1,"h2"),d(2,"File Info"),o(),g(3,"hr"),i(4,"div",64)(5,"span"),d(6,"File Name"),o(),i(7,"code"),d(8),o()(),i(9,"div",64)(10,"span"),d(11,"Format"),o(),i(12,"code"),d(13),o()(),i(14,"div",64)(15,"span"),d(16,"Bitrate"),o(),i(17,"code"),d(18),o()(),i(19,"div",64)(20,"span"),d(21,"Duration"),o(),i(22,"code"),d(23),o()(),p(24,Dt,5,1,"div",64),p(25,Pt,5,1,"div",64),o(),Q(26,It,9,7,"section",null,it)),e&2){let n=a,t=m(2);l(8),x(n.name),l(5),x(n.format_name),l(5),x(n.bitrate),l(5),x(n.duration),l(),_(t.audioTracks().length>0?24:-1),l(),_(t.subtitleTracks().length>0?25:-1),l(),Z(n.streams)}}function qt(e,a){e&1&&(i(0,"h2"),d(1,"Video Info"),o(),g(2,"hr"),i(3,"code",65),d(4," Unable to fetch video info. "),o())}function Rt(e,a){if(e&1){let n=S();i(0,"div",26)(1,"h1"),d(2,"Video Properties"),o(),i(3,"div",62),u("click",function(r){return C(n),f(r.stopPropagation())}),p(4,Lt,28,6)(5,qt,5,0),o(),i(6,"div",29)(7,"button",31),u("click",function(){C(n);let r=m();return f(r.closeVideoInfoDialog())}),d(8,"Close"),o()()()}if(e&2){let n,t=m();l(4),_((n=t.videoInfo())?4:5,n)}}var Be=(()=>{let a=class a{constructor(){this.filesService=b(Ee),this.mediaService=b($),this.webSocketService=b(N),this.mediaId=z.required(),this.filesOpened=P(!1),this.textFileLoading=P(!0),this.videoInfoLoading=P(!0),this.mediaIDEffect=U(()=>{this.mediaId(),this.filesOpened.set(!1)}),this.selectedFilePath="",this.selectedFileName=P(""),this.videoInfo=P(null),this.selectedFileText=P([],{equal:ke}),this.audioTracks=D(()=>(this.videoInfo()?.streams??[]).filter(t=>t.codec_type.includes("audio")).map(t=>`${t.language||"unk"} (${t.codec_name})`).join(", ")),this.subtitleTracks=D(()=>(this.videoInfo()?.streams??[]).filter(t=>t.codec_type.includes("subtitle")).map(t=>`${t.language||"unk"} (${t.codec_name})`).join(", ")),this.filesResource=Me({params:()=>({mediaId:this.mediaId(),filesOpened:this.filesOpened()}),loader:c=>me(this,[c],function*({params:{mediaId:t,filesOpened:r}}){if(r)return yield this.mediaService.fetchMediaFiles(t)})}),this.filesError=D(()=>{let t=this.filesResource.error();return t?t.cause?.error.detail||"Error fetching media files.":""}),this.isTextFile=D(()=>[".txt",".srt",".log",".json",".py",".sh"].some(t=>this.selectedFileName().endsWith(t))),this.isVideoFile=D(()=>[".mp4",".mkv",".avi",".webm"].some(t=>this.selectedFileName().endsWith(t)))}ngOnInit(){this.webSocketService.toastMessage.pipe(Oe()).subscribe(t=>{let r=t.message.toLowerCase(),c=this.mediaId().toString(),s=this.mediaService.selectedMedia()?.title?.toLowerCase()||"";["media","trailer",c,s].some(T=>T&&r.includes(T))&&this.filesResource.reload()})}asFolderInfo(t){return t}openFolderOrOptions(t){t.type==="folder"?t.isExpanded=!t.isExpanded:(this.selectedFilePath=t.path,this.selectedFileName.set(t.name),this.openOptionsDialog())}renameFile(){this.closeRenameDialog();let r=this.selectedFilePath.split("/").slice(0,-1).join("/")+"/"+this.selectedFileName();this.filesService.renameFileFolApiV1FilesRenamePost({old_path:this.selectedFilePath,new_path:r}).subscribe(c=>{let s="";c?s="File renamed successfully!":s="Failed to rename file!",this.webSocketService.showToast(s,c?"success":"error"),this.filesResource.reload()})}deleteFile(){this.closeDeleteFileDialog(),this.filesService.deleteFileFolApiV1FilesDeleteDelete({path:this.selectedFilePath,media_id:this.mediaId()}).subscribe(t=>{let r="";t?r="Deleted successfully!":r="Failed to delete!",this.webSocketService.showToast(r,t?"success":"error"),this.filesResource.reload()})}openOptionsDialog(){this.optionsDialog.nativeElement.showModal()}closeOptionsDialog(){this.optionsDialog.nativeElement.close()}openTextDialog(){this.closeOptionsDialog(),this.textFileLoading.set(!0),this.selectedFileText.set([]),this.textDialog.nativeElement.showModal(),this.filesService.readFileApiV1FilesReadGet({file_path:this.selectedFilePath}).subscribe({next:t=>this.selectedFileText.set(t.split(`
`)),complete:()=>this.textFileLoading.set(!1),error:()=>this.textFileLoading.set(!1)})}closeTextDialog(){this.textDialog.nativeElement.close()}openVideoDialog(){this.videoDialog.nativeElement.showModal();let r=`
      <style>
        video {
          width: 75vw;
          height: auto;
        }
        @media (max-width: 768px) {
          video {
            width: 100%;
          }
        }
      </style>
      <video controls controlsList="nodownload">
        <source src="${`/api/v1/files/video?file_path=${encodeURIComponent(this.selectedFilePath)}`}" type="video/mp4">
        Your browser does not support the video tag.</source>
      </video>`;this.videoDialogContent.nativeElement.innerHTML=r}closeVideoDialog(){this.videoDialogContent.nativeElement.innerHTML="",this.videoDialog.nativeElement.close()}openVideoInfoDialog(){this.videoInfoLoading.set(!0),this.videoInfoDialog.nativeElement.showModal(),this.filesService.getVideoInfoApiV1FilesVideoInfoGet({file_path:this.selectedFilePath}).subscribe({next:t=>{this.videoInfo.set(t)},complete:()=>this.videoInfoLoading.set(!1),error:()=>this.videoInfoLoading.set(!1)})}closeVideoInfoDialog(){this.videoInfoDialog.nativeElement.close(),this.videoInfo.set(null)}openRenameDialog(){this.closeOptionsDialog(),this.renameDialog.nativeElement.showModal()}closeRenameDialog(){this.renameDialog.nativeElement.close()}openDeleteFileDialog(){this.closeOptionsDialog(),this.deleteFileDialog.nativeElement.showModal()}closeDeleteFileDialog(){this.deleteFileDialog.nativeElement.close()}};a.\u0275fac=function(r){return new(r||a)},a.\u0275cmp=R({type:a,selectors:[["media-files"]],viewQuery:function(r,c){if(r&1&&(k(We,5),k(Ye,5),k(Ke,5),k(Xe,5),k(Je,5),k(et,5),k(tt,5)),r&2){let s;O(s=E())&&(c.optionsDialog=s.first),O(s=E())&&(c.textDialog=s.first),O(s=E())&&(c.videoDialog=s.first),O(s=E())&&(c.videoDialogContent=s.first),O(s=E())&&(c.videoInfoDialog=s.first),O(s=E())&&(c.renameDialog=s.first),O(s=E())&&(c.deleteFileDialog=s.first)}},inputs:{mediaId:[1,"mediaId"]},decls:70,vars:7,consts:[["folFileTemplate",""],["optionsDialog",""],["optionsDialogContent",""],["textDialog",""],["videoDialog",""],["videoDialogContent",""],["videoInfoDialog",""],["renameDialog",""],["deleteFileDialog",""],[1,"media-files-container"],[1,"title-block"],[1,"files-title"],["title","Refresh",1,"icononly-button",3,"loading"],[1,"files-open"],[3,"click"],[1,"dialog-content",3,"click"],[1,"close",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","m249-186-63-63 231-231-231-230 63-64 231 230 231-230 63 64-230 230 230 231-63 63-231-230-231 230Z"],[1,"dialog-options"],["title","Rename",1,"icon-link",3,"click"],["d","M81-5v-138h798V-5H81Zm150-327h30l371-371-13.35-15.86L604-733 231-362v30Zm-68 69v-126l486-488q10-9 23.11-14.5 13.12-5.5 26-5.5 12.89 0 25.89 5.75T748-876l28 25q12 10 17 23.99 5 13.99 5 26.52 0 13.17-5.46 26.76Q787.09-760.14 777-751L288-263H163Zm563-538-27-27 27 27Zm-94 98-13.35-15.86L604-733l28 30Z"],["title","Delete",1,"icon-link","danger-option",3,"click"],["d","M253-99q-38.21 0-65.11-26.6Q161-152.2 161-190v-552h-58v-91h228v-47h297v47h228v91h-58v552q0 37.18-27.21 64.09Q743.59-99 706-99H253Zm453-643H253v552h453v-552ZM357-268h74v-398h-74v398Zm173 0h75v-398h-75v398ZM253-742v552-552Z"],[1,"center"],[1,"text-dialog"],[1,"info-dialog"],[1,"rename-dialog",3,"click"],["id","rename-file","type","text","placeholder","New Name",1,"rename-input",3,"ngModelChange","ngModel"],[1,"buttons-row"],[1,"primary",3,"click"],[1,"tertiary",3,"click"],["id","deleteFileDialog",3,"click"],[1,"delete-dialog",3,"click"],[1,"danger",3,"click"],["title","Refresh",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"refresh-icon"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],[1,"files-open",3,"click"],[1,"media-files"],[1,"text-sm","text-center"],[1,"files-header","sm-none","text-sm"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"files-accordion"],[1,"files-header",3,"click"],[1,"files-icon"],[1,"files-name"],[1,"files-size"],[1,"files-modified"],[1,"child"],["d","M146.67-160q-26.34 0-46.5-20.17Q80-200.33 80-226.67v-506.66q0-26.34 20.17-46.5Q120.33-800 146.67-800H414l66.67 66.67h332.66q26.34 0 46.5 20.16Q880-693 880-666.67H146.67v440l100-373.33H940L834.33-209.67q-6.66 24.67-24.5 37.17Q792-160 766.67-160h-620Z"],["d","M146.67-160q-27 0-46.84-20.17Q80-200.33 80-226.67v-506.66q0-26.34 19.83-46.5Q119.67-800 146.67-800H414l66.67 66.67h332.66q26.34 0 46.5 20.16Q880-693 880-666.67v440q0 26.34-20.17 46.5Q839.67-160 813.33-160H146.67Z"],["d","M319.33-246.67h321.34v-66.66H319.33v66.66Zm0-166.66h321.34V-480H319.33v66.67ZM226.67-80q-27 0-46.84-19.83Q160-119.67 160-146.67v-666.66q0-27 19.83-46.84Q199.67-880 226.67-880H574l226 226v507.33q0 27-19.83 46.84Q760.33-80 733.33-80H226.67Zm314-542.67h192.66L540.67-813.33v190.66Z"],["title","Play Video",1,"icon-link",3,"click"],["d","M320-203v-560l440 280-440 280Zm60-280Zm0 171 269-171-269-171v342Z"],["title","Video Info",1,"icon-link",3,"click"],["d","M447-272h73v-248h-73v248Zm32.89-330Q496-602 507-612.59q11-10.58 11-26.23 0-17.63-10.87-28.4Q496.26-678 480.19-678q-17.19 0-27.69 10.6T442-639.68q0 16.28 10.89 26.98 10.9 10.7 27 10.7Zm-.08 538q-85.92 0-161.52-33.02-75.61-33.02-131.93-89.34-56.32-56.32-89.34-132.13T64-480.5q0-86.09 33.08-161.81t89.68-132.31q56.61-56.59 132.06-88.99Q394.27-896 480.06-896q86.15 0 162.17 32.39 76.02 32.4 132.4 89Q831-718 863.5-641.96 896-565.92 896-479.72q0 86.19-32.39 161.29-32.4 75.11-88.99 131.51Q718.03-130.53 642-97.26 565.98-64 479.81-64Zm.69-73q142.01 0 242.26-100.74Q823-338.49 823-480.5T722.94-722.76Q622.89-823 480-823q-141.51 0-242.26 100.06Q137-622.89 137-480q0 141.51 100.74 242.26Q338.49-137 480.5-137Zm-.5-343Z"],["title","View Text",1,"icon-link"],["title","View Text",1,"icon-link",3,"click"],["d","M321-250h318v-69H321v69Zm0-169h319v-68H321v68ZM229-59q-35.78 0-63.39-26.91Q138-112.83 138-150v-660q0-37.59 27.61-64.79Q193.22-902 229-902h364l230 228v524q0 37.17-27.91 64.09Q767.19-59 731-59H229Zm316-569v-182H229v660h502v-478H545ZM229-810v182-182 660-660Z"],[1,"text-dialog",3,"click"],[1,"text-content"],[1,"info-container",3,"click"],["open",""],[1,"info-content"],[1,"video-info"]],template:function(r,c){if(r&1){let s=S();i(0,"div",9)(1,"div",10)(2,"h3",11),d(3,"Files"),o(),p(4,nt,3,2,"i",12)(5,ot,2,0,"small",13),o(),p(6,st,3,1),o(),W(7,vt,14,10,"ng-template",null,0,we),i(9,"dialog",14,1),u("click",function(){return C(s),f(c.closeOptionsDialog())}),i(11,"div",15,2),u("click",function(T){return C(s),f(T.stopPropagation())}),i(13,"h2"),d(14,"Options"),o(),i(15,"i",16),u("click",function(){return C(s),f(c.closeOptionsDialog())}),w(),i(16,"svg",17),g(17,"path",18),o()(),I(),i(18,"div",19),p(19,ht,12,0)(20,Mt,1,1),i(21,"div",20),u("click",function(){return C(s),f(c.openRenameDialog())}),i(22,"span"),w(),i(23,"svg",17),g(24,"path",21),o()(),I(),i(25,"span"),d(26,"Rename"),o()(),i(27,"div",22),u("click",function(){return C(s),f(c.openDeleteFileDialog())}),i(28,"span"),w(),i(29,"svg",17),g(30,"path",23),o()(),I(),i(31,"span"),d(32,"Delete"),o()()()()(),i(33,"dialog",14,3),u("click",function(){return C(s),f(c.closeTextDialog())}),p(35,St,1,0,"app-load-indicator",24)(36,bt,11,1,"div",25),o(),i(37,"dialog",14,4),u("click",function(){return C(s),f(c.closeVideoDialog())}),i(39,"div",14,5),u("click",function(T){return C(s),f(T.stopPropagation())}),o()(),i(41,"dialog",14,6),u("click",function(){return C(s),f(c.closeVideoInfoDialog())}),p(43,yt,1,0,"app-load-indicator",24)(44,Rt,9,1,"div",26),o(),i(45,"dialog",14,7),u("click",function(){return C(s),f(c.closeRenameDialog())}),i(47,"div",27),u("click",function(T){return C(s),f(T.stopPropagation())}),i(48,"h2"),d(49,"Rename"),o(),i(50,"input",28),u("ngModelChange",function(T){return C(s),f(c.selectedFileName.set(T))}),o(),i(51,"div",29)(52,"button",30),u("click",function(){return C(s),f(c.renameFile())}),d(53,"Rename"),o(),i(54,"button",31),u("click",function(){return C(s),f(c.closeRenameDialog())}),d(55,"Cancel"),o()()()(),i(56,"dialog",32,8),u("click",function(){return C(s),f(c.closeDeleteFileDialog())}),i(58,"div",33),u("click",function(T){return C(s),f(T.stopPropagation())}),i(59,"h3"),d(60,"Confirm Delete"),o(),i(61,"code"),d(62),o(),i(63,"p"),d(64,"Are you sure you want to delete this file?"),o(),i(65,"div",29)(66,"button",34),u("click",function(){return C(s),f(c.deleteFile())}),d(67,"Confirm"),o(),i(68,"button",31),u("click",function(){return C(s),f(c.closeDeleteFileDialog())}),d(69,"Cancel"),o()()()()}r&2&&(l(4),_(c.filesOpened()?4:5),l(2),_(c.filesOpened()?6:-1),l(13),_(c.isVideoFile()?19:20),l(16),_(c.textFileLoading()?35:36),l(8),_(c.videoInfoLoading()?43:44),l(7),h("ngModel",c.selectedFileName()),l(12),x(c.selectedFileName()))},dependencies:[Y,te,X,J,ee,G,Se],styles:['[_nghost-%COMP%]{display:contents}.center[_ngcontent-%COMP%]{margin:auto}.text-center[_ngcontent-%COMP%]{text-align:center}.title-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;gap:.5rem}.files-title[_ngcontent-%COMP%]{margin:0;margin-block:0}.files-open[_ngcontent-%COMP%]{flex:1;cursor:pointer;padding:.75rem}.icononly-button[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem}.refresh-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.loading[_ngcontent-%COMP%]{cursor:progress;animation:spin-animation 2s linear infinite}.media-files-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin:1rem}.media-files-container[_ngcontent-%COMP%]   .media-files[_ngcontent-%COMP%]{width:100%;display:block;border:1px solid var(--color-outline);border-radius:4px;background-color:var(--color-surface-container-high);color:var(--color-on-surface-variant);overflow-y:auto}.files-header[_ngcontent-%COMP%]{grid-row:1;display:grid;grid-template-columns:auto 6fr 1fr 2fr;gap:.5rem;align-items:center;text-align:center;padding:1rem;border:none;outline:none;transition:.4s;border-top:1px solid var(--color-outline);position:relative;font-size:.75rem}@media (max-width: 765px){.files-header[_ngcontent-%COMP%]{grid-template-columns:auto auto auto;grid-template-rows:1fr auto}}.files-header[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:50%;left:-1rem;width:1rem;height:1px;background-color:var(--color-outline)}.files-accordion[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-rows:1fr auto;border-left:1px solid var(--color-outline);position:relative}.files-accordion[_ngcontent-%COMP%]   .parent[_ngcontent-%COMP%]{cursor:pointer}.files-accordion[_ngcontent-%COMP%]   .child[_ngcontent-%COMP%]{grid-row:2;padding:0 0 0 1rem;position:relative;cursor:pointer}.child[_ngcontent-%COMP%]   .files-accordion[_ngcontent-%COMP%]:last-child{border-bottom:1px solid var(--color-outline);margin-bottom:1rem}.files-header[_ngcontent-%COMP%]   .files-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}@media (max-width: 765px){.files-header[_ngcontent-%COMP%]   .files-icon[_ngcontent-%COMP%]{grid-row:1/span 2;grid-column:1;justify-self:center}}.files-header[_ngcontent-%COMP%]   .files-name[_ngcontent-%COMP%]{font-size:1rem;text-align:left;display:flex;align-items:center;gap:.25rem}@media (max-width: 765px){.files-header[_ngcontent-%COMP%]   .files-name[_ngcontent-%COMP%]{grid-row:1;grid-column:2/span 2;justify-self:start}}.files-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:var(--color-on-surface)}@media (max-width: 765px){.files-header[_ngcontent-%COMP%]   .files-size[_ngcontent-%COMP%]{grid-row:2;grid-column:2;justify-self:start;margin-left:.25rem}.files-header[_ngcontent-%COMP%]   .files-modified[_ngcontent-%COMP%]{grid-row:2;grid-column:3;justify-self:end}}dialog[_ngcontent-%COMP%]   app-load-indicator[_ngcontent-%COMP%]{margin:4rem}.dialog-content[_ngcontent-%COMP%]{margin:1rem;position:relative}.dialog-header[_ngcontent-%COMP%]{position:relative}.dialog-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;cursor:pointer;border-radius:50%}.dialog-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:2rem;width:2rem;fill:var(--color-on-surface);padding:0}.dialog-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem}.icon-link[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none;transition:all .4s;cursor:pointer;padding:1rem 3rem 1rem 0;border-bottom:1px solid var(--color-outline);font-size:1.25rem}.icon-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:1.5rem}.icon-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:var(--color-on-surface);padding:0;margin:0 .5rem}.danger-option[_ngcontent-%COMP%]{color:var(--color-error)}.danger-option[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--color-error)}.rename-dialog[_ngcontent-%COMP%], .delete-dialog[_ngcontent-%COMP%], .text-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1.5rem;margin:1.5rem;max-width:75vw;max-height:75vh}@media (width < 765px){.rename-dialog[_ngcontent-%COMP%], .delete-dialog[_ngcontent-%COMP%], .text-dialog[_ngcontent-%COMP%]{max-width:90vw;margin:1rem}}.delete-dialog[_ngcontent-%COMP%]{background-color:var(--color-on-error-container);color:var(--color-on-error);padding:0 1rem 1rem;margin:0;gap:1rem}#deleteFileDialog[_ngcontent-%COMP%]::backdrop{background-image:linear-gradient(0deg,gray,#690005)}.text-content[_ngcontent-%COMP%]{max-width:75vw;max-height:70vh;overflow-y:auto;border:1px solid var(--color-outline);border-radius:1rem;margin:.25rem}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{padding:1rem;white-space:pre-wrap;word-wrap:break-word;text-align:start;counter-reset:listing;line-height:0;--indent: 2rem;--lineHeight: 2}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{counter-increment:listing;display:block;padding:0 0 0 var(--indent);text-indent:calc(-1 * var(--indent));margin:0;line-height:var(--lineHeight)}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{content:counter(listing) ". ";display:inline-block;width:var(--indent);padding-left:auto;margin-left:auto;text-align:right;color:var(--color-outline)}@media (width < 765px){.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{padding:.5rem;--indentSm: 1.5rem;--lineHeightSm: 1.25}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{padding:0 0 0 var(--indentSm);text-indent:calc(-1 * var(--indentSm));line-height:var(--lineHeightSm)}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{width:var(--indentSm)}}.buttons-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;gap:1rem;width:70%}.rename-input[_ngcontent-%COMP%]{field-sizing:content;min-width:50vw;max-width:75vw;padding:1rem;border:1px solid var(--color-outline);border-radius:1rem;font-size:1.2rem}@media (width < 765px){.rename-input[_ngcontent-%COMP%]{max-width:90vw}}.info-dialog[_ngcontent-%COMP%], .info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin:1.5rem;max-width:75vw;align-items:center;max-height:75vh}@media (width < 765px){.info-dialog[_ngcontent-%COMP%], .info-container[_ngcontent-%COMP%]{max-width:90vw}}.info-container[_ngcontent-%COMP%]{max-height:65vh;overflow-y:auto}section[_ngcontent-%COMP%]{width:100%}.info-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin:1rem .5rem;gap:1rem}@media (width < 765px){.info-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem}}.info-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .info-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;text-align:left;width:30%}@media (width < 765px){.info-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .info-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;font-weight:unset;font-style:italic;font-size:small}}.info-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2){text-decoration:none;text-align:left;margin:0;padding:.25rem}'],changeDetection:0});let e=a;return e})();var Qt=["deleteDialog"],He=(e,a)=>[e,a];function Zt(e,a){e&1&&g(0,"app-load-indicator",2)}function Bt(e,a){if(e&1&&(i(0,"div",13),w(),i(1,"svg",41),g(2,"path",42),o()()),e&2){m(2);let n=M(0);l(),L("view-transition-name: media-"+n.id+"-logo")}}function Ht(e,a){e&1&&(i(0,"div",43),w(),i(1,"svg",45),g(2,"path",46),o()())}function zt(e,a){if(e&1&&(i(0,"span"),w(),i(1,"svg",48),g(2,"path",49),o()()),e&2){m(4);let n=M(0);l(),L("view-transition-name: media-"+n.id+"-logo")}}function Nt(e,a){if(e&1&&(i(0,"span"),w(),i(1,"svg",50),g(2,"path",51),o()()),e&2){m(4);let n=M(0);l(),L("view-transition-name: media-"+n.id+"-logo")}}function $t(e,a){if(e&1){let n=S();i(0,"div",47),u("click",function(){C(n);let r=m(3);return f(r.monitorMedia())}),p(1,zt,3,2,"span")(2,Nt,3,2,"span"),o()}if(e&2){m(3);let n=M(0);h("title",n.monitor?"Monitored, click to change":"Not Monitored, click to change"),l(),_(n.monitor?1:2)}}function Gt(e,a){if(e&1&&p(0,Ht,3,0,"div",43)(1,$t,3,2,"div",44),e&2){let n=m(2);_(n.isLoadingMonitor()?0:1)}}function jt(e,a){if(e&1&&(i(0,"div",16),w(),i(1,"svg",52),g(2,"path",53),o()()),e&2){m();let n=M(10),t=m();h("routerLink",ce(2,He,"/"+t.RouteMedia,n.id))("title",n.title)}}function At(e,a){if(e&1&&(i(0,"div",17),w(),i(1,"svg",52),g(2,"path",54),o()()),e&2){m();let n=M(11),t=m();h("routerLink",ce(2,He,"/"+t.RouteMedia,n.id))("title",n.title)}}function Ut(e,a){if(e&1&&(i(0,"a",19),g(1,"img",55),o()),e&2){m(2);let n=M(0);h("href",q("https://www.imdb.com/title/",n.imdb_id,"/"),F)}}function Wt(e,a){if(e&1&&(i(0,"a",56),g(1,"img",58),o()),e&2){m(3);let n=M(0);h("href",q("https://www.themoviedb.org/movie/",n.txdb_id),F)}}function Yt(e,a){if(e&1&&(i(0,"a",57),g(1,"img",59),o()),e&2){m(3);let n=M(0);h("href",q("https://www.thetvdb.com/?tab=series&id=",n.txdb_id),F)}}function Kt(e,a){if(e&1&&p(0,Wt,2,2,"a",56)(1,Yt,2,2,"a",57),e&2){m(2);let n=M(0);_(n.is_movie?0:1)}}function Xt(e,a){if(e&1&&(i(0,"a",60),g(1,"img",62),o()),e&2){let n=m(3);h("href",n.arr_url(),F)}}function Jt(e,a){if(e&1&&(i(0,"a",61),g(1,"img",63),o()),e&2){let n=m(3);h("href",n.arr_url(),F)}}function ei(e,a){if(e&1&&p(0,Xt,2,1,"a",60)(1,Jt,2,1,"a",61),e&2){m(2);let n=M(0);_(n.is_movie?0:1)}}function ti(e,a){if(e&1&&(i(0,"p"),d(1),o()),e&2){m(2);let n=M(0);l(),y("Seasons: ",n.season_count)}}function ii(e,a){if(e&1&&(i(0,"p"),d(1),o()),e&2){m(2);let n=M(0);l(),y("Downloaded: ",n.downloaded_at.toLocaleString())}}function ni(e,a){e&1&&(i(0,"p"),d(1,"Downloaded: Never"),o())}function oi(e,a){if(e&1){let n=S();i(0,"span",64),u("click",function(){C(n);let r=m(2);return f(r.openProfileSelectDialog(!0))}),w(),i(1,"svg",52),g(2,"path",65),o()()}}function ai(e,a){e&1&&(i(0,"span",35),w(),i(1,"svg",66)(2,"circle",67),g(3,"animate",68),o(),i(4,"circle",69),g(5,"animate",70),o(),i(6,"circle",71),g(7,"animate",72),o()()())}function li(e,a){if(e&1){let n=S();i(0,"button",73),u("click",function(){C(n);let r=m(2);return f(r.saveYtId())}),w(),i(1,"svg",52),g(2,"path",74),o()()}}function ri(e,a){e&1&&(i(0,"p",37),d(1,"Click Download to download trailer from updated link!"),o())}function di(e,a){if(e&1){let n=S();i(0,"button",75),u("click",function(){C(n);let r=m(2);return f(r.openTrailer())}),d(1,"Watch"),o()}}function ci(e,a){e&1&&(i(0,"span",77),w(),i(1,"svg",45),g(2,"path",46),o()())}function si(e,a){if(e&1){let n=S();i(0,"button",76),u("click",function(){C(n);let r=m(2);return f(r.openProfileSelectDialog(!1))}),i(1,"span"),d(2,"Download "),o(),p(3,ci,3,0,"span",77),o()}if(e&2){let n=m(2),t=M(0);h("disabled",n.isLoadingDownload()||t.status=="downloading"),l(3),_(n.isLoadingDownload()||t.status=="downloading"?3:-1)}}function mi(e,a){if(e&1){let n=S();i(0,"button",78),u("click",function(){C(n);let r=m(2);return f(r.showDeleteDialog())}),d(1,"Delete"),o()}}function pi(e,a){if(e&1){let n=S();i(0,"div",3),g(1,"div",8),i(2,"div",9),g(3,"img",10),o(),i(4,"div",11)(5,"div",12),p(6,Bt,3,2,"div",13)(7,Gt,2,1),i(8,"span",14),d(9),o(),A(10)(11),i(12,"div",15),p(13,jt,3,5,"div",16),p(14,At,3,5,"div",17),o()(),i(15,"div",12)(16,"span",18),d(17),o(),i(18,"span",18),V(19,"durationConvert"),d(20),V(21,"durationConvert"),o()(),i(22,"div",12),p(23,Ut,2,2,"a",19),p(24,Kt,2,1),p(25,ei,2,1),o(),i(26,"div",20)(27,"span")(28,"div",21)(29,"span",22),d(30,"Path"),o(),i(31,"span",23)(32,"code"),d(33),o()()()(),i(34,"span")(35,"div",24)(36,"span",22),d(37,"Status"),o(),i(38,"span",25),d(39),V(40,"titlecase"),i(41,"span",26),p(42,ti,2,1,"p"),i(43,"p"),d(44),o(),i(45,"p"),d(46),o(),i(47,"p"),d(48),o(),i(49,"p"),d(50),o(),p(51,ii,2,1,"p")(52,ni,2,0,"p"),o()()()()(),i(53,"div",12)(54,"div",27)(55,"span",22),d(56,"Overview"),o(),i(57,"span",28),d(58),o()()(),i(59,"div",12)(60,"div",24)(61,"span",22),d(62,"Trailer"),o(),i(63,"div",29)(64,"div",30)(65,"span",31),d(66,"https://www.youtube.com/watch?v="),o(),i(67,"span",32),d(68,"Youtube ID/URL:"),o(),i(69,"input",33),ve("ngModelChange",function(r){C(n);let c=m();return xe(c.trailer_url,r)||(c.trailer_url=r),f(r)}),o()(),p(70,oi,3,0,"span",34),p(71,ai,8,0,"span",35),p(72,li,3,0,"button",36),o(),p(73,ri,2,0,"p",37),o()(),i(74,"div",12),p(75,di,2,0,"button",38),p(76,si,4,2,"button",39),p(77,mi,2,0,"button",40),o()()()}if(e&2){let n=m(),t=M(0);l(),L("background-image: url("+t.fanart_path+");"),l(),j("sm-none",!t.poster_path),h("title",q("",t.title," Poster")),l(),L("view-transition-name: media-"+t.id+"-image"),h("src",re(t.poster_path||"assets/poster-lg.png"),F)("alt",re(t.title)),l(3),_(t.trailer_exists?6:7),l(2),L("view-transition-name: media-"+t.id+"-title"),h("textToCopy",t.title)("title",t.title),l(),y(" ",t.title," "),l();let r=B(n.previousMedia());l();let c=B(n.nextMedia());l(2),_(r?13:-1),l(),_(c?14:-1),l(2),h("title",t.year),l(),x(t.year),l(),h("title",H(19,48,t.runtime)),l(2),x(H(21,50,t.runtime)),l(3),_(t.imdb_id?23:-1),l(),_(t.txdb_id?24:-1),l(),_(n.arr_url()?25:-1),l(3),h("title",t.folder_path),l(3),h("textToCopy",t.folder_path),l(2),x(t.folder_path),l(6),y("",H(40,52,t.status)," "),l(3),_(t.is_movie?-1:42),l(2),y("Monitored: ",t.monitor),l(2),y("Downloaded: ",t.trailer_exists),l(2),y("Added: ",t.added_at.toLocaleString()),l(2),y("Updated: ",t.updated_at.toLocaleString()),l(),_(t.downloaded_at&&t.downloaded_at.toString()!="Invalid Date"?51:52),l(7),x(t.overview),l(11),fe("ngModel",n.trailer_url),l(),_(t.youtube_trailer_id==""&&n.trailer_url==""&&!n.isLoadingDownload()?70:-1),l(),_(n.isLoadingDownload()?71:-1),l(),_(n.trailer_url!=t.youtube_trailer_id&&!n.isLoadingDownload()?72:-1),l(),_(n.trailer_url!=t.youtube_trailer_id?73:-1),l(2),_(t.youtube_trailer_id?75:-1),l(),_(!t.trailer_exists||t.youtube_trailer_id!=n.trailer_url?76:-1),l(),_(t.trailer_exists?77:-1)}}function _i(e,a){if(e&1&&(i(0,"div",1),g(1,"app-media-downloads",79),o(),i(2,"div",1),g(3,"media-files",79),o()),e&2){let n=m();l(),h("mediaId",n.mediaId()),l(2),h("mediaId",n.mediaId())}}var ze=(()=>{let a=class a{constructor(){this.mediaService=b($),this.connectionService=b(Ie),this.webSocketService=b(N),this.viewContainerRef=b(_e),this.router=b(ye),this.RouteMedia=K,this.mediaId=z(0,{transform:Number}),this.selectedMedia=this.mediaService.selectedMedia,this.previousMedia=this.mediaService.previousMedia,this.nextMedia=this.mediaService.nextMedia,this.isLoading=D(()=>this.mediaService.mediaResource.isLoading()),this.isLoadingMonitor=P(!1),this.isLoadingDownload=P(!1),this.trailer_url="",this.arr_url=D(()=>{let t=this.selectedMedia();if(!t)return"";let c=this.connectionService.connectionsResource.value().find(s=>s.id==t.connection_id);return c?c.arr_type.toLowerCase()=="radarr"?c.url+"/movie/"+t.txdb_id:c.url+"/series/"+t.title_slug:""}),this.mediaIDChangeEffect=U(()=>{this.mediaService.selectedMediaID.set(this.mediaId())}),this.mediaDataChangeEffect=U(()=>{let t=this.selectedMedia();t&&(this.trailer_url=t.youtube_trailer_id||"",t.status!=="downloading"&&this.isLoadingDownload.set(!1))})}handleKeyboardEvent(t){let r=document.activeElement;if(!(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.isContentEditable)&&t.type==="keydown"&&this.mediaId())if(t.key==="ArrowRight"||t.key.toLowerCase()==="n"){let s=this.nextMedia();s&&this.router.navigate([K,s.id])}else if(t.key==="ArrowLeft"||t.key.toLowerCase()==="p"){let s=this.previousMedia();s&&this.router.navigate([K,s.id])}else(t.key==="Delete"||t.key==="Backspace")&&this.showDeleteDialog()}openProfileSelectDialog(t){let r=this.viewContainerRef.createComponent(Fe);r.instance.onSubmit.subscribe(c=>{t?this.searchTrailer(c):this.downloadTrailer(c),setTimeout(()=>{r.destroy()},3e3)}),r.instance.onClosed.subscribe(()=>{setTimeout(()=>{r.destroy()},3e3)})}downloadTrailer(t){let r=this.selectedMedia()?.youtube_trailer_id?.toLowerCase()||"",c=this.trailer_url.toLowerCase(),s=this.selectedMedia()?.trailer_exists||!1;r&&c.includes(r)&&s||(this.isLoadingDownload.set(!0),this.mediaService.downloadMediaTrailer(this.mediaId(),t,this.trailer_url).subscribe(v=>{console.log(v)}))}monitorMedia(){this.isLoadingMonitor.set(!0);let t=!this.selectedMedia()?.monitor;this.mediaService.monitorMedia(this.mediaId(),t).subscribe(r=>{console.log(r),this.selectedMedia().monitor=t,this.isLoadingMonitor.set(!1)})}searchTrailer(t){this.webSocketService.showToast("Searching for trailer..."),this.isLoadingDownload.set(!0),this.mediaService.searchMediaTrailer(this.mediaId(),t).pipe(ne(r=>(console.error("Error searching trailer:",r.error.detail),this.webSocketService.showToast(r.error.detail,"Error"),this.isLoadingDownload.set(!1),ie("")))).subscribe(()=>{this.isLoadingDownload.set(!1)})}saveYtId(){this.webSocketService.showToast("Saving youtube id..."),this.isLoadingDownload.set(!0),this.mediaService.saveMediaTrailer(this.mediaId(),this.trailer_url).pipe(ne(t=>(console.error("Error searching trailer:",t.error.detail),this.webSocketService.showToast(t.error.detail,"Error"),this.isLoadingDownload.set(!1),ie("")))).subscribe(()=>{this.isLoadingDownload.set(!1)})}openTrailer(){this.selectedMedia()?.youtube_trailer_id&&window.open(`https://www.youtube.com/watch?v=${this.selectedMedia()?.youtube_trailer_id}`,"_blank")}showDeleteDialog(){this.deleteDialog.nativeElement.showModal()}closeDeleteDialog(){this.deleteDialog.nativeElement.close()}onConfirmDelete(){this.closeDeleteDialog(),this.mediaService.deleteMediaTrailer(this.mediaId()).subscribe(t=>{console.log(t),this.selectedMedia().trailer_exists=!1})}};a.\u0275fac=function(r){return new(r||a)},a.\u0275cmp=R({type:a,selectors:[["app-media-details"]],viewQuery:function(r,c){if(r&1&&k(Qt,5),r&2){let s;O(s=E())&&(c.deleteDialog=s.first)}},hostBindings:function(r,c){r&1&&u("keydown",function(v){return c.handleKeyboardEvent(v)},pe)},inputs:{mediaId:[1,"mediaId"]},decls:18,vars:4,consts:[["deleteDialog",""],[1,"media-details-container"],[1,"center"],[1,"media-details-card"],[3,"click"],[1,"dialog-content",3,"click"],["tabindex","2",1,"danger",3,"click"],["tabindex","1",1,"secondary",3,"click"],[1,"media-fanart-overlay"],[1,"media-poster",3,"title"],[3,"src","alt"],[1,"media-details-col"],[1,"media-details-row"],["title","Trailer Downloaded",1,"icon-link"],["appCopyToClipboard","",1,"text-lg","title-text",3,"textToCopy","title"],[1,"nav-icons"],[1,"icon-link","left",3,"routerLink","title"],[1,"icon-link","right",3,"routerLink","title"],[1,"text-md",3,"title"],["target","_blank","title","IMDB Link",3,"href"],[1,"media-details-row","extras"],[1,"labeled-text",3,"title"],[1,"label"],["appCopyToClipboard","",1,"text-sm",3,"textToCopy"],[1,"labeled-text"],[1,"text-sm","tooltip"],[1,"tooltiptext"],["title","Overview",1,"labeled-text"],[1,"text-sm"],[1,"input-row"],[1,"labeled-input"],[1,"text-md","sm-none"],[1,"text-md","sm-show"],["id","youtube_trailer_id","type","text","placeholder","Youtube Video ID / URL",3,"ngModelChange","ngModel"],["title","Search Trailer",1,"search-button","icon-link"],["title","Searching for Trailer",1,"loading-search","icon-link"],["id","update_trailer_search_query","tabindex","24",1,"primary","icononly-button","save-button","success"],[1,"text-sm","info-text"],["title","Watch Trailer on Youtube",1,"primary"],["title","Download Trailer",1,"primary",3,"disabled"],["title","Delete Trailer",1,"danger"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Trailer Exists",1,"downloaded-icon","success"],["d","M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q65 0 123 19t107 53l-58 59q-38-24-81-37.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160q133 0 226.5-93.5T800-480q0-18-2-36t-6-35l65-65q11 32 17 66t6 70q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm-56-216L254-466l56-56 114 114 400-401 56 56-456 457Z"],["title","Updating Monitor Status",1,"icon-link"],[1,"icon-link",3,"title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"loading"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],[1,"icon-link",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Monitored",1,"monitored-icon"],["d","M713-600 600-713l56-57 57 57 141-142 57 57-198 198ZM200-120v-640q0-33 23.5-56.5T280-840h280q-20 30-30 57.5T520-720q0 72 45.5 127T680-524q23 3 40 3t40-3v404L480-240 200-120Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Not Monitored",1,"not-monitored-icon"],["d","M200-120v-640q0-33 23.5-56.5T280-840h240v80H280v518l200-86 200 86v-278h80v400L480-240 200-120Zm80-640h240-240Zm400 160v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","m287-446.67 240 240L480-160 160-480l320-320 47 46.67-240 240h513v66.66H287Z"],["d","M673-446.67H160v-66.66h513l-240-240L480-800l320 320-320 320-47-46.67 240-240Z"],["src","assets/IMDBlogo.png","alt","IMDB",1,"xdb-icon"],["target","_blank","title","TMDB Link",3,"href"],["target","_blank","title","TVDB Link",3,"href"],["src","assets/TMDBlogo.png","alt","TMDB",1,"xdb-icon"],["src","assets/TVDBlogo.png","alt","TVDB",1,"xdb-icon"],["target","_blank","title","Radarr Movie Link",3,"href"],["target","_blank","title","Sonarr Movie Link",3,"href"],["src","assets/radarr_128.png","alt","Radarr",1,"arr-icon"],["src","assets/sonarr_128.png","alt","TVDB",1,"arr-icon"],["title","Search Trailer",1,"search-button","icon-link",3,"click"],["d","M801-108 537-372q-31 26-72.96 40-41.96 14-86.6 14-114.6 0-192.52-78Q107-474 107-586t78-190q78-78 190-78t190 78q78 78 78 190.15 0 43.85-13.5 84.35Q616-461 588-425l266 264-53 53ZM375.5-391q81.75 0 138.13-56.79Q570-504.58 570-586q0-81.42-56.29-138.21Q457.43-781 375.59-781q-82.67 0-139.13 56.79Q180-667.42 180-586q0 81.42 56.46 138.21Q292.92-391 375.5-391Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 200 200"],["stroke-width","14","r","15","cx","40","cy","65"],["attributeName","cy","calcMode","spline","dur","2","values","65;135;65;","keySplines",".5 0 .5 1;.5 0 .5 1","repeatCount","indefinite","begin","-.4"],["stroke-width","14","r","15","cx","100","cy","65"],["attributeName","cy","calcMode","spline","dur","2","values","65;135;65;","keySplines",".5 0 .5 1;.5 0 .5 1","repeatCount","indefinite","begin","-.2"],["stroke-width","14","r","15","cx","160","cy","65"],["attributeName","cy","calcMode","spline","dur","2","values","65;135;65;","keySplines",".5 0 .5 1;.5 0 .5 1","repeatCount","indefinite","begin","0"],["id","update_trailer_search_query","tabindex","24",1,"primary","icononly-button","save-button","success",3,"click"],["d","M378-246 154-470l43-43 181 181 384-384 43 43-427 427Z"],["title","Watch Trailer on Youtube",1,"primary",3,"click"],["title","Download Trailer",1,"primary",3,"click","disabled"],[1,"loading-icon"],["title","Delete Trailer",1,"danger",3,"click"],[3,"mediaId"]],template:function(r,c){if(r&1){let s=S();A(0),i(1,"div",1),p(2,Zt,1,0,"app-load-indicator",2),p(3,pi,78,54,"div",3),o(),p(4,_i,4,2),i(5,"dialog",4,0),u("click",function(){return C(s),f(c.closeDeleteDialog())}),i(7,"div",5),u("click",function(T){return C(s),f(T.stopPropagation())}),i(8,"h2"),d(9,"Delete Trailer"),o(),i(10,"p"),d(11,"This will Delete the trailer file on disk for this Media"),o(),i(12,"p"),d(13,"Are you sure?"),o(),i(14,"button",6),u("click",function(){return C(s),f(c.onConfirmDelete())}),d(15,"Delete"),o(),i(16,"button",7),u("click",function(){return C(s),f(c.closeDeleteDialog())}),d(17,"Cancel"),o()()()}if(r&2){let s=B(c.selectedMedia());l(2),_(c.isLoading()?2:-1),l(),_(s?3:-1),l(),_(s?4:-1)}},dependencies:[Ve,Le,Be,te,X,J,ee,G,De,Te,Qe],styles:[".media-details-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto;margin:1rem;border:1px solid var(--color-outline);border-radius:10px;position:relative}@media (width < 768px){.media-details-container[_ngcontent-%COMP%]{margin:.5rem}}.text-center[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);margin:auto}.media-details-card[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-columns:1fr 3fr;padding:2rem;gap:2rem}.media-fanart-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:0;height:100%;background-size:cover;background-position:center;opacity:.4;border-radius:10px}.media-poster[_ngcontent-%COMP%]{z-index:2;display:flex;width:100%}.media-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:300px;height:auto;object-fit:contain;margin-bottom:auto;view-transition-class:mediaimage}.media-details-col[_ngcontent-%COMP%]{z-index:2;flex:1;display:flex;flex-direction:column}.media-details-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:.3rem;gap:.75rem}.media-details-row[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{font-size:2.5rem;display:inline-block;overflow:hidden;max-width:70%;view-transition-class:mediatitle}.icon-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-decoration:none;transition:all .4s;cursor:pointer}.icon-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;fill:var(--color-primary)}.nav-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem;margin-left:auto;margin-right:1rem;align-items:flex-start}.nav-icons[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{background-color:var(--color-primary);fill:var(--color-on-primary);width:40px;height:40px;border-radius:50%}@media (width < 765px){.nav-icons[_ngcontent-%COMP%]{position:relative}.nav-icons[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{position:fixed;bottom:10vh;z-index:10;left:2rem}.nav-icons[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{position:fixed;bottom:10vh;z-index:10;right:2rem}}.icon-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{fill:var(--color-success)}.xdb-icon[_ngcontent-%COMP%]{width:60px;cursor:pointer;border-radius:4px}.arr-icon[_ngcontent-%COMP%]{height:30px;width:30px;cursor:pointer}.extras[_ngcontent-%COMP%]{flex-wrap:wrap}.labeled-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.labeled-text[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;opacity:.7;margin-bottom:.1rem}.labeled-input[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap!important;align-items:stretch;width:100%;border:1px solid var(--color-outline);border-radius:6px}.labeled-input[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;align-items:center;padding:.75rem;font-size:1rem;font-weight:400;color:var(--color-on-surface-variant);text-align:center;white-space:nowrap;background-color:var(--color-surface-container-high);border-right:1px solid var(--color-outline);border-top-left-radius:6px;border-bottom-left-radius:6px}.labeled-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1 1 auto;width:1%;min-width:100px;display:block;padding:.75rem;font-size:1rem;font-weight:400;color:var(--color-on-surface);border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--color-surface-container);border-top-right-radius:6px;border-bottom-right-radius:6px}.input-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem}.loading-search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:var(--color-primary);stroke:var(--color-primary)}.save-button[_ngcontent-%COMP%]{height:40px;width:40px}.info-text[_ngcontent-%COMP%]{margin:.5rem;padding:.5rem;border-radius:.5rem;background-color:var(--color-info);color:var(--color-info-text);text-align:center}.loading-icon[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center}.loading-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}.loading[_ngcontent-%COMP%]{animation:spin-animation 2s linear infinite}.dialog-content[_ngcontent-%COMP%]{background-color:var(--color-on-error-container);color:var(--color-on-error);padding:1rem;text-align:center}dialog[_ngcontent-%COMP%]::backdrop{background-image:linear-gradient(0deg,gray,#690005)}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}@media (max-width: 765px){.media-details-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0;padding-top:2rem;gap:1rem}.media-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:30vh;margin:0 auto}.media-details-col[_ngcontent-%COMP%]{align-items:center;margin:1rem;margin-top:0}.media-details-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:.3rem;gap:.75rem}.media-details-row[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{max-width:90%}}"]});let e=a;return e})();var rn=[{path:"",loadComponent:()=>ze}];export{rn as default};
