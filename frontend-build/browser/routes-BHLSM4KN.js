import{a as he}from"./chunk-MWDCIHTV.js";import{f as k}from"./chunk-NBYXXKOZ.js";import{a as pe}from"./chunk-WOA3RAU4.js";import"./chunk-2XBANTUS.js";import{b as ge}from"./chunk-EVWNYK3S.js";import"./chunk-246NVML4.js";import"./chunk-XUPODHPG.js";import{k as Z}from"./chunk-TDHWVRPW.js";import{f as se,p as G}from"./chunk-ZEQ6WCJQ.js";import{u as ce}from"./chunk-JVTE5FXR.js";import{b as me}from"./chunk-3OXZ5NJK.js";import{$a as P,Ba as z,Ca as D,Da as F,Db as ae,Ea as S,Fa as o,Ga as r,Ha as h,I as u,Ia as p,Ja as f,Ka as T,L as v,La as j,M as _,Ma as x,N as c,Na as g,O as C,Oa as E,Oc as le,Pa as s,Pc as de,T as b,Ta as Y,U as N,Ua as ee,Va as U,Wa as H,Xa as q,Za as m,_ as W,_a as V,ba as d,ga as X,ha as y,ib as te,ka as J,kb as Q,lb as ie,ma as B,nb as L,ob as I,qb as ne,rb as A,ta as $,ua as K,ub as oe,wb as re,ya as w,za as M}from"./chunk-IMRADBSH.js";var ve=(()=>{class t{constructor(){this.mediaService=u(k),this.webSocketService=u(G),this.viewContainerRef=u(X),this.checkedMediaIDs=this.mediaService.checkedMediaIDs,this.filteredSortedMedia=this.mediaService.filteredSortedMedia,this.inEditMode=this.mediaService.inEditMode}selectAll(){this.checkedMediaIDs.set(this.filteredSortedMedia().map(e=>e.id))}clearSelection(){this.checkedMediaIDs.set([])}openProfileSelectDialog(){let e=this.viewContainerRef.createComponent(he);e.instance.onSubmit.subscribe(i=>{this.batchUpdate("download",i),setTimeout(()=>{e.destroy()},3e3)}),e.instance.onClosed.subscribe(()=>{setTimeout(()=>{e.destroy()},3e3)})}batchUpdate(e,i=-1){this.webSocketService.showToast(`Batch update: ${e} ${this.checkedMediaIDs().length} items`),this.mediaService.batchUpdate(this.checkedMediaIDs(),e,i).subscribe(()=>{this.mediaService.mediaResource.reload()}),this.checkedMediaIDs.set([])}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=y({type:t,selectors:[["app-edit-header"]],decls:39,vars:2,consts:[[1,"media-header","edit"],["aria-label","Monitor","title","Monitor",1,"media-header-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Monitor",1,"button-icon"],["d","M713-600 600-713l56-57 57 57 141-142 57 57-198 198ZM200-120v-640q0-33 23.5-56.5T280-840h280q-20 30-30 57.5T520-720q0 72 45.5 127T680-524q23 3 40 3t40-3v404L480-240 200-120Z"],["aria-label","UnMonitor","title","UnMonitor",1,"media-header-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","UnMonitor",1,"button-icon"],["d","M200-120v-640q0-33 23.5-56.5T280-840h240v80H280v518l200-86 200 86v-278h80v400L480-240 200-120Zm80-640h240-240Zm400 160v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80Z"],["aria-label","Download","title","Download",1,"media-header-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Download",1,"button-icon"],["d","M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"],["aria-label","Delete","title","Delete",1,"media-header-button","delete",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Delete",1,"button-icon"],["d","M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"],["aria-label","Cancel","title","Cancel",1,"media-header-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Cancel",1,"button-icon"],["d","M819-28 407-440H160v280h480v-161l80 80v81q0 33-23.5 56.5T640-80H160q-33 0-56.5-23.5T80-160v-360q0-33 23.5-56.5T160-600h80v-7L27-820l57-57L876-85l-57 57Zm-99-327-80-80-165-165h165q33 0 56.5 23.5T720-520v80h80v-280H355L246-829q8-23 28.5-37t45.5-14h480q33 0 56.5 23.5T880-800v360q0 33-23.5 56.5T800-360h-80v5Z"],[1,"empty-space"],[1,"count"],["aria-label","Select All","title","Select All",1,"media-header-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Clear",1,"button-icon"],["d","M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q8 0 15 1.5t14 4.5l-74 74H200v560h560v-266l80-80v346q0 33-23.5 56.5T760-120H200Zm261-160L235-506l56-56 170 170 367-367 57 55-424 424Z"],["aria-label","Clear","title","Clear",1,"media-header-button",3,"click"],["d","m500-120-56-56 142-142-142-142 56-56 142 142 142-142 56 56-142 142 142 142-56 56-142-142-142 142Zm-220 0v-80h80v80h-80Zm-80-640h-80q0-33 23.5-56.5T200-840v80Zm80 0v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80q33 0 56.5 23.5T840-760h-80ZM200-200v80q-33 0-56.5-23.5T120-200h80Zm-80-80v-80h80v80h-80Zm0-160v-80h80v80h-80Zm0-160v-80h80v80h-80Zm640 0v-80h80v80h-80Z"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1),E("click",function(){return n.batchUpdate("monitor")}),c(),p(2,"svg",2),T(3,"path",3),f(),C(),p(4,"span"),m(5,"Monitor"),f()(),p(6,"div",4),E("click",function(){return n.batchUpdate("unmonitor")}),c(),p(7,"svg",5),T(8,"path",6),f(),C(),p(9,"span"),m(10,"UnMonitor"),f()(),p(11,"div",7),E("click",function(){return n.openProfileSelectDialog()}),c(),p(12,"svg",8),T(13,"path",9),f(),C(),p(14,"span"),m(15,"Download"),f()(),p(16,"div",10),E("click",function(){return n.batchUpdate("delete")}),c(),p(17,"svg",11),T(18,"path",12),f(),C(),p(19,"span"),m(20,"Delete"),f()(),p(21,"div",13),E("click",function(){return n.inEditMode.set(!1)}),c(),p(22,"svg",14),T(23,"path",15),f(),C(),p(24,"span"),m(25,"Cancel"),f()(),T(26,"div",16),p(27,"p",17)(28,"span"),m(29,"Selected: "),f(),m(30),p(31,"span"),m(32),f()(),p(33,"div",18),E("click",function(){return n.selectAll()}),c(),p(34,"svg",19),T(35,"path",20),f()(),C(),p(36,"div",21),E("click",function(){return n.clearSelection()}),c(),p(37,"svg",19),T(38,"path",22),f()()()),i&2&&(d(30),P(" ",n.checkedMediaIDs().length," "),d(2),P(" / ",n.filteredSortedMedia().length))},styles:[".media-header[_ngcontent-%COMP%]{display:flex;position:sticky;top:76px;width:100%;justify-content:flex-end;background-color:var(--color-surface-container-low);color:var(--color-on-surface);align-items:center;padding:0 1rem;z-index:99;view-transition-name:mediaheader}@media(width<765px){.media-header[_ngcontent-%COMP%]{position:fixed;inset:auto 0 76px}}.media-header[_ngcontent-%COMP%]   .empty-space[_ngcontent-%COMP%]{flex:1;margin:auto}.edit[_ngcontent-%COMP%]{justify-content:flex-start;gap:1rem}@media(width<765px){.edit[_ngcontent-%COMP%]{gap:.5rem}}.edit[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-weight:700;color:var(--color-primary)}@media(width<765px){.edit[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.media-header-button[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;cursor:pointer;padding:.75rem 0}.media-header-button[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{width:2.25rem;height:2.25rem;font-size:0;margin:0;padding:.25rem;fill:var(--color-on-surface)}@media(width<765px){.media-header-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.media-header-button[_ngcontent-%COMP%]:hover:not(.delete){color:var(--color-primary)}.media-header-button[_ngcontent-%COMP%]:hover:not(.delete)   svg[_ngcontent-%COMP%]{fill:var(--color-primary)!important}.media-header-button[_ngcontent-%COMP%]:hover{background-color:var(--color-surface-container-highest)}.delete[_ngcontent-%COMP%]{color:var(--color-error)}.delete[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--color-error)!important}"],changeDetection:0})}}return t})();var _e=(()=>{class t{transform(e){return e=e.replace("_at",""),e.charAt(0).toUpperCase()+e.slice(1)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=J({name:"displayTitle",type:t,pure:!0})}}return t})();var Se=["showFiltersDialog"],xe=(t,a)=>a.filter_name;function Oe(t,a){if(t&1){let e=x();o(0,"div",4)(1,"span",9),g("click",function(){let n=v(e).$implicit,l=s();return _(l.openFilterEditDialog(n))}),m(2),r(),c(),o(3,"svg",10),g("click",function(){let n=v(e).$implicit,l=s();return _(l.deleteFilter(n.id))}),h(4,"path",11),r()()}if(t&2){let e=a.$implicit;d(2),P(" ",e.filter_name," ")}}function Te(t,a){if(t&1){let e=x();o(0,"edit-filter-dialog",12),g("dialogClosed",function(){v(e);let n=s();return _(n.onEditDialogClosed())}),r()}if(t&2){let e=s();S("filterType",e.filterType())("customFilter",e.filterToEdit())}}var ue=(()=>{class t{constructor(){this.customfilterService=u(Z),this.mediaService=u(k),this.viewCustomFilters=this.customfilterService.viewFilters,this.moviesOnly=this.mediaService.moviesOnly,this.editFilterDialogOpen=b(!1),this.filterToEdit=b(null),this.filterType=A(()=>this.moviesOnly()==null?"HOME":this.moviesOnly()?"MOVIES":"SERIES"),this.closed=oe(),this.dialog=re.required("showFiltersDialog")}ngAfterViewInit(){this.openDialog()}openDialog(){this.viewCustomFilters().length===0?this.openFilterEditDialog(null):(this.editFilterDialogOpen.set(!1),this.dialog().nativeElement.showModal())}deleteFilter(e){this.customfilterService.delete(e).subscribe(()=>{this.customfilterService.reloadFilters()})}closeDialog(e){this.dialog().nativeElement.close(),e&&setTimeout(()=>{this.closed.emit()},500)}openFilterEditDialog(e){this.closeDialog(!1),this.filterToEdit.set(e),this.editFilterDialogOpen.set(!0)}onEditDialogClosed(){this.editFilterDialogOpen.set(!1),this.customfilterService.reloadFilters(),setTimeout(()=>{this.closed.emit()},500)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=y({type:t,selectors:[["show-filters-dialog"]],viewQuery:function(i,n){i&1&&Y(n.dialog,Se,5),i&2&&ee()},outputs:{closed:"closed"},decls:13,vars:1,consts:[["showFiltersDialog",""],[3,"click"],[1,"dialog-content",3,"click"],[1,"dialog-title"],[1,"customfilter-option"],[1,"buttons-row"],[1,"primary",3,"click"],[1,"danger",3,"click"],[3,"filterType","customFilter"],["title","Edit Custom Filter",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Delete Custom Filter","title","Delete Custom Filter",1,"icon","delete-icon",3,"click"],["d","M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"],[3,"dialogClosed","filterType","customFilter"]],template:function(i,n){if(i&1){let l=x();o(0,"dialog",1,0),g("click",function(){return v(l),_(n.closeDialog(!0))}),o(2,"div",2),g("click",function(Me){return v(l),_(Me.stopPropagation())}),o(3,"div",3),m(4,"Custom Filters"),r(),D(5,Oe,5,1,"div",4,xe),r(),o(7,"div",5)(8,"button",6),g("click",function(){return v(l),_(n.openFilterEditDialog(null))}),m(9,"Add New"),r(),o(10,"button",7),g("click",function(){return v(l),_(n.closeDialog(!0))}),m(11,"Cancel"),r()()(),w(12,Te,1,2,"edit-filter-dialog",8)}i&2&&(d(5),F(n.viewCustomFilters()),d(7),M(n.editFilterDialogOpen()?12:-1))},dependencies:[ge],styles:[".dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1rem;min-width:max(25vw,min(300px,80vw))}.dialog-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-outline)}.dialog-title[_ngcontent-%COMP%]{font-size:larger;font-weight:700;border-bottom:none!important;padding-bottom:.5rem;margin:1rem}.customfilter-option[_ngcontent-%COMP%]{display:flex;cursor:pointer;align-items:center;justify-content:space-between;gap:.5rem;font-weight:400;height:2.75rem;padding:.5rem .25rem .5rem .75rem;background-color:var(--color-surface-container-highest);color:var(--color-on-surface)}.customfilter-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:left;flex:1}.delete-icon[_ngcontent-%COMP%]{fill:var(--color-error);width:2rem;height:2rem}.buttons-row[_ngcontent-%COMP%]{display:block flex;align-items:center;justify-content:space-around;padding:1rem 0}"],changeDetection:0})}}return t})();function be(t,a){t&1&&(c(),o(0,"svg",19),h(1,"path",22),r())}function ye(t,a){t&1&&(c(),o(0,"svg",19),h(1,"path",23),r())}function Ee(t,a){if(t&1&&(o(0,"div"),w(1,be,2,0,":svg:svg",19)(2,ye,2,0,":svg:svg",19),r()),t&2){let e=s(2);d(),M(e.sortAscending()?1:2)}}function Pe(t,a){if(t&1){let e=x();o(0,"button",21),g("click",function(){let n=v(e).$implicit,l=s();return _(l.setMediaSort(n))}),m(1),L(2,"displayTitle"),w(3,Ee,3,1,"div"),r()}if(t&2){let e=a.$implicit,i=s();$("aria-selected",i.selectedSort()==e),S("autofocus",i.selectedSort()==e),d(),P(" ",I(2,4,e)," "),d(2),M(i.selectedSort()==e?3:-1)}}function ke(t,a){t&1&&(o(0,"div"),c(),o(1,"svg",19),h(2,"path",25),r()())}function De(t,a){if(t&1){let e=x();o(0,"button",24),g("click",function(){let n=v(e).$implicit,l=s();return _(l.setMediaFilter(n))}),m(1),L(2,"displayTitle"),w(3,ke,3,0,"div"),r()}if(t&2){let e=a.$implicit,i=s();$("aria-selected",i.selectedFilter()==e),S("autofocus",i.selectedFilter()==e),d(),P(" ",I(2,4,e)," "),d(2),M(i.selectedFilter()==e?3:-1)}}function Fe(t,a){if(t&1){let e=x();o(0,"show-filters-dialog",26),g("closed",function(){v(e);let n=s();return _(n.onShowFiltersDialogClosed())}),r()}}var fe=(()=>{class t{constructor(){this.customfilterService=u(Z),this.mediaService=u(k),this.defaultDisplayCount=this.mediaService.defaultDisplayCount,this.sortOptions=["title","year","added_at","updated_at","downloaded_at"],this.filterOptions=b(["all","downloaded","downloading","missing","monitored","unmonitored"]),this.checkedMediaIDs=this.mediaService.checkedMediaIDs,this.displayCount=this.mediaService.displayCount,this.inEditMode=this.mediaService.inEditMode,this.moviesOnly=this.mediaService.moviesOnly,this.selectedSort=this.mediaService.selectedSort,this.sortAscending=this.mediaService.sortAscending,this.selectedFilter=this.mediaService.selectedFilter,this.customFilters=this.customfilterService.viewFilters,this.allFilters=A(()=>this.filterOptions().concat(this.customFilters().map(e=>e.filter_name))),this.showFiltersDialogOpen=b(!1),this.effect1=N(()=>{let e=this.moviesOnly();e===null&&(this.filterOptions.set(["all","movies","series"]),this.selectedFilter.set("all"),this.selectedSort.set("updated_at"),this.sortAscending.set(!1)),this.retrieveSortNFilterOptions(e)})}retrieveSortNFilterOptions(e){let i=e==null?"AllMedia":e?"Movies":"Series",n=localStorage.getItem(`Trailarr${i}Filter`);n&&this.selectedFilter.set(n);let l=localStorage.getItem(`Trailarr${i}Sort`),O=localStorage.getItem(`Trailarr${i}SortAscending`);l&&this.selectedSort.set(l),O&&this.sortAscending.set(O=="true")}setMediaSort(e){this.checkedMediaIDs.set([]),this.displayCount.set(this.defaultDisplayCount),this.selectedSort()===e?this.sortAscending.set(!this.sortAscending()):(this.selectedSort.set(e),this.sortAscending.set(!0));let i=this.moviesOnly(),n=i==null?"AllMedia":i?"Movies":"Series";localStorage.setItem(`Trailarr${n}Sort`,this.selectedSort()),localStorage.setItem(`Trailarr${n}SortAscending`,this.sortAscending().toString())}setMediaFilter(e){this.checkedMediaIDs.set([]),this.displayCount.set(this.defaultDisplayCount),this.selectedFilter.set(e);let i=this.moviesOnly(),n=i==null?"AllMedia":i?"Movies":"Series";localStorage.setItem(`Trailarr${n}Filter`,this.selectedFilter())}openShowFiltersDialog(){this.showFiltersDialogOpen.set(!0)}onShowFiltersDialogClosed(){this.showFiltersDialogOpen.set(!1)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=y({type:t,selectors:[["app-normal-header"]],decls:36,vars:9,consts:[[1,"media-header"],["title","Refresh",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"refresh-icon"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],["aria-label","Edit","title","Edit",1,"media-header-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"button-icon"],["d","M640-160v-360H160v360h480Zm80-200v-80h80v-360H320v200h-80v-200q0-33 23.5-56.5T320-880h480q33 0 56.5 23.5T880-800v360q0 33-23.5 56.5T800-360h-80ZM160-80q-33 0-56.5-23.5T80-160v-360q0-33 23.5-56.5T160-600h480q33 0 56.5 23.5T720-520v360q0 33-23.5 56.5T640-80H160Zm400-603ZM400-340Z"],[1,"empty-space"],["popovertarget","sortDropdown","aria-label","Sort","title","Sort",1,"media-header-button","dropdown"],["d","M74-159v-135h304v135H74Zm0-255v-134h558v134H74Zm0-254v-135h812v135H74Z"],["popovertarget","filterDropdown","aria-label","Filter","title","Filter",1,"media-header-button","dropdown"],["d","M371-158v-135h219v135H371ZM200-413v-135h558v135H200ZM74-668v-135h812v135H74Z"],["id","sortDropdown","popover","auto",1,"popover"],["role","listbox","aria-label","Sort Options",1,"sortitem-dropdown"],["role","option",1,"sortitem-dropdown-option",3,"aria-selected","autofocus"],["id","filterDropdown","popover","auto",1,"popover"],["role","listbox","aria-label","Filter Options",1,"filteritem-dropdown"],["role","option",1,"filteritem-dropdown-option",3,"aria-selected","autofocus"],["aria-label","CustomFilters","title","Edit",1,"filteritem-dropdown-option",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"icon"],["d","M421-97v-248h83v83h353v83H504v82h-83Zm-318-82v-83h270v83H103Zm187-178v-82H103v-82h187v-84h83v248h-83Zm131-82v-82h436v82H421Zm166-176v-248h83v82h187v83H670v83h-83Zm-484-83v-83h436v83H103Z"],["role","option",1,"sortitem-dropdown-option",3,"click","aria-selected","autofocus"],["d","M480-130 200-410l96-96 184 185 184-185 96 96-280 280Zm0-299L200-708l96-97 184 185 184-185 96 97-280 279Z"],["d","m296-155-96-97 280-279 280 279-96 97-184-185-184 185Zm0-299-96-96 280-280 280 280-96 96-184-185-184 185Z"],["role","option",1,"filteritem-dropdown-option",3,"click","aria-selected","autofocus"],["d","M382-200 113-469l97-97 172 173 369-369 97 96-466 466Z"],[3,"closed"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"button",1),g("click",function(){return n.mediaService.mediaResource.reload()}),c(),o(2,"svg",2),h(3,"path",3),r()(),C(),o(4,"button",4),g("click",function(){return n.inEditMode.set(!0)}),c(),o(5,"svg",5),h(6,"path",6),r(),C(),o(7,"span"),m(8,"Edit"),r()(),h(9,"div",7),o(10,"button",8),c(),o(11,"svg",5),h(12,"path",9),r(),C(),o(13,"span"),m(14),L(15,"displayTitle"),r()(),o(16,"button",10),c(),o(17,"svg",5),h(18,"path",11),r(),C(),o(19,"span"),m(20),L(21,"displayTitle"),r()()(),o(22,"div",12)(23,"div",13),D(24,Pe,4,6,"button",14,z),r()(),o(26,"div",15)(27,"div",16),D(28,De,4,6,"button",17,z),o(30,"button",18),g("click",function(){return n.openShowFiltersDialog()}),o(31,"span"),m(32,"Custom Filters"),r(),c(),o(33,"svg",19),h(34,"path",20),r()()()(),w(35,Fe,1,0,"show-filters-dialog")),i&2&&(d(),H("loading",n.mediaService.mediaResource.isLoading()),d(13),V(I(15,5,n.selectedSort())),d(6),V(I(21,7,n.selectedFilter())),d(4),F(n.sortOptions),d(4),F(n.allFilters()),d(7),M(n.showFiltersDialogOpen()?35:-1))},dependencies:[ue,_e],styles:[".media-header[_ngcontent-%COMP%]{display:flex;position:sticky;top:76px;width:100%;justify-content:flex-end;background-color:var(--color-surface-container-low);color:var(--color-on-surface);align-items:center;padding:0 1rem;z-index:99;view-transition-name:mediaheader}@media(width<765px){.media-header[_ngcontent-%COMP%]{position:fixed;inset:auto 0 76px}}.media-header[_ngcontent-%COMP%]   .empty-space[_ngcontent-%COMP%]{flex:1;margin:auto}.refresh-icon[_ngcontent-%COMP%]{fill:var(--color-on-surface)}.loading[_ngcontent-%COMP%]{cursor:progress;animation:spin-animation 2s linear infinite}.media-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;cursor:pointer;padding:.75rem 0;color:var(--color-on-surface);background:transparent}.media-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{width:2.25rem;height:2.25rem;font-size:0;margin:0;padding:.25rem;fill:var(--color-on-surface)}@media(width<765px){.media-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.media-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.delete), .media-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:not(.delete){color:var(--color-primary)}.media-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.delete)   svg[_ngcontent-%COMP%], .media-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:not(.delete)   svg[_ngcontent-%COMP%]{fill:var(--color-primary)!important}.delete[_ngcontent-%COMP%]{color:var(--color-error)}.delete[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--color-error)!important}.media-header[_ngcontent-%COMP%]   button.dropdown[_ngcontent-%COMP%]{gap:.5rem;padding:.75rem}.popover[_ngcontent-%COMP%]{right:anchor(right);top:anchor(bottom);justify-self:anchor-center;border:0;margin:0;padding:0;background-color:var(--color-surface-container-highest);box-shadow:.5rem 1rem 1rem 0 var(--color-shadow)}@media(width<765px){.popover[_ngcontent-%COMP%]{position-area:top;box-shadow:.5rem -1rem 1rem 0 var(--color-shadow)}}.icon[_ngcontent-%COMP%]{margin:0}.media-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:interest-source, .media-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .media-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background-color:var(--color-surface-container-highest)}.sortitem-dropdown[_ngcontent-%COMP%], .filteritem-dropdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:8rem}.filteritem-dropdown[_ngcontent-%COMP%]{min-width:11rem}.sortitem-dropdown-option[_ngcontent-%COMP%], .filteritem-dropdown-option[_ngcontent-%COMP%]{display:flex;cursor:pointer;align-items:center;justify-content:space-between;gap:.5rem;font-weight:400;height:2.75rem;padding:.5rem .25rem .5rem .75rem;background-color:var(--color-surface-container-highest);color:var(--color-on-surface)}.sortitem-dropdown-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .filteritem-dropdown-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:left;flex:1}.media-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:interest-source, .sortitem-dropdown-option[_ngcontent-%COMP%]:hover, .sortitem-dropdown-option[_ngcontent-%COMP%]:focus, .filteritem-dropdown-option[_ngcontent-%COMP%]:hover, .filteritem-dropdown-option[_ngcontent-%COMP%]:focus{background-color:var(--color-secondary-container);color:var(--color-primary)}"],changeDetection:0})}}return t})();var Ce=t=>({media:t}),qe=(t,a)=>[t,a],Ze=(t,a)=>a.id;function He(t,a){t&1&&h(0,"app-normal-header")}function Ve(t,a){t&1&&h(0,"app-edit-header")}function Le(t,a){t&1&&h(0,"app-load-indicator",3)}function Ie(t,a){t&1&&(o(0,"div",3),c(),o(1,"svg",5),h(2,"path",6),r(),C(),o(3,"p"),m(4,"No media items found matching the selected filter!"),r()())}function Ne(t,a){t&1&&j(0)}function Be(t,a){if(t&1){let e=x();o(0,"div",7)(1,"input",9),g("click",function(n){return v(e),_(n.stopPropagation())})("change",function(n){v(e);let l=s().$implicit,O=s(2);return _(O.onMediaSelected(l,n))}),r(),B(2,Ne,1,0,"ng-container",10),r()}if(t&2){let e=s().$implicit,i=s(2),n=U(6);S("title",e.title),K("aria-selected",i.checkedMediaIDs().includes(e.id)),d(),S("id",e.id)("checked",i.checkedMediaIDs().includes(e.id)),d(),S("ngTemplateOutlet",n)("ngTemplateOutletContext",Q(6,Ce,e))}}function Ae(t,a){t&1&&j(0)}function Ge(t,a){if(t&1&&(o(0,"a",11),B(1,Ae,1,0,"ng-container",10),r()),t&2){let e=s().$implicit,i=s(2),n=U(6);q("view-transition-name: media-"+e.id),S("routerLink",ie(7,qe,"/"+i.RouteMedia,e.id))("title",e.title)("id",e.id),d(),S("ngTemplateOutlet",n)("ngTemplateOutletContext",Q(10,Ce,e))}}function Re(t,a){if(t&1&&w(0,Be,3,8,"div",7)(1,Ge,2,12,"a",8),t&2){let e=s(2);M(e.inEditMode()?0:1)}}function $e(t,a){if(t&1){let e=x();w(0,Ie,5,0,"div",3),o(1,"div",4),g("nearEnd",function(){v(e);let n=s();return _(n.onNearEndScroll())}),D(2,Re,2,1,null,null,Ze),r()}if(t&2){let e=s();M(e.filteredSortedMedia().length===0?0:-1),d(2),F(e.displayMedia())}}function ze(t,a){if(t&1&&(c(),o(0,"svg",17)(1,"g",18)(2,"path",19),h(3,"animateTransform",20),r()()()),t&2){let e=s().media;q("view-transition-name: media-"+e.id+"-logo")}}function je(t,a){if(t&1&&(c(),o(0,"svg",21),h(1,"path",22),r()),t&2){let e=s().media;q("view-transition-name: media-"+e.id+"-logo")}}function Ue(t,a){if(t&1&&(c(),o(0,"svg",23),h(1,"path",24),r()),t&2){let e=s().media;q("view-transition-name: media-"+e.id+"-logo"),H("success",e.trailer_exists)}}function Qe(t,a){if(t&1){let e=x();o(0,"label",12)(1,"img",13),g("load",function(){let n=v(e).media;return _(n.isImageLoaded=!0)})("error",function(){let n=v(e).media;return _(n.isImageLoaded=!0)}),r(),o(2,"p"),m(3),r()(),w(4,ze,4,2,":svg:svg",14)(5,je,2,2,":svg:svg",15)(6,Ue,2,4,":svg:svg",16)}if(t&2){let e=a.media;S("for",e.id),d(),q("view-transition-name: media-"+e.id+"-image"),H("animated-gradient",!e.isImageLoaded),S("id",te("mediaImage",e.id))("src",e.poster_path||"assets/poster-sm.png",W)("alt",e.title),d(),q("view-transition-name: media-"+e.id+"-title"),d(),V(e.title),d(),M(e.status.toLowerCase()=="downloading"?4:e.monitor?5:6)}}var we=(()=>{class t{constructor(){this.customfilterService=u(Z),this.mediaService=u(k),this.router=u(le),this.webSocketService=u(G),this.checkedMediaIDs=this.mediaService.checkedMediaIDs,this.displayCount=this.mediaService.displayCount,this.displayMedia=this.mediaService.displayMedia,this.filteredSortedMedia=this.mediaService.filteredSortedMedia,this.inEditMode=this.mediaService.inEditMode,this.moviesOnly=this.mediaService.moviesOnly,this.isLoading=b(!0),this.defaultDisplayCount=this.mediaService.defaultDisplayCount,this.RouteMedia=se,this.effect1=N(()=>{this.mediaService.mediaResource.value().length&&this.isLoading.set(!1),this.mediaService.mediaResource.isLoading()||this.isLoading.set(!1),this.customfilterService.moviesOnly.set(this.moviesOnly())})}ngOnInit(){switch(this.isLoading.set(!0),this.router.routerState.snapshot.url.toLowerCase()){case"/movies":this.moviesOnly.set(!0);break;case"/series":this.moviesOnly.set(!1);break;default:this.moviesOnly.set(null)}}onMediaSelected(e,i){i.target.checked?this.checkedMediaIDs.update(l=>[...l,e.id]):this.checkedMediaIDs.update(l=>l.filter(O=>O!==e.id))}onNearEndScroll(){this.displayCount()>=this.filteredSortedMedia().length||this.displayCount.update(e=>e+this.defaultDisplayCount)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=y({type:t,selectors:[["app-media2"]],decls:9,vars:2,consts:[["mediaCard",""],["dialogContainer",""],[1,"media-container"],[1,"center"],["appScrollNearEnd","","role","listbox","aria-multiselectable","true",1,"media-row",3,"nearEnd"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"empty-icon"],["d","M215.38-160q-23.05 0-39.22-16.16Q160-192.33 160-215.38v-529.24q0-23.05 16.16-39.22Q192.33-800 215.38-800h529.24q23.05 0 39.22 16.16Q800-767.67 800-744.62V-418q-7.33-4.55-15.4-7.82-8.08-3.27-15.37-6.8v-185.84H495.38v201.61q-10.84 6.39-22.26 13.54-11.43 7.16-21.89 14.85H190.77v173.08q0 10.76 6.92 17.69 6.93 6.92 17.69 6.92h128.16q6.15 8.54 12.42 16.12 6.27 7.57 12.66 14.65H215.38Zm-24.61-259.23h273.85v-199.23H190.77v199.23Zm0-230h578.46v-95.39q0-10.76-6.92-17.69-6.93-6.92-17.69-6.92H215.38q-10.76 0-17.69 6.92-6.92 6.93-6.92 17.69v95.39ZM480-480Zm0 0Zm0 0Zm0 0ZM650.37-98.46q-71.22 0-131.91-36.54t-97.23-97.31q36.54-60.77 97.23-97.31 60.69-36.53 132.16-36.53 71.46 0 131.76 36.53 60.31 36.54 97.62 97.81-36.08 61.27-97.25 97.31T650.37-98.46Zm.25-30.77q57.76 0 108.07-28.35 50.31-28.34 85.08-74.73-34.77-46.38-84.9-74.73-50.12-28.34-108.64-28.34-57.38 0-108.08 28.34-50.69 28.35-84.69 74.73 34 46.39 84.69 74.73 50.7 28.35 108.47 28.35Zm-.12-67.69q-15.12 0-25.38-10.44-10.27-10.43-10.27-25.11t10.42-24.95q10.41-10.27 25.08-10.27 15.5 0 25.38 10.43 9.89 10.43 9.89 25.12 0 14.68-10.01 24.95-10 10.27-25.11 10.27Z"],["role","option",1,"media-card",3,"title"],[1,"media-card",3,"routerLink","title","id","style"],["type","checkbox",1,"media-card-checkbox",3,"click","change","id","checked"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"media-card",3,"routerLink","title","id"],[3,"for"],["loading","lazy",3,"load","error","id","src","alt"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Downloading",1,"monitored-icon",3,"style"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Monitored",1,"monitored-icon",3,"style"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Trailer Exists",1,"downloaded-icon",3,"success","style"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Downloading",1,"monitored-icon"],["transform","scale(0.9) translate(65,-60)"],["d","M343 -107q-120 -42 -194.5 -146.5T74 -490q0 -29 4 -57.5T91 -604l-57 33 -37 -62 185 -107 106 184 -63 36 -54 -92q-13 30 -18.5 60.5T147 -490q0 113 65.5 200T381 -171zm291 -516v-73h107q-47 -60 -115.5 -93.5T480 -823q-66 0 -123.5 24T255 -734l-38 -65q54 -45 121 -71t142 -26q85 0 160.5 33T774 -769v-67h73v213zM598 -1 413 -107l107 -184 62 37 -54 94q123 -17 204.5 -110.5T814 -489q0 -19 -2.5 -37.5T805 -563h74q4 18 6 36.5t2 36.5q0 142 -87 251.5T578 -96l56 33z"],["attributeName","transform","type","rotate","from","0 470 -480","to","360 470 -480","dur","5","repeatCount","indefinite"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Monitored",1,"monitored-icon"],["d","M713-600 600-713l56-57 57 57 141-142 57 57-198 198ZM200-120v-640q0-33 23.5-56.5T280-840h280q-20 30-30 57.5T520-720q0 72 45.5 127T680-524q23 3 40 3t40-3v404L480-240 200-120Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Trailer Exists",1,"downloaded-icon"],["d","M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q65 0 123 19t107 53l-58 59q-38-24-81-37.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160q133 0 226.5-93.5T800-480q0-18-2-36t-6-35l65-65q11 32 17 66t6 70q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm-56-216L254-466l56-56 114 114 400-401 56 56-456 457Z"]],template:function(i,n){i&1&&(w(0,He,1,0,"app-normal-header")(1,Ve,1,0,"app-edit-header"),o(2,"div",2),w(3,Le,1,0,"app-load-indicator",3)(4,$e,4,1),r(),B(5,Qe,7,13,"ng-template",null,0,ne),h(7,"template",null,1)),i&2&&(M(n.inEditMode()?1:0),d(3),M(n.isLoading()?3:4))},dependencies:[ve,ce,ae,me,fe,de,pe],styles:['.empty-icon[_ngcontent-%COMP%]{width:100%;height:clamp(10rem,25vh,30rem);fill:var(--color-on-surface)}.media-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:auto}@media(width<765px){.media-container[_ngcontent-%COMP%]{margin-bottom:80px}}.text-center[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{position:fixed;top:50vh;left:50%;transform:translate(-50%,-50%)}.media-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(min(180px,100%),1fr));gap:1rem;padding:1rem}@media(width<900px){.media-row[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(min(120px,100%),1fr));gap:.5rem;padding:.5rem}}.media-card[_ngcontent-%COMP%]{text-decoration:auto;display:flex;flex-direction:column;transition:all .4s;border-radius:10px;cursor:pointer;position:relative;overflow:hidden;background-image:url("./media/poster-sm-XZCQRTNE.png");background-repeat:no-repeat;background-size:cover;view-transition-class:mediacard;aspect-ratio:3/5}.media-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;height:100%}.media-card-checkbox[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;width:1.5rem;height:1.5rem;background-color:var(--color-surface-container-high);outline:2px solid var(--color-primary);z-index:2}@media(width<765px){.media-card-checkbox[_ngcontent-%COMP%]{top:.25rem;left:.25rem;width:1rem;height:1rem}}.media-card-checkbox[_ngcontent-%COMP%]:checked{outline:none;accent-color:var(--color-primary)}.media-card-checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{border:4px solid var(--color-primary);border-radius:10px;overflow:hidden}.media-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{flex-shrink:0;width:100%;text-align:center;background-color:var(--color-surface-container-low);color:var(--color-primary);padding:.5rem 0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;view-transition-class:mediatitle}.animated-gradient[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_animateBg 2s linear infinite;background-image:linear-gradient(135deg,var(--color-surface-container-highest),var(--color-surface-container-low),var(--color-surface-container-highest),var(--color-surface-container-low));background-size:100% 450%}@keyframes _ngcontent-%COMP%_animateBg{0%{background-position:0% 100%}to{background-position:0% 0%}}.media-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{flex-grow:1;object-fit:cover;overflow:hidden;width:100%;view-transition-class:mediaimage}.media-card[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;top:5px;height:24px;width:24px}.media-card[_ngcontent-%COMP%]   .monitored-icon[_ngcontent-%COMP%], .media-card[_ngcontent-%COMP%]   .downloaded-icon[_ngcontent-%COMP%]{fill:var(--color-info);right:5px}.media-card[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{fill:var(--color-success)}.media-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:none}.media-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px 5px var(--color-outline)}'],changeDetection:0})}}return t})();var Zt=[{path:"",loadComponent:()=>we}];export{Zt as default};
