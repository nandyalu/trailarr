import{$ as S,D as m,F as y,M as k,Ma as d,S as w,Sa as M,Ua as D,_ as u,j as p,nc as x,o as v,r as b,va as g}from"./chunk-U6XCB5WN.js";function E(e){return typeof e<"u"&&e!==null}function O(e){return e!=null&&`${e}`!="false"}function P(e){let t=new Date(e);if(!Number.isNaN(t.valueOf()))return t;let r=String(e).match(/\d+/g);if(r===null||r.length<=2)return t;{let[i,s,...n]=r.map(o=>parseInt(o,10));return new Date(Date.UTC(i,s-1,...n))}}var l=60,f=l*60,c=f*24,C=c*7,j=c*30,I=c*365,A=(()=>{let t=class t{constructor(){this.changes=new p}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=u({token:t,factory:t.\u0275fac});let e=t;return e})(),z=function(e){let t=Date.now(),r=Math.round(Math.abs(t-e)/1e3),i=e<t?"ago":"from now",[s,n]=r<l?[Math.round(r),"second"]:r<f?[Math.round(r/l),"minute"]:r<c?[Math.round(r/f),"hour"]:r<C?[Math.round(r/c),"day"]:r<j?[Math.round(r/C),"week"]:r<I?[Math.round(r/j),"month"]:[Math.round(r/I),"year"];return{value:s,unit:n,suffix:i}},a=class{},F=(()=>{let t=class t extends a{format(i){let{suffix:s,value:n,unit:o}=z(i);return this.parse(n,o,s)}parse(i,s,n){return i!==1&&(s+="s"),i+" "+s+" "+n}};t.\u0275fac=(()=>{let i;return function(n){return(i||(i=g(t)))(n||t)}})(),t.\u0275prov=u({token:t,factory:t.\u0275fac});let e=t;return e})();var h=class{},N=(()=>{let t=class t extends h{tick(i){return b(0).pipe(k(()=>{let s=Date.now(),n=Math.round(Math.abs(s-i)/1e3),o=n<l?1e3:n<f?1e3*l:n<c?1e3*f:0;return o?m(o):v()}),w(1))}};t.\u0275fac=(()=>{let i;return function(n){return(i||(i=g(t)))(n||t)}})(),t.\u0275prov=u({token:t,factory:t.\u0275fac});let e=t;return e})();var K=(()=>{let t=class t{constructor(i,s,n,o){this.clock=o,this.live=!0,this.stateChanges=new p,i&&(this.intlSubscription=i.changes.subscribe(()=>this.stateChanges.next())),this.stateChanges.subscribe(()=>{this.value=n.format(this.date),s.markForCheck()})}transform(i,...s){let n=P(i).valueOf(),o;if(o=E(s[0])?O(s[0]):this.live,this.date===n&&this.live===o)return this.value;if(this.date=n,this.live=o,this.date)this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=void 0),this.clockSubscription=this.clock.tick(this.date).pipe(y(()=>this.live,this)).subscribe(()=>this.stateChanges.next()),this.stateChanges.next();else throw new SyntaxError(`Wrong parameter in TimeagoPipe. Expected a valid date, received: ${i}`);return this.value}ngOnDestroy(){this.intlSubscription&&(this.intlSubscription.unsubscribe(),this.intlSubscription=void 0),this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=void 0),this.stateChanges.complete()}};t.\u0275fac=function(s){return new(s||t)(d(A,24),d(x,16),d(a,16),d(h,16))},t.\u0275pipe=D({name:"timeago",type:t,pure:!1,standalone:!1}),t.\u0275prov=u({token:t,factory:t.\u0275fac});let e=t;return e})(),q=(()=>{let t=class t{static forRoot(i={}){return{ngModule:t,providers:[i.clock||{provide:h,useClass:N},i.intl||[],i.formatter||{provide:a,useClass:F}]}}static forChild(i={}){return{ngModule:t,providers:[i.clock||{provide:h,useClass:N},i.intl||[],i.formatter||{provide:a,useClass:F}]}}};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=M({type:t}),t.\u0275inj=S({});let e=t;return e})();export{K as a,q as b};
