import{a as p}from"./chunk-TUKS4XG2.js";import{R as l,T as d}from"./chunk-JSXVGBWS.js";import{Ac as a,G as i,Ta as v,_ as u,c as h,da as c,fc as b,kc as w,s as m,sa as f,xa as C,xb as y,xc as g,zc as k}from"./chunk-U6XCB5WN.js";var F=(()=>{let o=class o{constructor(){this.textToCopy=w.required(),this.webSocketService=c(p),this.element=c(C),this.element.nativeElement.classList.add("copy")}onClick(){this.copyToClipboard(this.textToCopy()),console.log("Element with copy button clicked!")}copyToClipboard(t){return h(this,null,function*(){if(navigator.clipboard)try{yield navigator.clipboard.writeText(t),this.webSocketService.showToast("Copied to clipboard!")}catch(e){this.webSocketService.showToast("Error copying text to clipboard.","Error"),console.error("Failed to copy: ",e)}else{let e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.webSocketService.showToast("Copied to clipboard!")}})}};o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=v({type:o,selectors:[["","appCopyToClipboard",""]],hostBindings:function(e,n){e&1&&y("click",function(){return n.onClick()})("keydown.enter",function(){return n.onClick()})},inputs:{textToCopy:[1,"textToCopy"]}});let r=o;return r})();function s(){return r=>{let o="";if(r.error instanceof ErrorEvent)o=`Client Error: ${r.error.message}`;else{let x=r.error?.detail,t=r.error?.message,e=r.message||"Unknown error occurred";o=`Server Error (${r.status}): ${x||t||e}`}return m(()=>new Error(o))}}var ee=(()=>{let o=class o{constructor(){this.http=c(g),this.websocketService=c(p),this.connectionsUrl=a.apiUrl+a.connections,this.connectionsResource=k(()=>({url:this.connectionsUrl}),{defaultValue:[]}),this.newConnection={added_at:new Date().toISOString(),api_key:"",arr_type:l.Radarr,id:-1,monitor:d.New,name:"",path_mappings:[],url:""},this.connectionID=f(-1),this.selectedConnection=b(()=>{let t=this.connectionsResource.value().find(e=>e.id===this.connectionID());return t||this.newConnection})}addConnection(t){return this.http.post(this.connectionsUrl,t).pipe(i(s()))}connectionExists(t){return this.connectionsResource.value().some(n=>n.id===t)?!0:(t!=-1&&this.websocketService.showToast(`Connection with ID '${t}' does not exist.`,"error"),!1)}deleteConnection(t){var e=this.connectionsUrl+t;return this.http.delete(e).pipe(i(s()))}getRootFolders(t){var e=this.connectionsUrl+"rootfolders";return this.http.post(e,t).pipe(i(s()))}testConnection(t){var e=this.connectionsUrl+"test";return this.http.post(e,t).pipe(i(s()))}updateConnection(t,e){var n=this.connectionsUrl+t;return this.http.put(n,e).pipe(i(s()))}};o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();export{F as a,ee as b};
